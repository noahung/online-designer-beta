(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var vr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function V_(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function q_(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var gx={exports:{}},fc={},xx={exports:{}},$e={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa=Symbol.for("react.element"),W_=Symbol.for("react.portal"),H_=Symbol.for("react.fragment"),K_=Symbol.for("react.strict_mode"),G_=Symbol.for("react.profiler"),Y_=Symbol.for("react.provider"),J_=Symbol.for("react.context"),X_=Symbol.for("react.forward_ref"),Q_=Symbol.for("react.suspense"),Z_=Symbol.for("react.memo"),e1=Symbol.for("react.lazy"),Xm=Symbol.iterator;function t1(e){return e===null||typeof e!="object"?null:(e=Xm&&e[Xm]||e["@@iterator"],typeof e=="function"?e:null)}var yx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bx=Object.assign,vx={};function Ei(e,t,r){this.props=e,this.context=t,this.refs=vx,this.updater=r||yx}Ei.prototype.isReactComponent={};Ei.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ei.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function wx(){}wx.prototype=Ei.prototype;function Wh(e,t,r){this.props=e,this.context=t,this.refs=vx,this.updater=r||yx}var Hh=Wh.prototype=new wx;Hh.constructor=Wh;bx(Hh,Ei.prototype);Hh.isPureReactComponent=!0;var Qm=Array.isArray,_x=Object.prototype.hasOwnProperty,Kh={current:null},jx={key:!0,ref:!0,__self:!0,__source:!0};function kx(e,t,r){var n,s={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)_x.call(t,n)&&!jx.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:aa,type:e,key:i,ref:a,props:s,_owner:Kh.current}}function r1(e,t){return{$$typeof:aa,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Gh(e){return typeof e=="object"&&e!==null&&e.$$typeof===aa}function n1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Zm=/\/+/g;function Gc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?n1(""+e.key):t.toString(36)}function rl(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case aa:case W_:a=!0}}if(a)return a=e,s=s(a),e=n===""?"."+Gc(a,0):n,Qm(s)?(r="",e!=null&&(r=e.replace(Zm,"$&/")+"/"),rl(s,t,r,"",function(u){return u})):s!=null&&(Gh(s)&&(s=r1(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Zm,"$&/")+"/")+e)),t.push(s)),1;if(a=0,n=n===""?".":n+":",Qm(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+Gc(i,l);a+=rl(i,t,r,c,s)}else if(c=t1(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+Gc(i,l++),a+=rl(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Na(e,t,r){if(e==null)return e;var n=[],s=0;return rl(e,n,"","",function(i){return t.call(r,i,s++)}),n}function s1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var It={current:null},nl={transition:null},i1={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:nl,ReactCurrentOwner:Kh};function Nx(){throw Error("act(...) is not supported in production builds of React.")}$e.Children={map:Na,forEach:function(e,t,r){Na(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Na(e,function(){t++}),t},toArray:function(e){return Na(e,function(t){return t})||[]},only:function(e){if(!Gh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};$e.Component=Ei;$e.Fragment=H_;$e.Profiler=G_;$e.PureComponent=Wh;$e.StrictMode=K_;$e.Suspense=Q_;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=i1;$e.act=Nx;$e.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=bx({},e.props),s=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=Kh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_x.call(t,c)&&!jx.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:aa,type:e.type,key:s,ref:i,props:n,_owner:a}};$e.createContext=function(e){return e={$$typeof:J_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Y_,_context:e},e.Consumer=e};$e.createElement=kx;$e.createFactory=function(e){var t=kx.bind(null,e);return t.type=e,t};$e.createRef=function(){return{current:null}};$e.forwardRef=function(e){return{$$typeof:X_,render:e}};$e.isValidElement=Gh;$e.lazy=function(e){return{$$typeof:e1,_payload:{_status:-1,_result:e},_init:s1}};$e.memo=function(e,t){return{$$typeof:Z_,type:e,compare:t===void 0?null:t}};$e.startTransition=function(e){var t=nl.transition;nl.transition={};try{e()}finally{nl.transition=t}};$e.unstable_act=Nx;$e.useCallback=function(e,t){return It.current.useCallback(e,t)};$e.useContext=function(e){return It.current.useContext(e)};$e.useDebugValue=function(){};$e.useDeferredValue=function(e){return It.current.useDeferredValue(e)};$e.useEffect=function(e,t){return It.current.useEffect(e,t)};$e.useId=function(){return It.current.useId()};$e.useImperativeHandle=function(e,t,r){return It.current.useImperativeHandle(e,t,r)};$e.useInsertionEffect=function(e,t){return It.current.useInsertionEffect(e,t)};$e.useLayoutEffect=function(e,t){return It.current.useLayoutEffect(e,t)};$e.useMemo=function(e,t){return It.current.useMemo(e,t)};$e.useReducer=function(e,t,r){return It.current.useReducer(e,t,r)};$e.useRef=function(e){return It.current.useRef(e)};$e.useState=function(e){return It.current.useState(e)};$e.useSyncExternalStore=function(e,t,r){return It.current.useSyncExternalStore(e,t,r)};$e.useTransition=function(){return It.current.useTransition()};$e.version="18.3.1";xx.exports=$e;var p=xx.exports;const vt=V_(p);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o1=p,a1=Symbol.for("react.element"),l1=Symbol.for("react.fragment"),c1=Object.prototype.hasOwnProperty,u1=o1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d1={key:!0,ref:!0,__self:!0,__source:!0};function Sx(e,t,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)c1.call(t,n)&&!d1.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:a1,type:e,key:i,ref:a,props:s,_owner:u1.current}}fc.Fragment=l1;fc.jsx=Sx;fc.jsxs=Sx;gx.exports=fc;var o=gx.exports,Cx={exports:{}},ir={},Ex={exports:{}},Tx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(R,re){var ae=R.length;R.push(re);e:for(;0<ae;){var V=ae-1>>>1,pe=R[V];if(0<s(pe,re))R[V]=re,R[ae]=pe,ae=V;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var re=R[0],ae=R.pop();if(ae!==re){R[0]=ae;e:for(var V=0,pe=R.length,ye=pe>>>1;V<ye;){var ve=2*(V+1)-1,Se=R[ve],be=ve+1,K=R[be];if(0>s(Se,ae))be<pe&&0>s(K,Se)?(R[V]=K,R[be]=ae,V=be):(R[V]=Se,R[ve]=ae,V=ve);else if(be<pe&&0>s(K,ae))R[V]=K,R[be]=ae,V=be;else break e}}return re}function s(R,re){var ae=R.sortIndex-re.sortIndex;return ae!==0?ae:R.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,v=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(R){for(var re=r(u);re!==null;){if(re.callback===null)n(u);else if(re.startTime<=R)n(u),re.sortIndex=re.expirationTime,t(c,re);else break;re=r(u)}}function _(R){if(b=!1,g(R),!v)if(r(c)!==null)v=!0,ne(k);else{var re=r(u);re!==null&&fe(_,re.startTime-R)}}function k(R,re){v=!1,b&&(b=!1,y(E),E=-1),m=!0;var ae=f;try{for(g(re),h=r(c);h!==null&&(!(h.expirationTime>re)||R&&!P());){var V=h.callback;if(typeof V=="function"){h.callback=null,f=h.priorityLevel;var pe=V(h.expirationTime<=re);re=e.unstable_now(),typeof pe=="function"?h.callback=pe:h===r(c)&&n(c),g(re)}else n(c);h=r(c)}if(h!==null)var ye=!0;else{var ve=r(u);ve!==null&&fe(_,ve.startTime-re),ye=!1}return ye}finally{h=null,f=ae,m=!1}}var S=!1,N=null,E=-1,O=5,D=-1;function P(){return!(e.unstable_now()-D<O)}function te(){if(N!==null){var R=e.unstable_now();D=R;var re=!0;try{re=N(!0,R)}finally{re?B():(S=!1,N=null)}}else S=!1}var B;if(typeof x=="function")B=function(){x(te)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Z=he.port2;he.port1.onmessage=te,B=function(){Z.postMessage(null)}}else B=function(){w(te,0)};function ne(R){N=R,S||(S=!0,B())}function fe(R,re){E=w(function(){R(e.unstable_now())},re)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_continueExecution=function(){v||m||(v=!0,ne(k))},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(R){switch(f){case 1:case 2:case 3:var re=3;break;default:re=f}var ae=f;f=re;try{return R()}finally{f=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(R,re){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var ae=f;f=R;try{return re()}finally{f=ae}},e.unstable_scheduleCallback=function(R,re,ae){var V=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?V+ae:V):ae=V,R){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=ae+pe,R={id:d++,callback:re,priorityLevel:R,startTime:ae,expirationTime:pe,sortIndex:-1},ae>V?(R.sortIndex=ae,t(u,R),r(c)===null&&R===r(u)&&(b?(y(E),E=-1):b=!0,fe(_,ae-V))):(R.sortIndex=pe,t(c,R),v||m||(v=!0,ne(k))),R},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(R){var re=f;return function(){var ae=f;f=re;try{return R.apply(this,arguments)}finally{f=ae}}}})(Tx);Ex.exports=Tx;var h1=Ex.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f1=p,nr=h1;function H(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Px=new Set,$o={};function $s(e,t){yi(e,t),yi(e+"Capture",t)}function yi(e,t){for($o[e]=t,e=0;e<t.length;e++)Px.add(t[e])}var un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),od=Object.prototype.hasOwnProperty,m1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ep={},tp={};function p1(e){return od.call(tp,e)?!0:od.call(ep,e)?!1:m1.test(e)?tp[e]=!0:(ep[e]=!0,!1)}function g1(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function x1(e,t,r,n){if(t===null||typeof t>"u"||g1(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Bt(e,t,r,n,s,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){St[e]=new Bt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];St[t]=new Bt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){St[e]=new Bt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){St[e]=new Bt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){St[e]=new Bt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){St[e]=new Bt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){St[e]=new Bt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){St[e]=new Bt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){St[e]=new Bt(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yh=/[\-:]([a-z])/g;function Jh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yh,Jh);St[t]=new Bt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yh,Jh);St[t]=new Bt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yh,Jh);St[t]=new Bt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){St[e]=new Bt(e,1,!1,e.toLowerCase(),null,!1,!1)});St.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){St[e]=new Bt(e,1,!1,e.toLowerCase(),null,!0,!0)});function Xh(e,t,r,n){var s=St.hasOwnProperty(t)?St[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(x1(t,r,s,n)&&(r=null),n||s===null?p1(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var yn=f1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sa=Symbol.for("react.element"),Ks=Symbol.for("react.portal"),Gs=Symbol.for("react.fragment"),Qh=Symbol.for("react.strict_mode"),ad=Symbol.for("react.profiler"),$x=Symbol.for("react.provider"),Ax=Symbol.for("react.context"),Zh=Symbol.for("react.forward_ref"),ld=Symbol.for("react.suspense"),cd=Symbol.for("react.suspense_list"),ef=Symbol.for("react.memo"),En=Symbol.for("react.lazy"),Rx=Symbol.for("react.offscreen"),rp=Symbol.iterator;function Hi(e){return e===null||typeof e!="object"?null:(e=rp&&e[rp]||e["@@iterator"],typeof e=="function"?e:null)}var tt=Object.assign,Yc;function so(e){if(Yc===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Yc=t&&t[1]||""}return`
`+Yc+e}var Jc=!1;function Xc(e,t){if(!e||Jc)return"";Jc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=a&&0<=l);break}}}finally{Jc=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?so(e):""}function y1(e){switch(e.tag){case 5:return so(e.type);case 16:return so("Lazy");case 13:return so("Suspense");case 19:return so("SuspenseList");case 0:case 2:case 15:return e=Xc(e.type,!1),e;case 11:return e=Xc(e.type.render,!1),e;case 1:return e=Xc(e.type,!0),e;default:return""}}function ud(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gs:return"Fragment";case Ks:return"Portal";case ad:return"Profiler";case Qh:return"StrictMode";case ld:return"Suspense";case cd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ax:return(e.displayName||"Context")+".Consumer";case $x:return(e._context.displayName||"Context")+".Provider";case Zh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ef:return t=e.displayName||null,t!==null?t:ud(e.type)||"Memo";case En:t=e._payload,e=e._init;try{return ud(e(t))}catch{}}return null}function b1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ud(t);case 8:return t===Qh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Hn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dx(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function v1(e){var t=Dx(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ca(e){e._valueTracker||(e._valueTracker=v1(e))}function Mx(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Dx(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function _l(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function dd(e,t){var r=t.checked;return tt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function np(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Hn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ox(e,t){t=t.checked,t!=null&&Xh(e,"checked",t,!1)}function hd(e,t){Ox(e,t);var r=Hn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?fd(e,t.type,r):t.hasOwnProperty("defaultValue")&&fd(e,t.type,Hn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function sp(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function fd(e,t,r){(t!=="number"||_l(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var io=Array.isArray;function ui(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Hn(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function md(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(H(91));return tt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ip(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(H(92));if(io(r)){if(1<r.length)throw Error(H(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Hn(r)}}function Lx(e,t){var r=Hn(t.value),n=Hn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function op(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Fx(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pd(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Fx(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ea,Ix=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ea=Ea||document.createElement("div"),Ea.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ea.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ao(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w1=["Webkit","ms","Moz","O"];Object.keys(uo).forEach(function(e){w1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),uo[t]=uo[e]})});function Bx(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||uo.hasOwnProperty(e)&&uo[e]?(""+t).trim():t+"px"}function zx(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Bx(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var _1=tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gd(e,t){if(t){if(_1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(H(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(H(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(H(61))}if(t.style!=null&&typeof t.style!="object")throw Error(H(62))}}function xd(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yd=null;function tf(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bd=null,di=null,hi=null;function ap(e){if(e=ua(e)){if(typeof bd!="function")throw Error(H(280));var t=e.stateNode;t&&(t=yc(t),bd(e.stateNode,e.type,t))}}function Ux(e){di?hi?hi.push(e):hi=[e]:di=e}function Vx(){if(di){var e=di,t=hi;if(hi=di=null,ap(e),t)for(e=0;e<t.length;e++)ap(t[e])}}function qx(e,t){return e(t)}function Wx(){}var Qc=!1;function Hx(e,t,r){if(Qc)return e(t,r);Qc=!0;try{return qx(e,t,r)}finally{Qc=!1,(di!==null||hi!==null)&&(Wx(),Vx())}}function Ro(e,t){var r=e.stateNode;if(r===null)return null;var n=yc(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(H(231,t,typeof r));return r}var vd=!1;if(un)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){vd=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{vd=!1}function j1(e,t,r,n,s,i,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var ho=!1,jl=null,kl=!1,wd=null,k1={onError:function(e){ho=!0,jl=e}};function N1(e,t,r,n,s,i,a,l,c){ho=!1,jl=null,j1.apply(k1,arguments)}function S1(e,t,r,n,s,i,a,l,c){if(N1.apply(this,arguments),ho){if(ho){var u=jl;ho=!1,jl=null}else throw Error(H(198));kl||(kl=!0,wd=u)}}function As(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Kx(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function lp(e){if(As(e)!==e)throw Error(H(188))}function C1(e){var t=e.alternate;if(!t){if(t=As(e),t===null)throw Error(H(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return lp(s),e;if(i===n)return lp(s),t;i=i.sibling}throw Error(H(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(H(189))}}if(r.alternate!==n)throw Error(H(190))}if(r.tag!==3)throw Error(H(188));return r.stateNode.current===r?e:t}function Gx(e){return e=C1(e),e!==null?Yx(e):null}function Yx(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Yx(e);if(t!==null)return t;e=e.sibling}return null}var Jx=nr.unstable_scheduleCallback,cp=nr.unstable_cancelCallback,E1=nr.unstable_shouldYield,T1=nr.unstable_requestPaint,at=nr.unstable_now,P1=nr.unstable_getCurrentPriorityLevel,rf=nr.unstable_ImmediatePriority,Xx=nr.unstable_UserBlockingPriority,Nl=nr.unstable_NormalPriority,$1=nr.unstable_LowPriority,Qx=nr.unstable_IdlePriority,mc=null,Kr=null;function A1(e){if(Kr&&typeof Kr.onCommitFiberRoot=="function")try{Kr.onCommitFiberRoot(mc,e,void 0,(e.current.flags&128)===128)}catch{}}var Mr=Math.clz32?Math.clz32:M1,R1=Math.log,D1=Math.LN2;function M1(e){return e>>>=0,e===0?32:31-(R1(e)/D1|0)|0}var Ta=64,Pa=4194304;function oo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Sl(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=oo(l):(i&=a,i!==0&&(n=oo(i)))}else a=r&~s,a!==0?n=oo(a):i!==0&&(n=oo(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Mr(t),s=1<<r,n|=e[r],t&=~s;return n}function O1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L1(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-Mr(i),l=1<<a,c=s[a];c===-1?(!(l&r)||l&n)&&(s[a]=O1(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function _d(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Zx(){var e=Ta;return Ta<<=1,!(Ta&4194240)&&(Ta=64),e}function Zc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function la(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Mr(t),e[t]=r}function F1(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Mr(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function nf(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Mr(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var Be=0;function ey(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ty,sf,ry,ny,sy,jd=!1,$a=[],Fn=null,In=null,Bn=null,Do=new Map,Mo=new Map,$n=[],I1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function up(e,t){switch(e){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":In=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":Do.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mo.delete(t.pointerId)}}function Gi(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=ua(t),t!==null&&sf(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function B1(e,t,r,n,s){switch(t){case"focusin":return Fn=Gi(Fn,e,t,r,n,s),!0;case"dragenter":return In=Gi(In,e,t,r,n,s),!0;case"mouseover":return Bn=Gi(Bn,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Do.set(i,Gi(Do.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Mo.set(i,Gi(Mo.get(i)||null,e,t,r,n,s)),!0}return!1}function iy(e){var t=ps(e.target);if(t!==null){var r=As(t);if(r!==null){if(t=r.tag,t===13){if(t=Kx(r),t!==null){e.blockedOn=t,sy(e.priority,function(){ry(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function sl(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=kd(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);yd=n,r.target.dispatchEvent(n),yd=null}else return t=ua(r),t!==null&&sf(t),e.blockedOn=r,!1;t.shift()}return!0}function dp(e,t,r){sl(e)&&r.delete(t)}function z1(){jd=!1,Fn!==null&&sl(Fn)&&(Fn=null),In!==null&&sl(In)&&(In=null),Bn!==null&&sl(Bn)&&(Bn=null),Do.forEach(dp),Mo.forEach(dp)}function Yi(e,t){e.blockedOn===t&&(e.blockedOn=null,jd||(jd=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,z1)))}function Oo(e){function t(s){return Yi(s,e)}if(0<$a.length){Yi($a[0],e);for(var r=1;r<$a.length;r++){var n=$a[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Fn!==null&&Yi(Fn,e),In!==null&&Yi(In,e),Bn!==null&&Yi(Bn,e),Do.forEach(t),Mo.forEach(t),r=0;r<$n.length;r++)n=$n[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<$n.length&&(r=$n[0],r.blockedOn===null);)iy(r),r.blockedOn===null&&$n.shift()}var fi=yn.ReactCurrentBatchConfig,Cl=!0;function U1(e,t,r,n){var s=Be,i=fi.transition;fi.transition=null;try{Be=1,of(e,t,r,n)}finally{Be=s,fi.transition=i}}function V1(e,t,r,n){var s=Be,i=fi.transition;fi.transition=null;try{Be=4,of(e,t,r,n)}finally{Be=s,fi.transition=i}}function of(e,t,r,n){if(Cl){var s=kd(e,t,r,n);if(s===null)cu(e,t,n,El,r),up(e,n);else if(B1(s,e,t,r,n))n.stopPropagation();else if(up(e,n),t&4&&-1<I1.indexOf(e)){for(;s!==null;){var i=ua(s);if(i!==null&&ty(i),i=kd(e,t,r,n),i===null&&cu(e,t,n,El,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else cu(e,t,n,null,r)}}var El=null;function kd(e,t,r,n){if(El=null,e=tf(n),e=ps(e),e!==null)if(t=As(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Kx(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return El=e,null}function oy(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(P1()){case rf:return 1;case Xx:return 4;case Nl:case $1:return 16;case Qx:return 536870912;default:return 16}default:return 16}}var Dn=null,af=null,il=null;function ay(){if(il)return il;var e,t=af,r=t.length,n,s="value"in Dn?Dn.value:Dn.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===s[i-n];n++);return il=s.slice(e,1<n?1-n:void 0)}function ol(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Aa(){return!0}function hp(){return!1}function or(e){function t(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Aa:hp,this.isPropagationStopped=hp,this}return tt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Aa)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Aa)},persist:function(){},isPersistent:Aa}),t}var Ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lf=or(Ti),ca=tt({},Ti,{view:0,detail:0}),q1=or(ca),eu,tu,Ji,pc=tt({},ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cf,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ji&&(Ji&&e.type==="mousemove"?(eu=e.screenX-Ji.screenX,tu=e.screenY-Ji.screenY):tu=eu=0,Ji=e),eu)},movementY:function(e){return"movementY"in e?e.movementY:tu}}),fp=or(pc),W1=tt({},pc,{dataTransfer:0}),H1=or(W1),K1=tt({},ca,{relatedTarget:0}),ru=or(K1),G1=tt({},Ti,{animationName:0,elapsedTime:0,pseudoElement:0}),Y1=or(G1),J1=tt({},Ti,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),X1=or(J1),Q1=tt({},Ti,{data:0}),mp=or(Q1),Z1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},e2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},t2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function r2(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=t2[e])?!!t[e]:!1}function cf(){return r2}var n2=tt({},ca,{key:function(e){if(e.key){var t=Z1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ol(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?e2[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cf,charCode:function(e){return e.type==="keypress"?ol(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ol(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),s2=or(n2),i2=tt({},pc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pp=or(i2),o2=tt({},ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cf}),a2=or(o2),l2=tt({},Ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),c2=or(l2),u2=tt({},pc,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),d2=or(u2),h2=[9,13,27,32],uf=un&&"CompositionEvent"in window,fo=null;un&&"documentMode"in document&&(fo=document.documentMode);var f2=un&&"TextEvent"in window&&!fo,ly=un&&(!uf||fo&&8<fo&&11>=fo),gp=" ",xp=!1;function cy(e,t){switch(e){case"keyup":return h2.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uy(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ys=!1;function m2(e,t){switch(e){case"compositionend":return uy(t);case"keypress":return t.which!==32?null:(xp=!0,gp);case"textInput":return e=t.data,e===gp&&xp?null:e;default:return null}}function p2(e,t){if(Ys)return e==="compositionend"||!uf&&cy(e,t)?(e=ay(),il=af=Dn=null,Ys=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ly&&t.locale!=="ko"?null:t.data;default:return null}}var g2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!g2[e.type]:t==="textarea"}function dy(e,t,r,n){Ux(n),t=Tl(t,"onChange"),0<t.length&&(r=new lf("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var mo=null,Lo=null;function x2(e){_y(e,0)}function gc(e){var t=Qs(e);if(Mx(t))return e}function y2(e,t){if(e==="change")return t}var hy=!1;if(un){var nu;if(un){var su="oninput"in document;if(!su){var bp=document.createElement("div");bp.setAttribute("oninput","return;"),su=typeof bp.oninput=="function"}nu=su}else nu=!1;hy=nu&&(!document.documentMode||9<document.documentMode)}function vp(){mo&&(mo.detachEvent("onpropertychange",fy),Lo=mo=null)}function fy(e){if(e.propertyName==="value"&&gc(Lo)){var t=[];dy(t,Lo,e,tf(e)),Hx(x2,t)}}function b2(e,t,r){e==="focusin"?(vp(),mo=t,Lo=r,mo.attachEvent("onpropertychange",fy)):e==="focusout"&&vp()}function v2(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return gc(Lo)}function w2(e,t){if(e==="click")return gc(t)}function _2(e,t){if(e==="input"||e==="change")return gc(t)}function j2(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lr=typeof Object.is=="function"?Object.is:j2;function Fo(e,t){if(Lr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!od.call(t,s)||!Lr(e[s],t[s]))return!1}return!0}function wp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _p(e,t){var r=wp(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=wp(r)}}function my(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?my(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function py(){for(var e=window,t=_l();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=_l(e.document)}return t}function df(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function k2(e){var t=py(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&my(r.ownerDocument.documentElement,r)){if(n!==null&&df(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=_p(r,i);var a=_p(r,n);s&&a&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var N2=un&&"documentMode"in document&&11>=document.documentMode,Js=null,Nd=null,po=null,Sd=!1;function jp(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Sd||Js==null||Js!==_l(n)||(n=Js,"selectionStart"in n&&df(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),po&&Fo(po,n)||(po=n,n=Tl(Nd,"onSelect"),0<n.length&&(t=new lf("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Js)))}function Ra(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Xs={animationend:Ra("Animation","AnimationEnd"),animationiteration:Ra("Animation","AnimationIteration"),animationstart:Ra("Animation","AnimationStart"),transitionend:Ra("Transition","TransitionEnd")},iu={},gy={};un&&(gy=document.createElement("div").style,"AnimationEvent"in window||(delete Xs.animationend.animation,delete Xs.animationiteration.animation,delete Xs.animationstart.animation),"TransitionEvent"in window||delete Xs.transitionend.transition);function xc(e){if(iu[e])return iu[e];if(!Xs[e])return e;var t=Xs[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in gy)return iu[e]=t[r];return e}var xy=xc("animationend"),yy=xc("animationiteration"),by=xc("animationstart"),vy=xc("transitionend"),wy=new Map,kp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jn(e,t){wy.set(e,t),$s(t,[e])}for(var ou=0;ou<kp.length;ou++){var au=kp[ou],S2=au.toLowerCase(),C2=au[0].toUpperCase()+au.slice(1);Jn(S2,"on"+C2)}Jn(xy,"onAnimationEnd");Jn(yy,"onAnimationIteration");Jn(by,"onAnimationStart");Jn("dblclick","onDoubleClick");Jn("focusin","onFocus");Jn("focusout","onBlur");Jn(vy,"onTransitionEnd");yi("onMouseEnter",["mouseout","mouseover"]);yi("onMouseLeave",["mouseout","mouseover"]);yi("onPointerEnter",["pointerout","pointerover"]);yi("onPointerLeave",["pointerout","pointerover"]);$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$s("onBeforeInput",["compositionend","keypress","textInput","paste"]);$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E2=new Set("cancel close invalid load scroll toggle".split(" ").concat(ao));function Np(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,S1(n,t,void 0,e),e.currentTarget=null}function _y(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Np(s,l,u),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Np(s,l,u),i=c}}}if(kl)throw e=wd,kl=!1,wd=null,e}function He(e,t){var r=t[$d];r===void 0&&(r=t[$d]=new Set);var n=e+"__bubble";r.has(n)||(jy(t,e,2,!1),r.add(n))}function lu(e,t,r){var n=0;t&&(n|=4),jy(r,e,n,t)}var Da="_reactListening"+Math.random().toString(36).slice(2);function Io(e){if(!e[Da]){e[Da]=!0,Px.forEach(function(r){r!=="selectionchange"&&(E2.has(r)||lu(r,!1,e),lu(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Da]||(t[Da]=!0,lu("selectionchange",!1,t))}}function jy(e,t,r,n){switch(oy(t)){case 1:var s=U1;break;case 4:s=V1;break;default:s=of}r=s.bind(null,t,r,e),s=void 0,!vd||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function cu(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ps(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue e}l=l.parentNode}}n=n.return}Hx(function(){var u=i,d=tf(r),h=[];e:{var f=wy.get(e);if(f!==void 0){var m=lf,v=e;switch(e){case"keypress":if(ol(r)===0)break e;case"keydown":case"keyup":m=s2;break;case"focusin":v="focus",m=ru;break;case"focusout":v="blur",m=ru;break;case"beforeblur":case"afterblur":m=ru;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=fp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=H1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=a2;break;case xy:case yy:case by:m=Y1;break;case vy:m=c2;break;case"scroll":m=q1;break;case"wheel":m=d2;break;case"copy":case"cut":case"paste":m=X1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=pp}var b=(t&4)!==0,w=!b&&e==="scroll",y=b?f!==null?f+"Capture":null:f;b=[];for(var x=u,g;x!==null;){g=x;var _=g.stateNode;if(g.tag===5&&_!==null&&(g=_,y!==null&&(_=Ro(x,y),_!=null&&b.push(Bo(x,_,g)))),w)break;x=x.return}0<b.length&&(f=new m(f,v,null,r,d),h.push({event:f,listeners:b}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",f&&r!==yd&&(v=r.relatedTarget||r.fromElement)&&(ps(v)||v[dn]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=u,v=v?ps(v):null,v!==null&&(w=As(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(b=fp,_="onMouseLeave",y="onMouseEnter",x="mouse",(e==="pointerout"||e==="pointerover")&&(b=pp,_="onPointerLeave",y="onPointerEnter",x="pointer"),w=m==null?f:Qs(m),g=v==null?f:Qs(v),f=new b(_,x+"leave",m,r,d),f.target=w,f.relatedTarget=g,_=null,ps(d)===u&&(b=new b(y,x+"enter",v,r,d),b.target=g,b.relatedTarget=w,_=b),w=_,m&&v)t:{for(b=m,y=v,x=0,g=b;g;g=Fs(g))x++;for(g=0,_=y;_;_=Fs(_))g++;for(;0<x-g;)b=Fs(b),x--;for(;0<g-x;)y=Fs(y),g--;for(;x--;){if(b===y||y!==null&&b===y.alternate)break t;b=Fs(b),y=Fs(y)}b=null}else b=null;m!==null&&Sp(h,f,m,b,!1),v!==null&&w!==null&&Sp(h,w,v,b,!0)}}e:{if(f=u?Qs(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var k=y2;else if(yp(f))if(hy)k=_2;else{k=v2;var S=b2}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=w2);if(k&&(k=k(e,u))){dy(h,k,r,d);break e}S&&S(e,f,u),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&fd(f,"number",f.value)}switch(S=u?Qs(u):window,e){case"focusin":(yp(S)||S.contentEditable==="true")&&(Js=S,Nd=u,po=null);break;case"focusout":po=Nd=Js=null;break;case"mousedown":Sd=!0;break;case"contextmenu":case"mouseup":case"dragend":Sd=!1,jp(h,r,d);break;case"selectionchange":if(N2)break;case"keydown":case"keyup":jp(h,r,d)}var N;if(uf)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Ys?cy(e,r)&&(E="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(ly&&r.locale!=="ko"&&(Ys||E!=="onCompositionStart"?E==="onCompositionEnd"&&Ys&&(N=ay()):(Dn=d,af="value"in Dn?Dn.value:Dn.textContent,Ys=!0)),S=Tl(u,E),0<S.length&&(E=new mp(E,e,null,r,d),h.push({event:E,listeners:S}),N?E.data=N:(N=uy(r),N!==null&&(E.data=N)))),(N=f2?m2(e,r):p2(e,r))&&(u=Tl(u,"onBeforeInput"),0<u.length&&(d=new mp("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:u}),d.data=N))}_y(h,t)})}function Bo(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Tl(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ro(e,r),i!=null&&n.unshift(Bo(e,i,s)),i=Ro(e,t),i!=null&&n.push(Bo(e,i,s))),e=e.return}return n}function Fs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Sp(e,t,r,n,s){for(var i=t._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=Ro(r,i),c!=null&&a.unshift(Bo(r,c,l))):s||(c=Ro(r,i),c!=null&&a.push(Bo(r,c,l)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}var T2=/\r\n?/g,P2=/\u0000|\uFFFD/g;function Cp(e){return(typeof e=="string"?e:""+e).replace(T2,`
`).replace(P2,"")}function Ma(e,t,r){if(t=Cp(t),Cp(e)!==t&&r)throw Error(H(425))}function Pl(){}var Cd=null,Ed=null;function Td(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Pd=typeof setTimeout=="function"?setTimeout:void 0,$2=typeof clearTimeout=="function"?clearTimeout:void 0,Ep=typeof Promise=="function"?Promise:void 0,A2=typeof queueMicrotask=="function"?queueMicrotask:typeof Ep<"u"?function(e){return Ep.resolve(null).then(e).catch(R2)}:Pd;function R2(e){setTimeout(function(){throw e})}function uu(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Oo(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Oo(t)}function zn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Tp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Pi=Math.random().toString(36).slice(2),Wr="__reactFiber$"+Pi,zo="__reactProps$"+Pi,dn="__reactContainer$"+Pi,$d="__reactEvents$"+Pi,D2="__reactListeners$"+Pi,M2="__reactHandles$"+Pi;function ps(e){var t=e[Wr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[dn]||r[Wr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Tp(e);e!==null;){if(r=e[Wr])return r;e=Tp(e)}return t}e=r,r=e.parentNode}return null}function ua(e){return e=e[Wr]||e[dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Qs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(H(33))}function yc(e){return e[zo]||null}var Ad=[],Zs=-1;function Xn(e){return{current:e}}function Ke(e){0>Zs||(e.current=Ad[Zs],Ad[Zs]=null,Zs--)}function We(e,t){Zs++,Ad[Zs]=e.current,e.current=t}var Kn={},Dt=Xn(Kn),Gt=Xn(!1),ks=Kn;function bi(e,t){var r=e.type.contextTypes;if(!r)return Kn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Yt(e){return e=e.childContextTypes,e!=null}function $l(){Ke(Gt),Ke(Dt)}function Pp(e,t,r){if(Dt.current!==Kn)throw Error(H(168));We(Dt,t),We(Gt,r)}function ky(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(H(108,b1(e)||"Unknown",s));return tt({},r,n)}function Al(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kn,ks=Dt.current,We(Dt,e),We(Gt,Gt.current),!0}function $p(e,t,r){var n=e.stateNode;if(!n)throw Error(H(169));r?(e=ky(e,t,ks),n.__reactInternalMemoizedMergedChildContext=e,Ke(Gt),Ke(Dt),We(Dt,e)):Ke(Gt),We(Gt,r)}var sn=null,bc=!1,du=!1;function Ny(e){sn===null?sn=[e]:sn.push(e)}function O2(e){bc=!0,Ny(e)}function Qn(){if(!du&&sn!==null){du=!0;var e=0,t=Be;try{var r=sn;for(Be=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}sn=null,bc=!1}catch(s){throw sn!==null&&(sn=sn.slice(e+1)),Jx(rf,Qn),s}finally{Be=t,du=!1}}return null}var ei=[],ti=0,Rl=null,Dl=0,mr=[],pr=0,Ns=null,on=1,an="";function us(e,t){ei[ti++]=Dl,ei[ti++]=Rl,Rl=e,Dl=t}function Sy(e,t,r){mr[pr++]=on,mr[pr++]=an,mr[pr++]=Ns,Ns=e;var n=on;e=an;var s=32-Mr(n)-1;n&=~(1<<s),r+=1;var i=32-Mr(t)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,on=1<<32-Mr(t)+s|r<<s|n,an=i+e}else on=1<<i|r<<s|n,an=e}function hf(e){e.return!==null&&(us(e,1),Sy(e,1,0))}function ff(e){for(;e===Rl;)Rl=ei[--ti],ei[ti]=null,Dl=ei[--ti],ei[ti]=null;for(;e===Ns;)Ns=mr[--pr],mr[pr]=null,an=mr[--pr],mr[pr]=null,on=mr[--pr],mr[pr]=null}var rr=null,tr=null,Ye=!1,Rr=null;function Cy(e,t){var r=gr(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ap(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rr=e,tr=zn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rr=e,tr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Ns!==null?{id:on,overflow:an}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=gr(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,rr=e,tr=null,!0):!1;default:return!1}}function Rd(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Dd(e){if(Ye){var t=tr;if(t){var r=t;if(!Ap(e,t)){if(Rd(e))throw Error(H(418));t=zn(r.nextSibling);var n=rr;t&&Ap(e,t)?Cy(n,r):(e.flags=e.flags&-4097|2,Ye=!1,rr=e)}}else{if(Rd(e))throw Error(H(418));e.flags=e.flags&-4097|2,Ye=!1,rr=e}}}function Rp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rr=e}function Oa(e){if(e!==rr)return!1;if(!Ye)return Rp(e),Ye=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Td(e.type,e.memoizedProps)),t&&(t=tr)){if(Rd(e))throw Ey(),Error(H(418));for(;t;)Cy(e,t),t=zn(t.nextSibling)}if(Rp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(H(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){tr=zn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}tr=null}}else tr=rr?zn(e.stateNode.nextSibling):null;return!0}function Ey(){for(var e=tr;e;)e=zn(e.nextSibling)}function vi(){tr=rr=null,Ye=!1}function mf(e){Rr===null?Rr=[e]:Rr.push(e)}var L2=yn.ReactCurrentBatchConfig;function Xi(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(H(309));var n=r.stateNode}if(!n)throw Error(H(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},t._stringRef=i,t)}if(typeof e!="string")throw Error(H(284));if(!r._owner)throw Error(H(290,e))}return e}function La(e,t){throw e=Object.prototype.toString.call(t),Error(H(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Dp(e){var t=e._init;return t(e._payload)}function Ty(e){function t(y,x){if(e){var g=y.deletions;g===null?(y.deletions=[x],y.flags|=16):g.push(x)}}function r(y,x){if(!e)return null;for(;x!==null;)t(y,x),x=x.sibling;return null}function n(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function s(y,x){return y=Wn(y,x),y.index=0,y.sibling=null,y}function i(y,x,g){return y.index=g,e?(g=y.alternate,g!==null?(g=g.index,g<x?(y.flags|=2,x):g):(y.flags|=2,x)):(y.flags|=1048576,x)}function a(y){return e&&y.alternate===null&&(y.flags|=2),y}function l(y,x,g,_){return x===null||x.tag!==6?(x=yu(g,y.mode,_),x.return=y,x):(x=s(x,g),x.return=y,x)}function c(y,x,g,_){var k=g.type;return k===Gs?d(y,x,g.props.children,_,g.key):x!==null&&(x.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===En&&Dp(k)===x.type)?(_=s(x,g.props),_.ref=Xi(y,x,g),_.return=y,_):(_=fl(g.type,g.key,g.props,null,y.mode,_),_.ref=Xi(y,x,g),_.return=y,_)}function u(y,x,g,_){return x===null||x.tag!==4||x.stateNode.containerInfo!==g.containerInfo||x.stateNode.implementation!==g.implementation?(x=bu(g,y.mode,_),x.return=y,x):(x=s(x,g.children||[]),x.return=y,x)}function d(y,x,g,_,k){return x===null||x.tag!==7?(x=ws(g,y.mode,_,k),x.return=y,x):(x=s(x,g),x.return=y,x)}function h(y,x,g){if(typeof x=="string"&&x!==""||typeof x=="number")return x=yu(""+x,y.mode,g),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Sa:return g=fl(x.type,x.key,x.props,null,y.mode,g),g.ref=Xi(y,null,x),g.return=y,g;case Ks:return x=bu(x,y.mode,g),x.return=y,x;case En:var _=x._init;return h(y,_(x._payload),g)}if(io(x)||Hi(x))return x=ws(x,y.mode,g,null),x.return=y,x;La(y,x)}return null}function f(y,x,g,_){var k=x!==null?x.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return k!==null?null:l(y,x,""+g,_);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Sa:return g.key===k?c(y,x,g,_):null;case Ks:return g.key===k?u(y,x,g,_):null;case En:return k=g._init,f(y,x,k(g._payload),_)}if(io(g)||Hi(g))return k!==null?null:d(y,x,g,_,null);La(y,g)}return null}function m(y,x,g,_,k){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(g)||null,l(x,y,""+_,k);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Sa:return y=y.get(_.key===null?g:_.key)||null,c(x,y,_,k);case Ks:return y=y.get(_.key===null?g:_.key)||null,u(x,y,_,k);case En:var S=_._init;return m(y,x,g,S(_._payload),k)}if(io(_)||Hi(_))return y=y.get(g)||null,d(x,y,_,k,null);La(x,_)}return null}function v(y,x,g,_){for(var k=null,S=null,N=x,E=x=0,O=null;N!==null&&E<g.length;E++){N.index>E?(O=N,N=null):O=N.sibling;var D=f(y,N,g[E],_);if(D===null){N===null&&(N=O);break}e&&N&&D.alternate===null&&t(y,N),x=i(D,x,E),S===null?k=D:S.sibling=D,S=D,N=O}if(E===g.length)return r(y,N),Ye&&us(y,E),k;if(N===null){for(;E<g.length;E++)N=h(y,g[E],_),N!==null&&(x=i(N,x,E),S===null?k=N:S.sibling=N,S=N);return Ye&&us(y,E),k}for(N=n(y,N);E<g.length;E++)O=m(N,y,E,g[E],_),O!==null&&(e&&O.alternate!==null&&N.delete(O.key===null?E:O.key),x=i(O,x,E),S===null?k=O:S.sibling=O,S=O);return e&&N.forEach(function(P){return t(y,P)}),Ye&&us(y,E),k}function b(y,x,g,_){var k=Hi(g);if(typeof k!="function")throw Error(H(150));if(g=k.call(g),g==null)throw Error(H(151));for(var S=k=null,N=x,E=x=0,O=null,D=g.next();N!==null&&!D.done;E++,D=g.next()){N.index>E?(O=N,N=null):O=N.sibling;var P=f(y,N,D.value,_);if(P===null){N===null&&(N=O);break}e&&N&&P.alternate===null&&t(y,N),x=i(P,x,E),S===null?k=P:S.sibling=P,S=P,N=O}if(D.done)return r(y,N),Ye&&us(y,E),k;if(N===null){for(;!D.done;E++,D=g.next())D=h(y,D.value,_),D!==null&&(x=i(D,x,E),S===null?k=D:S.sibling=D,S=D);return Ye&&us(y,E),k}for(N=n(y,N);!D.done;E++,D=g.next())D=m(N,y,E,D.value,_),D!==null&&(e&&D.alternate!==null&&N.delete(D.key===null?E:D.key),x=i(D,x,E),S===null?k=D:S.sibling=D,S=D);return e&&N.forEach(function(te){return t(y,te)}),Ye&&us(y,E),k}function w(y,x,g,_){if(typeof g=="object"&&g!==null&&g.type===Gs&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case Sa:e:{for(var k=g.key,S=x;S!==null;){if(S.key===k){if(k=g.type,k===Gs){if(S.tag===7){r(y,S.sibling),x=s(S,g.props.children),x.return=y,y=x;break e}}else if(S.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===En&&Dp(k)===S.type){r(y,S.sibling),x=s(S,g.props),x.ref=Xi(y,S,g),x.return=y,y=x;break e}r(y,S);break}else t(y,S);S=S.sibling}g.type===Gs?(x=ws(g.props.children,y.mode,_,g.key),x.return=y,y=x):(_=fl(g.type,g.key,g.props,null,y.mode,_),_.ref=Xi(y,x,g),_.return=y,y=_)}return a(y);case Ks:e:{for(S=g.key;x!==null;){if(x.key===S)if(x.tag===4&&x.stateNode.containerInfo===g.containerInfo&&x.stateNode.implementation===g.implementation){r(y,x.sibling),x=s(x,g.children||[]),x.return=y,y=x;break e}else{r(y,x);break}else t(y,x);x=x.sibling}x=bu(g,y.mode,_),x.return=y,y=x}return a(y);case En:return S=g._init,w(y,x,S(g._payload),_)}if(io(g))return v(y,x,g,_);if(Hi(g))return b(y,x,g,_);La(y,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,x!==null&&x.tag===6?(r(y,x.sibling),x=s(x,g),x.return=y,y=x):(r(y,x),x=yu(g,y.mode,_),x.return=y,y=x),a(y)):r(y,x)}return w}var wi=Ty(!0),Py=Ty(!1),Ml=Xn(null),Ol=null,ri=null,pf=null;function gf(){pf=ri=Ol=null}function xf(e){var t=Ml.current;Ke(Ml),e._currentValue=t}function Md(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function mi(e,t){Ol=e,pf=ri=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ht=!0),e.firstContext=null)}function wr(e){var t=e._currentValue;if(pf!==e)if(e={context:e,memoizedValue:t,next:null},ri===null){if(Ol===null)throw Error(H(308));ri=e,Ol.dependencies={lanes:0,firstContext:e}}else ri=ri.next=e;return t}var gs=null;function yf(e){gs===null?gs=[e]:gs.push(e)}function $y(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,yf(t)):(r.next=s.next,s.next=r),t.interleaved=r,hn(e,n)}function hn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Tn=!1;function bf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ay(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ln(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Un(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Oe&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,hn(e,r)}return s=n.interleaved,s===null?(t.next=t,yf(n)):(t.next=s.next,s.next=t),n.interleaved=t,hn(e,r)}function al(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,nf(e,r)}}function Mp(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ll(e,t,r,n){var s=e.updateQueue;Tn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?i=u:a.next=u,a=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var h=s.baseState;a=0,d=u=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((n&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=e,b=l;switch(f=t,m=r,b.tag){case 1:if(v=b.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=b.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=tt({},h,f);break e;case 2:Tn=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=h):d=d.next=m,a|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do a|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);Cs|=a,e.lanes=a,e.memoizedState=h}}function Op(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(H(191,s));s.call(n)}}}var da={},Gr=Xn(da),Uo=Xn(da),Vo=Xn(da);function xs(e){if(e===da)throw Error(H(174));return e}function vf(e,t){switch(We(Vo,t),We(Uo,e),We(Gr,da),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pd(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=pd(t,e)}Ke(Gr),We(Gr,t)}function _i(){Ke(Gr),Ke(Uo),Ke(Vo)}function Ry(e){xs(Vo.current);var t=xs(Gr.current),r=pd(t,e.type);t!==r&&(We(Uo,e),We(Gr,r))}function wf(e){Uo.current===e&&(Ke(Gr),Ke(Uo))}var Qe=Xn(0);function Fl(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hu=[];function _f(){for(var e=0;e<hu.length;e++)hu[e]._workInProgressVersionPrimary=null;hu.length=0}var ll=yn.ReactCurrentDispatcher,fu=yn.ReactCurrentBatchConfig,Ss=0,et=null,pt=null,yt=null,Il=!1,go=!1,qo=0,F2=0;function Pt(){throw Error(H(321))}function jf(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Lr(e[r],t[r]))return!1;return!0}function kf(e,t,r,n,s,i){if(Ss=i,et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ll.current=e===null||e.memoizedState===null?U2:V2,e=r(n,s),go){i=0;do{if(go=!1,qo=0,25<=i)throw Error(H(301));i+=1,yt=pt=null,t.updateQueue=null,ll.current=q2,e=r(n,s)}while(go)}if(ll.current=Bl,t=pt!==null&&pt.next!==null,Ss=0,yt=pt=et=null,Il=!1,t)throw Error(H(300));return e}function Nf(){var e=qo!==0;return qo=0,e}function Vr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?et.memoizedState=yt=e:yt=yt.next=e,yt}function _r(){if(pt===null){var e=et.alternate;e=e!==null?e.memoizedState:null}else e=pt.next;var t=yt===null?et.memoizedState:yt.next;if(t!==null)yt=t,pt=e;else{if(e===null)throw Error(H(310));pt=e,e={memoizedState:pt.memoizedState,baseState:pt.baseState,baseQueue:pt.baseQueue,queue:pt.queue,next:null},yt===null?et.memoizedState=yt=e:yt=yt.next=e}return yt}function Wo(e,t){return typeof t=="function"?t(e):t}function mu(e){var t=_r(),r=t.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=e;var n=pt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,c=null,u=i;do{var d=u.lane;if((Ss&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=n):c=c.next=h,et.lanes|=d,Cs|=d}u=u.next}while(u!==null&&u!==i);c===null?a=n:c.next=l,Lr(n,t.memoizedState)||(Ht=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,et.lanes|=i,Cs|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function pu(e){var t=_r(),r=t.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=e(i,a.action),a=a.next;while(a!==s);Lr(i,t.memoizedState)||(Ht=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Dy(){}function My(e,t){var r=et,n=_r(),s=t(),i=!Lr(n.memoizedState,s);if(i&&(n.memoizedState=s,Ht=!0),n=n.queue,Sf(Fy.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||yt!==null&&yt.memoizedState.tag&1){if(r.flags|=2048,Ho(9,Ly.bind(null,r,n,s,t),void 0,null),wt===null)throw Error(H(349));Ss&30||Oy(r,t,s)}return s}function Oy(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=et.updateQueue,t===null?(t={lastEffect:null,stores:null},et.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ly(e,t,r,n){t.value=r,t.getSnapshot=n,Iy(t)&&By(e)}function Fy(e,t,r){return r(function(){Iy(t)&&By(e)})}function Iy(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Lr(e,r)}catch{return!0}}function By(e){var t=hn(e,1);t!==null&&Or(t,e,1,-1)}function Lp(e){var t=Vr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wo,lastRenderedState:e},t.queue=e,e=e.dispatch=z2.bind(null,et,e),[t.memoizedState,e]}function Ho(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=et.updateQueue,t===null?(t={lastEffect:null,stores:null},et.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function zy(){return _r().memoizedState}function cl(e,t,r,n){var s=Vr();et.flags|=e,s.memoizedState=Ho(1|t,r,void 0,n===void 0?null:n)}function vc(e,t,r,n){var s=_r();n=n===void 0?null:n;var i=void 0;if(pt!==null){var a=pt.memoizedState;if(i=a.destroy,n!==null&&jf(n,a.deps)){s.memoizedState=Ho(t,r,i,n);return}}et.flags|=e,s.memoizedState=Ho(1|t,r,i,n)}function Fp(e,t){return cl(8390656,8,e,t)}function Sf(e,t){return vc(2048,8,e,t)}function Uy(e,t){return vc(4,2,e,t)}function Vy(e,t){return vc(4,4,e,t)}function qy(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Wy(e,t,r){return r=r!=null?r.concat([e]):null,vc(4,4,qy.bind(null,t,e),r)}function Cf(){}function Hy(e,t){var r=_r();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&jf(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Ky(e,t){var r=_r();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&jf(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Gy(e,t,r){return Ss&21?(Lr(r,t)||(r=Zx(),et.lanes|=r,Cs|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ht=!0),e.memoizedState=r)}function I2(e,t){var r=Be;Be=r!==0&&4>r?r:4,e(!0);var n=fu.transition;fu.transition={};try{e(!1),t()}finally{Be=r,fu.transition=n}}function Yy(){return _r().memoizedState}function B2(e,t,r){var n=qn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Jy(e))Xy(t,r);else if(r=$y(e,t,r,n),r!==null){var s=Ft();Or(r,e,n,s),Qy(r,t,n)}}function z2(e,t,r){var n=qn(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Jy(e))Xy(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var a=t.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,Lr(l,a)){var c=t.interleaved;c===null?(s.next=s,yf(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=$y(e,t,s,n),r!==null&&(s=Ft(),Or(r,e,n,s),Qy(r,t,n))}}function Jy(e){var t=e.alternate;return e===et||t!==null&&t===et}function Xy(e,t){go=Il=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Qy(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,nf(e,r)}}var Bl={readContext:wr,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},U2={readContext:wr,useCallback:function(e,t){return Vr().memoizedState=[e,t===void 0?null:t],e},useContext:wr,useEffect:Fp,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,cl(4194308,4,qy.bind(null,t,e),r)},useLayoutEffect:function(e,t){return cl(4194308,4,e,t)},useInsertionEffect:function(e,t){return cl(4,2,e,t)},useMemo:function(e,t){var r=Vr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Vr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=B2.bind(null,et,e),[n.memoizedState,e]},useRef:function(e){var t=Vr();return e={current:e},t.memoizedState=e},useState:Lp,useDebugValue:Cf,useDeferredValue:function(e){return Vr().memoizedState=e},useTransition:function(){var e=Lp(!1),t=e[0];return e=I2.bind(null,e[1]),Vr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=et,s=Vr();if(Ye){if(r===void 0)throw Error(H(407));r=r()}else{if(r=t(),wt===null)throw Error(H(349));Ss&30||Oy(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,Fp(Fy.bind(null,n,i,e),[e]),n.flags|=2048,Ho(9,Ly.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Vr(),t=wt.identifierPrefix;if(Ye){var r=an,n=on;r=(n&~(1<<32-Mr(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=qo++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=F2++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},V2={readContext:wr,useCallback:Hy,useContext:wr,useEffect:Sf,useImperativeHandle:Wy,useInsertionEffect:Uy,useLayoutEffect:Vy,useMemo:Ky,useReducer:mu,useRef:zy,useState:function(){return mu(Wo)},useDebugValue:Cf,useDeferredValue:function(e){var t=_r();return Gy(t,pt.memoizedState,e)},useTransition:function(){var e=mu(Wo)[0],t=_r().memoizedState;return[e,t]},useMutableSource:Dy,useSyncExternalStore:My,useId:Yy,unstable_isNewReconciler:!1},q2={readContext:wr,useCallback:Hy,useContext:wr,useEffect:Sf,useImperativeHandle:Wy,useInsertionEffect:Uy,useLayoutEffect:Vy,useMemo:Ky,useReducer:pu,useRef:zy,useState:function(){return pu(Wo)},useDebugValue:Cf,useDeferredValue:function(e){var t=_r();return pt===null?t.memoizedState=e:Gy(t,pt.memoizedState,e)},useTransition:function(){var e=pu(Wo)[0],t=_r().memoizedState;return[e,t]},useMutableSource:Dy,useSyncExternalStore:My,useId:Yy,unstable_isNewReconciler:!1};function Pr(e,t){if(e&&e.defaultProps){t=tt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Od(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:tt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var wc={isMounted:function(e){return(e=e._reactInternals)?As(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ft(),s=qn(e),i=ln(n,s);i.payload=t,r!=null&&(i.callback=r),t=Un(e,i,s),t!==null&&(Or(t,e,s,n),al(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ft(),s=qn(e),i=ln(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Un(e,i,s),t!==null&&(Or(t,e,s,n),al(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ft(),n=qn(e),s=ln(r,n);s.tag=2,t!=null&&(s.callback=t),t=Un(e,s,n),t!==null&&(Or(t,e,n,r),al(t,e,n))}};function Ip(e,t,r,n,s,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!Fo(r,n)||!Fo(s,i):!0}function Zy(e,t,r){var n=!1,s=Kn,i=t.contextType;return typeof i=="object"&&i!==null?i=wr(i):(s=Yt(t)?ks:Dt.current,n=t.contextTypes,i=(n=n!=null)?bi(e,s):Kn),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=wc,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function Bp(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&wc.enqueueReplaceState(t,t.state,null)}function Ld(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},bf(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=wr(i):(i=Yt(t)?ks:Dt.current,s.context=bi(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(Od(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&wc.enqueueReplaceState(s,s.state,null),Ll(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ji(e,t){try{var r="",n=t;do r+=y1(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function gu(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Fd(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var W2=typeof WeakMap=="function"?WeakMap:Map;function eb(e,t,r){r=ln(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Ul||(Ul=!0,Gd=n),Fd(e,t)},r}function tb(e,t,r){r=ln(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Fd(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Fd(e,t),typeof n!="function"&&(Vn===null?Vn=new Set([this]):Vn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}function zp(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new W2;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=ij.bind(null,e,t,r),t.then(e,e))}function Up(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vp(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ln(-1,1),t.tag=2,Un(r,t,1))),r.lanes|=1),e)}var H2=yn.ReactCurrentOwner,Ht=!1;function Ot(e,t,r,n){t.child=e===null?Py(t,null,r,n):wi(t,e.child,r,n)}function qp(e,t,r,n,s){r=r.render;var i=t.ref;return mi(t,s),n=kf(e,t,r,n,i,s),r=Nf(),e!==null&&!Ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,fn(e,t,s)):(Ye&&r&&hf(t),t.flags|=1,Ot(e,t,n,s),t.child)}function Wp(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!Mf(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,rb(e,t,i,n,s)):(e=fl(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Fo,r(a,n)&&e.ref===t.ref)return fn(e,t,s)}return t.flags|=1,e=Wn(i,n),e.ref=t.ref,e.return=t,t.child=e}function rb(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Fo(i,n)&&e.ref===t.ref)if(Ht=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Ht=!0);else return t.lanes=e.lanes,fn(e,t,s)}return Id(e,t,r,n,s)}function nb(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(si,er),er|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,We(si,er),er|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,We(si,er),er|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,We(si,er),er|=n;return Ot(e,t,s,r),t.child}function sb(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Id(e,t,r,n,s){var i=Yt(r)?ks:Dt.current;return i=bi(t,i),mi(t,s),r=kf(e,t,r,n,i,s),n=Nf(),e!==null&&!Ht?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,fn(e,t,s)):(Ye&&n&&hf(t),t.flags|=1,Ot(e,t,r,s),t.child)}function Hp(e,t,r,n,s){if(Yt(r)){var i=!0;Al(t)}else i=!1;if(mi(t,s),t.stateNode===null)ul(e,t),Zy(t,r,n),Ld(t,r,n,s),n=!0;else if(e===null){var a=t.stateNode,l=t.memoizedProps;a.props=l;var c=a.context,u=r.contextType;typeof u=="object"&&u!==null?u=wr(u):(u=Yt(r)?ks:Dt.current,u=bi(t,u));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Bp(t,a,n,u),Tn=!1;var f=t.memoizedState;a.state=f,Ll(t,n,a,s),c=t.memoizedState,l!==n||f!==c||Gt.current||Tn?(typeof d=="function"&&(Od(t,r,d,n),c=t.memoizedState),(l=Tn||Ip(t,r,l,n,f,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=u,n=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,Ay(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Pr(t.type,l),a.props=u,h=t.pendingProps,f=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=wr(c):(c=Yt(r)?ks:Dt.current,c=bi(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Bp(t,a,n,c),Tn=!1,f=t.memoizedState,a.state=f,Ll(t,n,a,s);var v=t.memoizedState;l!==h||f!==v||Gt.current||Tn?(typeof m=="function"&&(Od(t,r,m,n),v=t.memoizedState),(u=Tn||Ip(t,r,u,n,f,v,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,v,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,v,c)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=v),a.props=n,a.state=v,a.context=c,n=u):(typeof a.componentDidUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),n=!1)}return Bd(e,t,r,n,i,s)}function Bd(e,t,r,n,s,i){sb(e,t);var a=(t.flags&128)!==0;if(!n&&!a)return s&&$p(t,r,!1),fn(e,t,i);n=t.stateNode,H2.current=t;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=wi(t,e.child,null,i),t.child=wi(t,null,l,i)):Ot(e,t,l,i),t.memoizedState=n.state,s&&$p(t,r,!0),t.child}function ib(e){var t=e.stateNode;t.pendingContext?Pp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pp(e,t.context,!1),vf(e,t.containerInfo)}function Kp(e,t,r,n,s){return vi(),mf(s),t.flags|=256,Ot(e,t,r,n),t.child}var zd={dehydrated:null,treeContext:null,retryLane:0};function Ud(e){return{baseLanes:e,cachePool:null,transitions:null}}function ob(e,t,r){var n=t.pendingProps,s=Qe.current,i=!1,a=(t.flags&128)!==0,l;if((l=a)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),We(Qe,s&1),e===null)return Dd(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=n.children,e=n.fallback,i?(n=t.mode,i=t.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=kc(a,n,0,null),e=ws(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Ud(r),t.memoizedState=zd,e):Ef(t,a));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return K2(e,t,a,n,l,s,r);if(i){i=n.fallback,a=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=Wn(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Wn(l,i):(i=ws(i,a,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,a=e.child.memoizedState,a=a===null?Ud(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=e.childLanes&~r,t.memoizedState=zd,n}return i=e.child,e=i.sibling,n=Wn(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ef(e,t){return t=kc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fa(e,t,r,n){return n!==null&&mf(n),wi(t,e.child,null,r),e=Ef(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function K2(e,t,r,n,s,i,a){if(r)return t.flags&256?(t.flags&=-257,n=gu(Error(H(422))),Fa(e,t,a,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=kc({mode:"visible",children:n.children},s,0,null),i=ws(i,s,a,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&wi(t,e.child,null,a),t.child.memoizedState=Ud(a),t.memoizedState=zd,i);if(!(t.mode&1))return Fa(e,t,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(H(419)),n=gu(i,n,void 0),Fa(e,t,a,n)}if(l=(a&e.childLanes)!==0,Ht||l){if(n=wt,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hn(e,s),Or(n,e,s,-1))}return Df(),n=gu(Error(H(421))),Fa(e,t,a,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=oj.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,tr=zn(s.nextSibling),rr=t,Ye=!0,Rr=null,e!==null&&(mr[pr++]=on,mr[pr++]=an,mr[pr++]=Ns,on=e.id,an=e.overflow,Ns=t),t=Ef(t,n.children),t.flags|=4096,t)}function Gp(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),Md(e.return,t,r)}function xu(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function ab(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(Ot(e,t,n.children,r),n=Qe.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gp(e,r,t);else if(e.tag===19)Gp(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(We(Qe,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&Fl(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),xu(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&Fl(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}xu(t,!0,r,null,i);break;case"together":xu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ul(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Cs|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(H(153));if(t.child!==null){for(e=t.child,r=Wn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Wn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function G2(e,t,r){switch(t.tag){case 3:ib(t),vi();break;case 5:Ry(t);break;case 1:Yt(t.type)&&Al(t);break;case 4:vf(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;We(Ml,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(We(Qe,Qe.current&1),t.flags|=128,null):r&t.child.childLanes?ob(e,t,r):(We(Qe,Qe.current&1),e=fn(e,t,r),e!==null?e.sibling:null);We(Qe,Qe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return ab(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),We(Qe,Qe.current),n)break;return null;case 22:case 23:return t.lanes=0,nb(e,t,r)}return fn(e,t,r)}var lb,Vd,cb,ub;lb=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Vd=function(){};cb=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,xs(Gr.current);var i=null;switch(r){case"input":s=dd(e,s),n=dd(e,n),i=[];break;case"select":s=tt({},s,{value:void 0}),n=tt({},n,{value:void 0}),i=[];break;case"textarea":s=md(e,s),n=md(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Pl)}gd(r,n);var a;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&($o.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&($o.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&He("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};ub=function(e,t,r,n){r!==n&&(t.flags|=4)};function Qi(e,t){if(!Ye)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function $t(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Y2(e,t,r){var n=t.pendingProps;switch(ff(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(t),null;case 1:return Yt(t.type)&&$l(),$t(t),null;case 3:return n=t.stateNode,_i(),Ke(Gt),Ke(Dt),_f(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Oa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Rr!==null&&(Xd(Rr),Rr=null))),Vd(e,t),$t(t),null;case 5:wf(t);var s=xs(Vo.current);if(r=t.type,e!==null&&t.stateNode!=null)cb(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(H(166));return $t(t),null}if(e=xs(Gr.current),Oa(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Wr]=t,n[zo]=i,e=(t.mode&1)!==0,r){case"dialog":He("cancel",n),He("close",n);break;case"iframe":case"object":case"embed":He("load",n);break;case"video":case"audio":for(s=0;s<ao.length;s++)He(ao[s],n);break;case"source":He("error",n);break;case"img":case"image":case"link":He("error",n),He("load",n);break;case"details":He("toggle",n);break;case"input":np(n,i),He("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},He("invalid",n);break;case"textarea":ip(n,i),He("invalid",n)}gd(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ma(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ma(n.textContent,l,e),s=["children",""+l]):$o.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&He("scroll",n)}switch(r){case"input":Ca(n),sp(n,i,!0);break;case"textarea":Ca(n),op(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Pl)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Fx(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[Wr]=t,e[zo]=n,lb(e,t,!1,!1),t.stateNode=e;e:{switch(a=xd(r,n),r){case"dialog":He("cancel",e),He("close",e),s=n;break;case"iframe":case"object":case"embed":He("load",e),s=n;break;case"video":case"audio":for(s=0;s<ao.length;s++)He(ao[s],e);s=n;break;case"source":He("error",e),s=n;break;case"img":case"image":case"link":He("error",e),He("load",e),s=n;break;case"details":He("toggle",e),s=n;break;case"input":np(e,n),s=dd(e,n),He("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=tt({},n,{value:void 0}),He("invalid",e);break;case"textarea":ip(e,n),s=md(e,n),He("invalid",e);break;default:s=n}gd(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?zx(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ix(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&Ao(e,c):typeof c=="number"&&Ao(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&($o.hasOwnProperty(i)?c!=null&&i==="onScroll"&&He("scroll",e):c!=null&&Xh(e,i,c,a))}switch(r){case"input":Ca(e),sp(e,n,!1);break;case"textarea":Ca(e),op(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Hn(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?ui(e,!!n.multiple,i,!1):n.defaultValue!=null&&ui(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Pl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $t(t),null;case 6:if(e&&t.stateNode!=null)ub(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(H(166));if(r=xs(Vo.current),xs(Gr.current),Oa(t)){if(n=t.stateNode,r=t.memoizedProps,n[Wr]=t,(i=n.nodeValue!==r)&&(e=rr,e!==null))switch(e.tag){case 3:Ma(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ma(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Wr]=t,t.stateNode=n}return $t(t),null;case 13:if(Ke(Qe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ye&&tr!==null&&t.mode&1&&!(t.flags&128))Ey(),vi(),t.flags|=98560,i=!1;else if(i=Oa(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(H(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(H(317));i[Wr]=t}else vi(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$t(t),i=!1}else Rr!==null&&(Xd(Rr),Rr=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Qe.current&1?xt===0&&(xt=3):Df())),t.updateQueue!==null&&(t.flags|=4),$t(t),null);case 4:return _i(),Vd(e,t),e===null&&Io(t.stateNode.containerInfo),$t(t),null;case 10:return xf(t.type._context),$t(t),null;case 17:return Yt(t.type)&&$l(),$t(t),null;case 19:if(Ke(Qe),i=t.memoizedState,i===null)return $t(t),null;if(n=(t.flags&128)!==0,a=i.rendering,a===null)if(n)Qi(i,!1);else{if(xt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Fl(e),a!==null){for(t.flags|=128,Qi(i,!1),n=a.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return We(Qe,Qe.current&1|2),t.child}e=e.sibling}i.tail!==null&&at()>ki&&(t.flags|=128,n=!0,Qi(i,!1),t.lanes=4194304)}else{if(!n)if(e=Fl(a),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Qi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ye)return $t(t),null}else 2*at()-i.renderingStartTime>ki&&r!==1073741824&&(t.flags|=128,n=!0,Qi(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(r=i.last,r!==null?r.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=at(),t.sibling=null,r=Qe.current,We(Qe,n?r&1|2:r&1),t):($t(t),null);case 22:case 23:return Rf(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?er&1073741824&&($t(t),t.subtreeFlags&6&&(t.flags|=8192)):$t(t),null;case 24:return null;case 25:return null}throw Error(H(156,t.tag))}function J2(e,t){switch(ff(t),t.tag){case 1:return Yt(t.type)&&$l(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _i(),Ke(Gt),Ke(Dt),_f(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wf(t),null;case 13:if(Ke(Qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(H(340));vi()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ke(Qe),null;case 4:return _i(),null;case 10:return xf(t.type._context),null;case 22:case 23:return Rf(),null;case 24:return null;default:return null}}var Ia=!1,At=!1,X2=typeof WeakSet=="function"?WeakSet:Set,oe=null;function ni(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){nt(e,t,n)}else r.current=null}function qd(e,t,r){try{r()}catch(n){nt(e,t,n)}}var Yp=!1;function Q2(e,t){if(Cd=Cl,e=py(),df(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(l=a+s),h!==i||n!==0&&h.nodeType!==3||(c=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===e)break t;if(f===r&&++u===s&&(l=a),f===i&&++d===n&&(c=a),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ed={focusedElem:e,selectionRange:r},Cl=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var b=v.memoizedProps,w=v.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?b:Pr(t.type,b),w);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var g=t.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(_){nt(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return v=Yp,Yp=!1,v}function xo(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&qd(t,r,i)}s=s.next}while(s!==n)}}function _c(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Wd(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function db(e){var t=e.alternate;t!==null&&(e.alternate=null,db(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Wr],delete t[zo],delete t[$d],delete t[D2],delete t[M2])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function hb(e){return e.tag===5||e.tag===3||e.tag===4}function Jp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||hb(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Pl));else if(n!==4&&(e=e.child,e!==null))for(Hd(e,t,r),e=e.sibling;e!==null;)Hd(e,t,r),e=e.sibling}function Kd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Kd(e,t,r),e=e.sibling;e!==null;)Kd(e,t,r),e=e.sibling}var jt=null,$r=!1;function _n(e,t,r){for(r=r.child;r!==null;)fb(e,t,r),r=r.sibling}function fb(e,t,r){if(Kr&&typeof Kr.onCommitFiberUnmount=="function")try{Kr.onCommitFiberUnmount(mc,r)}catch{}switch(r.tag){case 5:At||ni(r,t);case 6:var n=jt,s=$r;jt=null,_n(e,t,r),jt=n,$r=s,jt!==null&&($r?(e=jt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):jt.removeChild(r.stateNode));break;case 18:jt!==null&&($r?(e=jt,r=r.stateNode,e.nodeType===8?uu(e.parentNode,r):e.nodeType===1&&uu(e,r),Oo(e)):uu(jt,r.stateNode));break;case 4:n=jt,s=$r,jt=r.stateNode.containerInfo,$r=!0,_n(e,t,r),jt=n,$r=s;break;case 0:case 11:case 14:case 15:if(!At&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&qd(r,t,a),s=s.next}while(s!==n)}_n(e,t,r);break;case 1:if(!At&&(ni(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){nt(r,t,l)}_n(e,t,r);break;case 21:_n(e,t,r);break;case 22:r.mode&1?(At=(n=At)||r.memoizedState!==null,_n(e,t,r),At=n):_n(e,t,r);break;default:_n(e,t,r)}}function Xp(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new X2),t.forEach(function(n){var s=aj.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Cr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,a=t,l=a;e:for(;l!==null;){switch(l.tag){case 5:jt=l.stateNode,$r=!1;break e;case 3:jt=l.stateNode.containerInfo,$r=!0;break e;case 4:jt=l.stateNode.containerInfo,$r=!0;break e}l=l.return}if(jt===null)throw Error(H(160));fb(i,a,s),jt=null,$r=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){nt(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)mb(t,e),t=t.sibling}function mb(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Cr(t,e),Ur(e),n&4){try{xo(3,e,e.return),_c(3,e)}catch(b){nt(e,e.return,b)}try{xo(5,e,e.return)}catch(b){nt(e,e.return,b)}}break;case 1:Cr(t,e),Ur(e),n&512&&r!==null&&ni(r,r.return);break;case 5:if(Cr(t,e),Ur(e),n&512&&r!==null&&ni(r,r.return),e.flags&32){var s=e.stateNode;try{Ao(s,"")}catch(b){nt(e,e.return,b)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,a=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Ox(s,i),xd(l,a);var u=xd(l,i);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?zx(s,h):d==="dangerouslySetInnerHTML"?Ix(s,h):d==="children"?Ao(s,h):Xh(s,d,h,u)}switch(l){case"input":hd(s,i);break;case"textarea":Lx(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?ui(s,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?ui(s,!!i.multiple,i.defaultValue,!0):ui(s,!!i.multiple,i.multiple?[]:"",!1))}s[zo]=i}catch(b){nt(e,e.return,b)}}break;case 6:if(Cr(t,e),Ur(e),n&4){if(e.stateNode===null)throw Error(H(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(b){nt(e,e.return,b)}}break;case 3:if(Cr(t,e),Ur(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Oo(t.containerInfo)}catch(b){nt(e,e.return,b)}break;case 4:Cr(t,e),Ur(e);break;case 13:Cr(t,e),Ur(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||($f=at())),n&4&&Xp(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(At=(u=At)||d,Cr(t,e),At=u):Cr(t,e),Ur(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(oe=e,d=e.child;d!==null;){for(h=oe=d;oe!==null;){switch(f=oe,m=f.child,f.tag){case 0:case 11:case 14:case 15:xo(4,f,f.return);break;case 1:ni(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){n=f,r=f.return;try{t=n,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(b){nt(n,r,b)}}break;case 5:ni(f,f.return);break;case 22:if(f.memoizedState!==null){Zp(h);continue}}m!==null?(m.return=f,oe=m):Zp(h)}d=d.sibling}e:for(d=null,h=e;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Bx("display",a))}catch(b){nt(e,e.return,b)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(b){nt(e,e.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Cr(t,e),Ur(e),n&4&&Xp(e);break;case 21:break;default:Cr(t,e),Ur(e)}}function Ur(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(hb(r)){var n=r;break e}r=r.return}throw Error(H(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ao(s,""),n.flags&=-33);var i=Jp(e);Kd(e,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=Jp(e);Hd(e,l,a);break;default:throw Error(H(161))}}catch(c){nt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Z2(e,t,r){oe=e,pb(e)}function pb(e,t,r){for(var n=(e.mode&1)!==0;oe!==null;){var s=oe,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||Ia;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||At;l=Ia;var u=At;if(Ia=a,(At=c)&&!u)for(oe=s;oe!==null;)a=oe,c=a.child,a.tag===22&&a.memoizedState!==null?e0(s):c!==null?(c.return=a,oe=c):e0(s);for(;i!==null;)oe=i,pb(i),i=i.sibling;oe=s,Ia=l,At=u}Qp(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,oe=i):Qp(e)}}function Qp(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:At||_c(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!At)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Pr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Op(t,i,n);break;case 3:var a=t.updateQueue;if(a!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Op(t,a,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Oo(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}At||t.flags&512&&Wd(t)}catch(f){nt(t,t.return,f)}}if(t===e){oe=null;break}if(r=t.sibling,r!==null){r.return=t.return,oe=r;break}oe=t.return}}function Zp(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,oe=r;break}oe=t.return}}function e0(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{_c(4,t)}catch(c){nt(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){nt(t,s,c)}}var i=t.return;try{Wd(t)}catch(c){nt(t,i,c)}break;case 5:var a=t.return;try{Wd(t)}catch(c){nt(t,a,c)}}}catch(c){nt(t,t.return,c)}if(t===e){oe=null;break}var l=t.sibling;if(l!==null){l.return=t.return,oe=l;break}oe=t.return}}var ej=Math.ceil,zl=yn.ReactCurrentDispatcher,Tf=yn.ReactCurrentOwner,yr=yn.ReactCurrentBatchConfig,Oe=0,wt=null,ut=null,Nt=0,er=0,si=Xn(0),xt=0,Ko=null,Cs=0,jc=0,Pf=0,yo=null,Vt=null,$f=0,ki=1/0,rn=null,Ul=!1,Gd=null,Vn=null,Ba=!1,Mn=null,Vl=0,bo=0,Yd=null,dl=-1,hl=0;function Ft(){return Oe&6?at():dl!==-1?dl:dl=at()}function qn(e){return e.mode&1?Oe&2&&Nt!==0?Nt&-Nt:L2.transition!==null?(hl===0&&(hl=Zx()),hl):(e=Be,e!==0||(e=window.event,e=e===void 0?16:oy(e.type)),e):1}function Or(e,t,r,n){if(50<bo)throw bo=0,Yd=null,Error(H(185));la(e,r,n),(!(Oe&2)||e!==wt)&&(e===wt&&(!(Oe&2)&&(jc|=r),xt===4&&An(e,Nt)),Jt(e,n),r===1&&Oe===0&&!(t.mode&1)&&(ki=at()+500,bc&&Qn()))}function Jt(e,t){var r=e.callbackNode;L1(e,t);var n=Sl(e,e===wt?Nt:0);if(n===0)r!==null&&cp(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&cp(r),t===1)e.tag===0?O2(t0.bind(null,e)):Ny(t0.bind(null,e)),A2(function(){!(Oe&6)&&Qn()}),r=null;else{switch(ey(n)){case 1:r=rf;break;case 4:r=Xx;break;case 16:r=Nl;break;case 536870912:r=Qx;break;default:r=Nl}r=jb(r,gb.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function gb(e,t){if(dl=-1,hl=0,Oe&6)throw Error(H(327));var r=e.callbackNode;if(pi()&&e.callbackNode!==r)return null;var n=Sl(e,e===wt?Nt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ql(e,n);else{t=n;var s=Oe;Oe|=2;var i=yb();(wt!==e||Nt!==t)&&(rn=null,ki=at()+500,vs(e,t));do try{nj();break}catch(l){xb(e,l)}while(!0);gf(),zl.current=i,Oe=s,ut!==null?t=0:(wt=null,Nt=0,t=xt)}if(t!==0){if(t===2&&(s=_d(e),s!==0&&(n=s,t=Jd(e,s))),t===1)throw r=Ko,vs(e,0),An(e,n),Jt(e,at()),r;if(t===6)An(e,n);else{if(s=e.current.alternate,!(n&30)&&!tj(s)&&(t=ql(e,n),t===2&&(i=_d(e),i!==0&&(n=i,t=Jd(e,i))),t===1))throw r=Ko,vs(e,0),An(e,n),Jt(e,at()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(H(345));case 2:ds(e,Vt,rn);break;case 3:if(An(e,n),(n&130023424)===n&&(t=$f+500-at(),10<t)){if(Sl(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Ft(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Pd(ds.bind(null,e,Vt,rn),t);break}ds(e,Vt,rn);break;case 4:if(An(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var a=31-Mr(n);i=1<<a,a=t[a],a>s&&(s=a),n&=~i}if(n=s,n=at()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ej(n/1960))-n,10<n){e.timeoutHandle=Pd(ds.bind(null,e,Vt,rn),n);break}ds(e,Vt,rn);break;case 5:ds(e,Vt,rn);break;default:throw Error(H(329))}}}return Jt(e,at()),e.callbackNode===r?gb.bind(null,e):null}function Jd(e,t){var r=yo;return e.current.memoizedState.isDehydrated&&(vs(e,t).flags|=256),e=ql(e,t),e!==2&&(t=Vt,Vt=r,t!==null&&Xd(t)),e}function Xd(e){Vt===null?Vt=e:Vt.push.apply(Vt,e)}function tj(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Lr(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function An(e,t){for(t&=~Pf,t&=~jc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Mr(t),n=1<<r;e[r]=-1,t&=~n}}function t0(e){if(Oe&6)throw Error(H(327));pi();var t=Sl(e,0);if(!(t&1))return Jt(e,at()),null;var r=ql(e,t);if(e.tag!==0&&r===2){var n=_d(e);n!==0&&(t=n,r=Jd(e,n))}if(r===1)throw r=Ko,vs(e,0),An(e,t),Jt(e,at()),r;if(r===6)throw Error(H(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ds(e,Vt,rn),Jt(e,at()),null}function Af(e,t){var r=Oe;Oe|=1;try{return e(t)}finally{Oe=r,Oe===0&&(ki=at()+500,bc&&Qn())}}function Es(e){Mn!==null&&Mn.tag===0&&!(Oe&6)&&pi();var t=Oe;Oe|=1;var r=yr.transition,n=Be;try{if(yr.transition=null,Be=1,e)return e()}finally{Be=n,yr.transition=r,Oe=t,!(Oe&6)&&Qn()}}function Rf(){er=si.current,Ke(si)}function vs(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,$2(r)),ut!==null)for(r=ut.return;r!==null;){var n=r;switch(ff(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&$l();break;case 3:_i(),Ke(Gt),Ke(Dt),_f();break;case 5:wf(n);break;case 4:_i();break;case 13:Ke(Qe);break;case 19:Ke(Qe);break;case 10:xf(n.type._context);break;case 22:case 23:Rf()}r=r.return}if(wt=e,ut=e=Wn(e.current,null),Nt=er=t,xt=0,Ko=null,Pf=jc=Cs=0,Vt=yo=null,gs!==null){for(t=0;t<gs.length;t++)if(r=gs[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}gs=null}return e}function xb(e,t){do{var r=ut;try{if(gf(),ll.current=Bl,Il){for(var n=et.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Il=!1}if(Ss=0,yt=pt=et=null,go=!1,qo=0,Tf.current=null,r===null||r.return===null){xt=1,Ko=t,ut=null;break}e:{var i=e,a=r.return,l=r,c=t;if(t=Nt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Up(a);if(m!==null){m.flags&=-257,Vp(m,a,l,i,t),m.mode&1&&zp(i,u,t),t=m,c=u;var v=t.updateQueue;if(v===null){var b=new Set;b.add(c),t.updateQueue=b}else v.add(c);break e}else{if(!(t&1)){zp(i,u,t),Df();break e}c=Error(H(426))}}else if(Ye&&l.mode&1){var w=Up(a);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Vp(w,a,l,i,t),mf(ji(c,l));break e}}i=c=ji(c,l),xt!==4&&(xt=2),yo===null?yo=[i]:yo.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var y=eb(i,c,t);Mp(i,y);break e;case 1:l=c;var x=i.type,g=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Vn===null||!Vn.has(g)))){i.flags|=65536,t&=-t,i.lanes|=t;var _=tb(i,l,t);Mp(i,_);break e}}i=i.return}while(i!==null)}vb(r)}catch(k){t=k,ut===r&&r!==null&&(ut=r=r.return);continue}break}while(!0)}function yb(){var e=zl.current;return zl.current=Bl,e===null?Bl:e}function Df(){(xt===0||xt===3||xt===2)&&(xt=4),wt===null||!(Cs&268435455)&&!(jc&268435455)||An(wt,Nt)}function ql(e,t){var r=Oe;Oe|=2;var n=yb();(wt!==e||Nt!==t)&&(rn=null,vs(e,t));do try{rj();break}catch(s){xb(e,s)}while(!0);if(gf(),Oe=r,zl.current=n,ut!==null)throw Error(H(261));return wt=null,Nt=0,xt}function rj(){for(;ut!==null;)bb(ut)}function nj(){for(;ut!==null&&!E1();)bb(ut)}function bb(e){var t=_b(e.alternate,e,er);e.memoizedProps=e.pendingProps,t===null?vb(e):ut=t,Tf.current=null}function vb(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=J2(r,t),r!==null){r.flags&=32767,ut=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{xt=6,ut=null;return}}else if(r=Y2(r,t,er),r!==null){ut=r;return}if(t=t.sibling,t!==null){ut=t;return}ut=t=e}while(t!==null);xt===0&&(xt=5)}function ds(e,t,r){var n=Be,s=yr.transition;try{yr.transition=null,Be=1,sj(e,t,r,n)}finally{yr.transition=s,Be=n}return null}function sj(e,t,r,n){do pi();while(Mn!==null);if(Oe&6)throw Error(H(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(H(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(F1(e,i),e===wt&&(ut=wt=null,Nt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ba||(Ba=!0,jb(Nl,function(){return pi(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=yr.transition,yr.transition=null;var a=Be;Be=1;var l=Oe;Oe|=4,Tf.current=null,Q2(e,r),mb(r,e),k2(Ed),Cl=!!Cd,Ed=Cd=null,e.current=r,Z2(r),T1(),Oe=l,Be=a,yr.transition=i}else e.current=r;if(Ba&&(Ba=!1,Mn=e,Vl=s),i=e.pendingLanes,i===0&&(Vn=null),A1(r.stateNode),Jt(e,at()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Ul)throw Ul=!1,e=Gd,Gd=null,e;return Vl&1&&e.tag!==0&&pi(),i=e.pendingLanes,i&1?e===Yd?bo++:(bo=0,Yd=e):bo=0,Qn(),null}function pi(){if(Mn!==null){var e=ey(Vl),t=yr.transition,r=Be;try{if(yr.transition=null,Be=16>e?16:e,Mn===null)var n=!1;else{if(e=Mn,Mn=null,Vl=0,Oe&6)throw Error(H(331));var s=Oe;for(Oe|=4,oe=e.current;oe!==null;){var i=oe,a=i.child;if(oe.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(oe=u;oe!==null;){var d=oe;switch(d.tag){case 0:case 11:case 15:xo(8,d,i)}var h=d.child;if(h!==null)h.return=d,oe=h;else for(;oe!==null;){d=oe;var f=d.sibling,m=d.return;if(db(d),d===u){oe=null;break}if(f!==null){f.return=m,oe=f;break}oe=m}}}var v=i.alternate;if(v!==null){var b=v.child;if(b!==null){v.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}oe=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,oe=a;else e:for(;oe!==null;){if(i=oe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xo(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,oe=y;break e}oe=i.return}}var x=e.current;for(oe=x;oe!==null;){a=oe;var g=a.child;if(a.subtreeFlags&2064&&g!==null)g.return=a,oe=g;else e:for(a=x;oe!==null;){if(l=oe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_c(9,l)}}catch(k){nt(l,l.return,k)}if(l===a){oe=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,oe=_;break e}oe=l.return}}if(Oe=s,Qn(),Kr&&typeof Kr.onPostCommitFiberRoot=="function")try{Kr.onPostCommitFiberRoot(mc,e)}catch{}n=!0}return n}finally{Be=r,yr.transition=t}}return!1}function r0(e,t,r){t=ji(r,t),t=eb(e,t,1),e=Un(e,t,1),t=Ft(),e!==null&&(la(e,1,t),Jt(e,t))}function nt(e,t,r){if(e.tag===3)r0(e,e,r);else for(;t!==null;){if(t.tag===3){r0(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Vn===null||!Vn.has(n))){e=ji(r,e),e=tb(t,e,1),t=Un(t,e,1),e=Ft(),t!==null&&(la(t,1,e),Jt(t,e));break}}t=t.return}}function ij(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ft(),e.pingedLanes|=e.suspendedLanes&r,wt===e&&(Nt&r)===r&&(xt===4||xt===3&&(Nt&130023424)===Nt&&500>at()-$f?vs(e,0):Pf|=r),Jt(e,t)}function wb(e,t){t===0&&(e.mode&1?(t=Pa,Pa<<=1,!(Pa&130023424)&&(Pa=4194304)):t=1);var r=Ft();e=hn(e,t),e!==null&&(la(e,t,r),Jt(e,r))}function oj(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),wb(e,r)}function aj(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(H(314))}n!==null&&n.delete(t),wb(e,r)}var _b;_b=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Gt.current)Ht=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ht=!1,G2(e,t,r);Ht=!!(e.flags&131072)}else Ht=!1,Ye&&t.flags&1048576&&Sy(t,Dl,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;ul(e,t),e=t.pendingProps;var s=bi(t,Dt.current);mi(t,r),s=kf(null,t,n,e,s,r);var i=Nf();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Yt(n)?(i=!0,Al(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,bf(t),s.updater=wc,t.stateNode=s,s._reactInternals=t,Ld(t,n,e,r),t=Bd(null,t,n,!0,i,r)):(t.tag=0,Ye&&i&&hf(t),Ot(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(ul(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=cj(n),e=Pr(n,e),s){case 0:t=Id(null,t,n,e,r);break e;case 1:t=Hp(null,t,n,e,r);break e;case 11:t=qp(null,t,n,e,r);break e;case 14:t=Wp(null,t,n,Pr(n.type,e),r);break e}throw Error(H(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Pr(n,s),Id(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Pr(n,s),Hp(e,t,n,s,r);case 3:e:{if(ib(t),e===null)throw Error(H(387));n=t.pendingProps,i=t.memoizedState,s=i.element,Ay(e,t),Ll(t,n,null,r);var a=t.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ji(Error(H(423)),t),t=Kp(e,t,n,r,s);break e}else if(n!==s){s=ji(Error(H(424)),t),t=Kp(e,t,n,r,s);break e}else for(tr=zn(t.stateNode.containerInfo.firstChild),rr=t,Ye=!0,Rr=null,r=Py(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(vi(),n===s){t=fn(e,t,r);break e}Ot(e,t,n,r)}t=t.child}return t;case 5:return Ry(t),e===null&&Dd(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,a=s.children,Td(n,s)?a=null:i!==null&&Td(n,i)&&(t.flags|=32),sb(e,t),Ot(e,t,a,r),t.child;case 6:return e===null&&Dd(t),null;case 13:return ob(e,t,r);case 4:return vf(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=wi(t,null,n,r):Ot(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Pr(n,s),qp(e,t,n,s,r);case 7:return Ot(e,t,t.pendingProps,r),t.child;case 8:return Ot(e,t,t.pendingProps.children,r),t.child;case 12:return Ot(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,a=s.value,We(Ml,n._currentValue),n._currentValue=a,i!==null)if(Lr(i.value,a)){if(i.children===s.children&&!Gt.current){t=fn(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=ln(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Md(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===t.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(H(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Md(a,r,t),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===t){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ot(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,mi(t,r),s=wr(s),n=n(s),t.flags|=1,Ot(e,t,n,r),t.child;case 14:return n=t.type,s=Pr(n,t.pendingProps),s=Pr(n.type,s),Wp(e,t,n,s,r);case 15:return rb(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Pr(n,s),ul(e,t),t.tag=1,Yt(n)?(e=!0,Al(t)):e=!1,mi(t,r),Zy(t,n,s),Ld(t,n,s,r),Bd(null,t,n,!0,e,r);case 19:return ab(e,t,r);case 22:return nb(e,t,r)}throw Error(H(156,t.tag))};function jb(e,t){return Jx(e,t)}function lj(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(e,t,r,n){return new lj(e,t,r,n)}function Mf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cj(e){if(typeof e=="function")return Mf(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zh)return 11;if(e===ef)return 14}return 2}function Wn(e,t){var r=e.alternate;return r===null?(r=gr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function fl(e,t,r,n,s,i){var a=2;if(n=e,typeof e=="function")Mf(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case Gs:return ws(r.children,s,i,t);case Qh:a=8,s|=8;break;case ad:return e=gr(12,r,t,s|2),e.elementType=ad,e.lanes=i,e;case ld:return e=gr(13,r,t,s),e.elementType=ld,e.lanes=i,e;case cd:return e=gr(19,r,t,s),e.elementType=cd,e.lanes=i,e;case Rx:return kc(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $x:a=10;break e;case Ax:a=9;break e;case Zh:a=11;break e;case ef:a=14;break e;case En:a=16,n=null;break e}throw Error(H(130,e==null?e:typeof e,""))}return t=gr(a,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function ws(e,t,r,n){return e=gr(7,e,n,t),e.lanes=r,e}function kc(e,t,r,n){return e=gr(22,e,n,t),e.elementType=Rx,e.lanes=r,e.stateNode={isHidden:!1},e}function yu(e,t,r){return e=gr(6,e,null,t),e.lanes=r,e}function bu(e,t,r){return t=gr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function uj(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zc(0),this.expirationTimes=Zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Of(e,t,r,n,s,i,a,l,c){return e=new uj(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=gr(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},bf(i),e}function dj(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ks,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function kb(e){if(!e)return Kn;e=e._reactInternals;e:{if(As(e)!==e||e.tag!==1)throw Error(H(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Yt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(H(171))}if(e.tag===1){var r=e.type;if(Yt(r))return ky(e,r,t)}return t}function Nb(e,t,r,n,s,i,a,l,c){return e=Of(r,n,!0,e,s,i,a,l,c),e.context=kb(null),r=e.current,n=Ft(),s=qn(r),i=ln(n,s),i.callback=t??null,Un(r,i,s),e.current.lanes=s,la(e,s,n),Jt(e,n),e}function Nc(e,t,r,n){var s=t.current,i=Ft(),a=qn(s);return r=kb(r),t.context===null?t.context=r:t.pendingContext=r,t=ln(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Un(s,t,a),e!==null&&(Or(e,s,a,i),al(e,s,a)),a}function Wl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function n0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Lf(e,t){n0(e,t),(e=e.alternate)&&n0(e,t)}function hj(){return null}var Sb=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ff(e){this._internalRoot=e}Sc.prototype.render=Ff.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(H(409));Nc(e,t,null,null)};Sc.prototype.unmount=Ff.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Es(function(){Nc(null,e,null,null)}),t[dn]=null}};function Sc(e){this._internalRoot=e}Sc.prototype.unstable_scheduleHydration=function(e){if(e){var t=ny();e={blockedOn:null,target:e,priority:t};for(var r=0;r<$n.length&&t!==0&&t<$n[r].priority;r++);$n.splice(r,0,e),r===0&&iy(e)}};function If(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Cc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function s0(){}function fj(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Wl(a);i.call(u)}}var a=Nb(t,n,e,0,null,!1,!1,"",s0);return e._reactRootContainer=a,e[dn]=a.current,Io(e.nodeType===8?e.parentNode:e),Es(),a}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Wl(c);l.call(u)}}var c=Of(e,0,!1,null,null,!1,!1,"",s0);return e._reactRootContainer=c,e[dn]=c.current,Io(e.nodeType===8?e.parentNode:e),Es(function(){Nc(t,c,r,n)}),c}function Ec(e,t,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Wl(a);l.call(c)}}Nc(t,a,e,s)}else a=fj(r,t,e,s,n);return Wl(a)}ty=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=oo(t.pendingLanes);r!==0&&(nf(t,r|1),Jt(t,at()),!(Oe&6)&&(ki=at()+500,Qn()))}break;case 13:Es(function(){var n=hn(e,1);if(n!==null){var s=Ft();Or(n,e,1,s)}}),Lf(e,1)}};sf=function(e){if(e.tag===13){var t=hn(e,134217728);if(t!==null){var r=Ft();Or(t,e,134217728,r)}Lf(e,134217728)}};ry=function(e){if(e.tag===13){var t=qn(e),r=hn(e,t);if(r!==null){var n=Ft();Or(r,e,t,n)}Lf(e,t)}};ny=function(){return Be};sy=function(e,t){var r=Be;try{return Be=e,t()}finally{Be=r}};bd=function(e,t,r){switch(t){case"input":if(hd(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=yc(n);if(!s)throw Error(H(90));Mx(n),hd(n,s)}}}break;case"textarea":Lx(e,r);break;case"select":t=r.value,t!=null&&ui(e,!!r.multiple,t,!1)}};qx=Af;Wx=Es;var mj={usingClientEntryPoint:!1,Events:[ua,Qs,yc,Ux,Vx,Af]},Zi={findFiberByHostInstance:ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pj={bundleType:Zi.bundleType,version:Zi.version,rendererPackageName:Zi.rendererPackageName,rendererConfig:Zi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Gx(e),e===null?null:e.stateNode},findFiberByHostInstance:Zi.findFiberByHostInstance||hj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var za=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!za.isDisabled&&za.supportsFiber)try{mc=za.inject(pj),Kr=za}catch{}}ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mj;ir.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!If(t))throw Error(H(200));return dj(e,t,null,r)};ir.createRoot=function(e,t){if(!If(e))throw Error(H(299));var r=!1,n="",s=Sb;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Of(e,1,!1,null,null,r,!1,n,s),e[dn]=t.current,Io(e.nodeType===8?e.parentNode:e),new Ff(t)};ir.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(H(188)):(e=Object.keys(e).join(","),Error(H(268,e)));return e=Gx(t),e=e===null?null:e.stateNode,e};ir.flushSync=function(e){return Es(e)};ir.hydrate=function(e,t,r){if(!Cc(t))throw Error(H(200));return Ec(null,e,t,!0,r)};ir.hydrateRoot=function(e,t,r){if(!If(e))throw Error(H(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=Sb;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),t=Nb(t,null,e,1,r??null,s,!1,i,a),e[dn]=t.current,Io(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new Sc(t)};ir.render=function(e,t,r){if(!Cc(t))throw Error(H(200));return Ec(null,e,t,!1,r)};ir.unmountComponentAtNode=function(e){if(!Cc(e))throw Error(H(40));return e._reactRootContainer?(Es(function(){Ec(null,null,e,!1,function(){e._reactRootContainer=null,e[dn]=null})}),!0):!1};ir.unstable_batchedUpdates=Af;ir.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Cc(r))throw Error(H(200));if(e==null||e._reactInternals===void 0)throw Error(H(38));return Ec(e,t,r,!1,n)};ir.version="18.3.1-next-f1338f8080-20240426";function Cb(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cb)}catch(e){console.error(e)}}Cb(),Cx.exports=ir;var Hr=Cx.exports,Eb,i0=Hr;Eb=i0.createRoot,i0.hydrateRoot;/**
 * react-router v7.8.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var o0="popstate";function gj(e={}){function t(n,s){let{pathname:i,search:a,hash:l}=n.location;return Qd("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Go(s)}return yj(t,r,null,e)}function Xe(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Fr(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function xj(){return Math.random().toString(36).substring(2,10)}function a0(e,t){return{usr:e.state,key:e.key,idx:t}}function Qd(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?$i(t):t,state:r,key:t&&t.key||n||xj()}}function Go({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function $i(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function yj(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,l="POP",c=null,u=d();u==null&&(u=0,a.replaceState({...a.state,idx:u},""));function d(){return(a.state||{idx:null}).idx}function h(){l="POP";let w=d(),y=w==null?null:w-u;u=w,c&&c({action:l,location:b.location,delta:y})}function f(w,y){l="PUSH";let x=Qd(b.location,w,y);u=d()+1;let g=a0(x,u),_=b.createHref(x);try{a.pushState(g,"",_)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;s.location.assign(_)}i&&c&&c({action:l,location:b.location,delta:1})}function m(w,y){l="REPLACE";let x=Qd(b.location,w,y);u=d();let g=a0(x,u),_=b.createHref(x);a.replaceState(g,"",_),i&&c&&c({action:l,location:b.location,delta:0})}function v(w){return bj(w)}let b={get action(){return l},get location(){return e(s,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(o0,h),c=w,()=>{s.removeEventListener(o0,h),c=null}},createHref(w){return t(s,w)},createURL:v,encodeLocation(w){let y=v(w);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:m,go(w){return a.go(w)}};return b}function bj(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Xe(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Go(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function Tb(e,t,r="/"){return vj(e,t,r,!1)}function vj(e,t,r,n){let s=typeof t=="string"?$i(t):t,i=mn(s.pathname||"/",r);if(i==null)return null;let a=Pb(e);wj(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let u=Aj(i);l=Pj(a[c],u,n)}return l}function Pb(e,t=[],r=[],n="",s=!1){let i=(a,l,c=s,u)=>{let d={relativePath:u===void 0?a.path||"":u,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&c)return;Xe(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let h=cn([n,d.relativePath]),f=r.concat(d);a.children&&a.children.length>0&&(Xe(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),Pb(a.children,t,f,h,c)),!(a.path==null&&!a.index)&&t.push({path:h,score:Ej(h,a.index),routesMeta:f})};return e.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,l);else for(let u of $b(a.path))i(a,l,!0,u)}),t}function $b(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=$b(n.join("/")),l=[];return l.push(...a.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...a),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function wj(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Tj(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var _j=/^:[\w-]+$/,jj=3,kj=2,Nj=1,Sj=10,Cj=-2,l0=e=>e==="*";function Ej(e,t){let r=e.split("/"),n=r.length;return r.some(l0)&&(n+=Cj),t&&(n+=kj),r.filter(s=>!l0(s)).reduce((s,i)=>s+(_j.test(i)?jj:i===""?Nj:Sj),n)}function Tj(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function Pj(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",a=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",h=Hl({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),f=c.route;if(!h&&u&&r&&!n[n.length-1].route.index&&(h=Hl({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),a.push({params:s,pathname:cn([i,h.pathname]),pathnameBase:Oj(cn([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=cn([i,h.pathnameBase]))}return a}function Hl(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=$j(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:h},f)=>{if(d==="*"){let v=l[f]||"";a=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const m=l[f];return h&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:a,pattern:e}}function $j(e,t=!1,r=!0){Fr(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function Aj(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Fr(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function mn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function Rj(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?$i(e):e;return{pathname:r?r.startsWith("/")?r:Dj(r,t):t,search:Lj(n),hash:Fj(s)}}function Dj(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function vu(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Mj(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Bf(e){let t=Mj(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function zf(e,t,r,n=!1){let s;typeof e=="string"?s=$i(e):(s={...e},Xe(!s.pathname||!s.pathname.includes("?"),vu("?","pathname","search",s)),Xe(!s.pathname||!s.pathname.includes("#"),vu("#","pathname","hash",s)),Xe(!s.search||!s.search.includes("#"),vu("#","search","hash",s)));let i=e===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=r;else{let h=t.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?t[h]:"/"}let c=Rj(s,l),u=a&&a!=="/"&&a.endsWith("/"),d=(i||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var cn=e=>e.join("/").replace(/\/\/+/g,"/"),Oj=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Lj=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Fj=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Ij(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Ab=["POST","PUT","PATCH","DELETE"];new Set(Ab);var Bj=["GET",...Ab];new Set(Bj);var Ai=p.createContext(null);Ai.displayName="DataRouter";var Tc=p.createContext(null);Tc.displayName="DataRouterState";p.createContext(!1);var Rb=p.createContext({isTransitioning:!1});Rb.displayName="ViewTransition";var zj=p.createContext(new Map);zj.displayName="Fetchers";var Uj=p.createContext(null);Uj.displayName="Await";var Br=p.createContext(null);Br.displayName="Navigation";var ha=p.createContext(null);ha.displayName="Location";var jr=p.createContext({outlet:null,matches:[],isDataRoute:!1});jr.displayName="Route";var Uf=p.createContext(null);Uf.displayName="RouteError";function Vj(e,{relative:t}={}){Xe(Ri(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=p.useContext(Br),{hash:s,pathname:i,search:a}=fa(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:cn([r,i])),n.createHref({pathname:l,search:a,hash:s})}function Ri(){return p.useContext(ha)!=null}function bn(){return Xe(Ri(),"useLocation() may be used only in the context of a <Router> component."),p.useContext(ha).location}var Db="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Mb(e){p.useContext(Br).static||p.useLayoutEffect(e)}function Zn(){let{isDataRoute:e}=p.useContext(jr);return e?sk():qj()}function qj(){Xe(Ri(),"useNavigate() may be used only in the context of a <Router> component.");let e=p.useContext(Ai),{basename:t,navigator:r}=p.useContext(Br),{matches:n}=p.useContext(jr),{pathname:s}=bn(),i=JSON.stringify(Bf(n)),a=p.useRef(!1);return Mb(()=>{a.current=!0}),p.useCallback((c,u={})=>{if(Fr(a.current,Db),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=zf(c,JSON.parse(i),s,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:cn([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,i,s,e])}var Wj=p.createContext(null);function Hj(e){let t=p.useContext(jr).outlet;return t&&p.createElement(Wj.Provider,{value:e},t)}function Pc(){let{matches:e}=p.useContext(jr),t=e[e.length-1];return t?t.params:{}}function fa(e,{relative:t}={}){let{matches:r}=p.useContext(jr),{pathname:n}=bn(),s=JSON.stringify(Bf(r));return p.useMemo(()=>zf(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function Kj(e,t){return Ob(e,t)}function Ob(e,t,r,n){var y;Xe(Ri(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=p.useContext(Br),{matches:i}=p.useContext(jr),a=i[i.length-1],l=a?a.params:{},c=a?a.pathname:"/",u=a?a.pathnameBase:"/",d=a&&a.route;{let x=d&&d.path||"";Lb(c,!d||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let h=bn(),f;if(t){let x=typeof t=="string"?$i(t):t;Xe(u==="/"||((y=x.pathname)==null?void 0:y.startsWith(u)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${x.pathname}" was given in the \`location\` prop.`),f=x}else f=h;let m=f.pathname||"/",v=m;if(u!=="/"){let x=u.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(x.length).join("/")}let b=Tb(e,{pathname:v});Fr(d||b!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),Fr(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=Qj(b&&b.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:cn([u,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?u:cn([u,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,r,n);return t&&w?p.createElement(ha.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},w):w}function Gj(){let e=nk(),t=Ij(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},a=null;return console.error("Error handled by React Router default ErrorBoundary:",e),a=p.createElement(p.Fragment,null,p.createElement("p",null," Hey developer "),p.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",p.createElement("code",{style:i},"ErrorBoundary")," or"," ",p.createElement("code",{style:i},"errorElement")," prop on your route.")),p.createElement(p.Fragment,null,p.createElement("h2",null,"Unexpected Application Error!"),p.createElement("h3",{style:{fontStyle:"italic"}},t),r?p.createElement("pre",{style:s},r):null,a)}var Yj=p.createElement(Gj,null),Jj=class extends p.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?p.createElement(jr.Provider,{value:this.props.routeContext},p.createElement(Uf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Xj({routeContext:e,match:t,children:r}){let n=p.useContext(Ai);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),p.createElement(jr.Provider,{value:e},r)}function Qj(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,i=r==null?void 0:r.errors;if(i!=null){let c=s.findIndex(u=>u.route.id&&(i==null?void 0:i[u.route.id])!==void 0);Xe(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let a=!1,l=-1;if(r)for(let c=0;c<s.length;c++){let u=s[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:h}=r,f=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||f){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,u,d)=>{let h,f=!1,m=null,v=null;r&&(h=i&&u.route.id?i[u.route.id]:void 0,m=u.route.errorElement||Yj,a&&(l<0&&d===0?(Lb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,v=null):l===d&&(f=!0,v=u.route.hydrateFallbackElement||null)));let b=t.concat(s.slice(0,d+1)),w=()=>{let y;return h?y=m:f?y=v:u.route.Component?y=p.createElement(u.route.Component,null):u.route.element?y=u.route.element:y=c,p.createElement(Xj,{match:u,routeContext:{outlet:c,matches:b,isDataRoute:r!=null},children:y})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?p.createElement(Jj,{location:r.location,revalidation:r.revalidation,component:m,error:h,children:w(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):w()},null)}function Vf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Zj(e){let t=p.useContext(Ai);return Xe(t,Vf(e)),t}function ek(e){let t=p.useContext(Tc);return Xe(t,Vf(e)),t}function tk(e){let t=p.useContext(jr);return Xe(t,Vf(e)),t}function qf(e){let t=tk(e),r=t.matches[t.matches.length-1];return Xe(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function rk(){return qf("useRouteId")}function nk(){var n;let e=p.useContext(Uf),t=ek("useRouteError"),r=qf("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function sk(){let{router:e}=Zj("useNavigate"),t=qf("useNavigate"),r=p.useRef(!1);return Mb(()=>{r.current=!0}),p.useCallback(async(s,i={})=>{Fr(r.current,Db),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var c0={};function Lb(e,t,r){!t&&!c0[e]&&(c0[e]=!0,Fr(!1,r))}p.memo(ik);function ik({routes:e,future:t,state:r}){return Ob(e,void 0,r,t)}function Kl({to:e,replace:t,state:r,relative:n}){Xe(Ri(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=p.useContext(Br);Fr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=p.useContext(jr),{pathname:a}=bn(),l=Zn(),c=zf(e,Bf(i),a,n==="path"),u=JSON.stringify(c);return p.useEffect(()=>{l(JSON.parse(u),{replace:t,state:r,relative:n})},[l,u,n,t,r]),null}function ok(e){return Hj(e.context)}function Ut(e){Xe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ak({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Xe(!Ri(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=e.replace(/^\/*/,"/"),l=p.useMemo(()=>({basename:a,navigator:s,static:i,future:{}}),[a,s,i]);typeof r=="string"&&(r=$i(r));let{pathname:c="/",search:u="",hash:d="",state:h=null,key:f="default"}=r,m=p.useMemo(()=>{let v=mn(c,a);return v==null?null:{location:{pathname:v,search:u,hash:d,state:h,key:f},navigationType:n}},[a,c,u,d,h,f,n]);return Fr(m!=null,`<Router basename="${a}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:p.createElement(Br.Provider,{value:l},p.createElement(ha.Provider,{children:t,value:m}))}function wu({children:e,location:t}){return Kj(Zd(e),t)}function Zd(e,t=[]){let r=[];return p.Children.forEach(e,(n,s)=>{if(!p.isValidElement(n))return;let i=[...t,s];if(n.type===p.Fragment){r.push.apply(r,Zd(n.props.children,i));return}Xe(n.type===Ut,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Xe(!n.props.index||!n.props.children,"An index route cannot have child routes.");let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Zd(n.props.children,i)),r.push(a)}),r}var ml="get",pl="application/x-www-form-urlencoded";function $c(e){return e!=null&&typeof e.tagName=="string"}function lk(e){return $c(e)&&e.tagName.toLowerCase()==="button"}function ck(e){return $c(e)&&e.tagName.toLowerCase()==="form"}function uk(e){return $c(e)&&e.tagName.toLowerCase()==="input"}function dk(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function hk(e,t){return e.button===0&&(!t||t==="_self")&&!dk(e)}var Ua=null;function fk(){if(Ua===null)try{new FormData(document.createElement("form"),0),Ua=!1}catch{Ua=!0}return Ua}var mk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _u(e){return e!=null&&!mk.has(e)?(Fr(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pl}"`),null):e}function pk(e,t){let r,n,s,i,a;if(ck(e)){let l=e.getAttribute("action");n=l?mn(l,t):null,r=e.getAttribute("method")||ml,s=_u(e.getAttribute("enctype"))||pl,i=new FormData(e)}else if(lk(e)||uk(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?mn(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||ml,s=_u(e.getAttribute("formenctype"))||_u(l.getAttribute("enctype"))||pl,i=new FormData(l,e),!fk()){let{name:u,type:d,value:h}=e;if(d==="image"){let f=u?`${u}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else u&&i.append(u,h)}}else{if($c(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=ml,n=null,s=pl,a=e}return i&&s==="text/plain"&&(a=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wf(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function gk(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&mn(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function xk(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function yk(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function bk(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let a=await xk(i,r);return a.links?a.links():[]}return[]}));return jk(n.flat(1).filter(yk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function u0(e,t,r,n,s,i){let a=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return i==="assets"?t.filter((c,u)=>a(c,u)||l(c,u)):i==="data"?t.filter((c,u)=>{var h;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(a(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function vk(e,t,{includeHydrateFallback:r}={}){return wk(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function wk(e){return[...new Set(e)]}function _k(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function jk(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(_k(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}function Fb(){let e=p.useContext(Ai);return Wf(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function kk(){let e=p.useContext(Tc);return Wf(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Hf=p.createContext(void 0);Hf.displayName="FrameworkContext";function Ib(){let e=p.useContext(Hf);return Wf(e,"You must render this element inside a <HydratedRouter> element"),e}function Nk(e,t){let r=p.useContext(Hf),[n,s]=p.useState(!1),[i,a]=p.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,f=p.useRef(null);p.useEffect(()=>{if(e==="render"&&a(!0),e==="viewport"){let b=y=>{y.forEach(x=>{a(x.isIntersecting)})},w=new IntersectionObserver(b,{threshold:.5});return f.current&&w.observe(f.current),()=>{w.disconnect()}}},[e]),p.useEffect(()=>{if(n){let b=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(b)}}},[n]);let m=()=>{s(!0)},v=()=>{s(!1),a(!1)};return r?e!=="intent"?[i,f,{}]:[i,f,{onFocus:eo(l,m),onBlur:eo(c,v),onMouseEnter:eo(u,m),onMouseLeave:eo(d,v),onTouchStart:eo(h,m)}]:[!1,f,{}]}function eo(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function Sk({page:e,...t}){let{router:r}=Fb(),n=p.useMemo(()=>Tb(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?p.createElement(Ek,{page:e,matches:n,...t}):null}function Ck(e){let{manifest:t,routeModules:r}=Ib(),[n,s]=p.useState([]);return p.useEffect(()=>{let i=!1;return bk(e,t,r).then(a=>{i||s(a)}),()=>{i=!0}},[e,t,r]),n}function Ek({page:e,matches:t,...r}){let n=bn(),{manifest:s,routeModules:i}=Ib(),{basename:a}=Fb(),{loaderData:l,matches:c}=kk(),u=p.useMemo(()=>u0(e,t,c,s,n,"data"),[e,t,c,s,n]),d=p.useMemo(()=>u0(e,t,c,s,n,"assets"),[e,t,c,s,n]),h=p.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let v=new Set,b=!1;if(t.forEach(y=>{var g;let x=s.routes[y.route.id];!x||!x.hasLoader||(!u.some(_=>_.route.id===y.route.id)&&y.route.id in l&&((g=i[y.route.id])!=null&&g.shouldRevalidate)||x.hasClientLoader?b=!0:v.add(y.route.id))}),v.size===0)return[];let w=gk(e,a,"data");return b&&v.size>0&&w.searchParams.set("_routes",t.filter(y=>v.has(y.route.id)).map(y=>y.route.id).join(",")),[w.pathname+w.search]},[a,l,n,s,u,t,e,i]),f=p.useMemo(()=>vk(d,s),[d,s]),m=Ck(d);return p.createElement(p.Fragment,null,h.map(v=>p.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...r})),f.map(v=>p.createElement("link",{key:v,rel:"modulepreload",href:v,...r})),m.map(({key:v,link:b})=>p.createElement("link",{key:v,nonce:r.nonce,...b})))}function Tk(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var Bb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Bb&&(window.__reactRouterVersion="7.8.1")}catch{}function Pk({basename:e,children:t,window:r}){let n=p.useRef();n.current==null&&(n.current=gj({window:r,v5Compat:!0}));let s=n.current,[i,a]=p.useState({action:s.action,location:s.location}),l=p.useCallback(c=>{p.startTransition(()=>a(c))},[a]);return p.useLayoutEffect(()=>s.listen(l),[s,l]),p.createElement(ak,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var zb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ma=p.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:h,...f},m){let{basename:v}=p.useContext(Br),b=typeof u=="string"&&zb.test(u),w,y=!1;if(typeof u=="string"&&b&&(w=u,Bb))try{let O=new URL(window.location.href),D=u.startsWith("//")?new URL(O.protocol+u):new URL(u),P=mn(D.pathname,v);D.origin===O.origin&&P!=null?u=P+D.search+D.hash:y=!0}catch{Fr(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=Vj(u,{relative:s}),[g,_,k]=Nk(n,f),S=Dk(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:h});function N(O){t&&t(O),O.defaultPrevented||S(O)}let E=p.createElement("a",{...f,...k,href:w||x,onClick:y||i?t:N,ref:Tk(m,_),target:c,"data-discover":!b&&r==="render"?"true":void 0});return g&&!b?p.createElement(p.Fragment,null,E,p.createElement(Sk,{page:x})):E});ma.displayName="Link";var $k=p.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:a,viewTransition:l,children:c,...u},d){let h=fa(a,{relative:u.relative}),f=bn(),m=p.useContext(Tc),{navigator:v,basename:b}=p.useContext(Br),w=m!=null&&Ik(h)&&l===!0,y=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,x=f.pathname,g=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(x=x.toLowerCase(),g=g?g.toLowerCase():null,y=y.toLowerCase()),g&&b&&(g=mn(g,b)||g);const _=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let k=x===y||!s&&x.startsWith(y)&&x.charAt(_)==="/",S=g!=null&&(g===y||!s&&g.startsWith(y)&&g.charAt(y.length)==="/"),N={isActive:k,isPending:S,isTransitioning:w},E=k?t:void 0,O;typeof n=="function"?O=n(N):O=[n,k?"active":null,S?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let D=typeof i=="function"?i(N):i;return p.createElement(ma,{...u,"aria-current":E,className:O,ref:d,style:D,to:a,viewTransition:l},typeof c=="function"?c(N):c)});$k.displayName="NavLink";var Ak=p.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:a=ml,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:h,...f},m)=>{let v=Lk(),b=Fk(l,{relative:u}),w=a.toLowerCase()==="get"?"get":"post",y=typeof l=="string"&&zb.test(l),x=g=>{if(c&&c(g),g.defaultPrevented)return;g.preventDefault();let _=g.nativeEvent.submitter,k=(_==null?void 0:_.getAttribute("formmethod"))||a;v(_||g.currentTarget,{fetcherKey:t,method:k,navigate:r,replace:s,state:i,relative:u,preventScrollReset:d,viewTransition:h})};return p.createElement("form",{ref:m,method:w,action:b,onSubmit:n?c:x,...f,"data-discover":!y&&e==="render"?"true":void 0})});Ak.displayName="Form";function Rk(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ub(e){let t=p.useContext(Ai);return Xe(t,Rk(e)),t}function Dk(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:a}={}){let l=Zn(),c=bn(),u=fa(e,{relative:i});return p.useCallback(d=>{if(hk(d,t)){d.preventDefault();let h=r!==void 0?r:Go(c)===Go(u);l(e,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:a})}},[c,l,u,r,n,t,e,s,i,a])}var Mk=0,Ok=()=>`__${String(++Mk)}__`;function Lk(){let{router:e}=Ub("useSubmit"),{basename:t}=p.useContext(Br),r=rk();return p.useCallback(async(n,s={})=>{let{action:i,method:a,encType:l,formData:c,body:u}=pk(n,t);if(s.navigate===!1){let d=s.fetcherKey||Ok();await e.fetch(d,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||a,formEncType:s.encType||l,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||a,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function Fk(e,{relative:t}={}){let{basename:r}=p.useContext(Br),n=p.useContext(jr);Xe(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...fa(e||".",{relative:t})},a=bn();if(e==null){i.search=a.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let d=l.toString();i.search=d?`?${d}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:cn([r,i.pathname])),Go(i)}function Ik(e,{relative:t}={}){let r=p.useContext(Rb);Xe(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Ub("useViewTransitionState"),s=fa(e,{relative:t});if(!r.isTransitioning)return!1;let i=mn(r.currentLocation.pathname,n)||r.currentLocation.pathname,a=mn(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Hl(s.pathname,a)!=null||Hl(s.pathname,i)!=null}const Bk="modulepreload",zk=function(e){return"/"+e},d0={},pa=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=zk(c),c in d0)return;d0[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Bk,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},Uk=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>pa(async()=>{const{default:n}=await Promise.resolve().then(()=>Di);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Kf extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class Vk extends Kf{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class h0 extends Kf{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class f0 extends Kf{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var eh;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(eh||(eh={}));var qk=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Wk{constructor(t,{headers:r={},customFetch:n,region:s=eh.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Uk(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return qk(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=a):typeof a=="string"?(l["Content-Type"]="text/plain",d=a):typeof FormData<"u"&&a instanceof FormData?d=a:(l["Content-Type"]="application/json",d=JSON.stringify(a)));const h=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:d}).catch(b=>{throw new Vk(b)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new h0(h);if(!h.ok)throw new f0(h);let m=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),v;return m==="application/json"?v=yield h.json():m==="application/octet-stream"?v=yield h.blob():m==="text/event-stream"?v=h:m==="multipart/form-data"?v=yield h.formData():v=yield h.text(),{data:v,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof f0||s instanceof h0?s.context:void 0}}})}}var qt={},Gf={},Ac={},ga={},Rc={},Dc={},Hk=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ni=Hk();const Kk=Ni.fetch,Vb=Ni.fetch.bind(Ni),qb=Ni.Headers,Gk=Ni.Request,Yk=Ni.Response,Di=Object.freeze(Object.defineProperty({__proto__:null,Headers:qb,Request:Gk,Response:Yk,default:Vb,fetch:Kk},Symbol.toStringTag,{value:"Module"})),Jk=q_(Di);var Mc={};Object.defineProperty(Mc,"__esModule",{value:!0});let Xk=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Mc.default=Xk;var Wb=vr&&vr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dc,"__esModule",{value:!0});const Qk=Wb(Jk),Zk=Wb(Mc);let eN=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Qk.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let u=null,d=null,h=null,f=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const y=await i.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=y:d=JSON.parse(y))}const b=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),w=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");b&&w&&w.length>1&&(h=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,h=null,f=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const b=await i.text();try{u=JSON.parse(b),Array.isArray(u)&&i.status===404&&(d=[],u=null,f=200,m="OK")}catch{i.status===404&&b===""?(f=204,m="No Content"):u={message:b}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,f=200,m="OK"),u&&this.shouldThrowOnError)throw new Zk.default(u)}return{error:u,data:d,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i==null?void 0:i.name)!==null&&a!==void 0?a:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};Dc.default=eN;var tN=vr&&vr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rc,"__esModule",{value:!0});const rN=tN(Dc);let nN=class extends rN.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(a,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${c};`,a==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Rc.default=nN;var sN=vr&&vr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ga,"__esModule",{value:!0});const iN=sN(Rc);let oN=class extends iN.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${a}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};ga.default=oN;var aN=vr&&vr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ac,"__esModule",{value:!0});const to=aN(ga);let lN=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let i=!1;const a=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),n&&(this.headers.Prefer=`count=${n}`),new to.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const a=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new to.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new to.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new to.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new to.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Ac.default=lN;var Oc={},Lc={};Object.defineProperty(Lc,"__esModule",{value:!0});Lc.version=void 0;Lc.version="0.0.0-automated";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.DEFAULT_HEADERS=void 0;const cN=Lc;Oc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${cN.version}`};var Hb=vr&&vr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Gf,"__esModule",{value:!0});const uN=Hb(Ac),dN=Hb(ga),hN=Oc;let fN=class Kb{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},hN.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new uN.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Kb(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(a=n?"HEAD":"GET",Object.entries(r).filter(([d,h])=>h!==void 0).map(([d,h])=>[d,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([d,h])=>{l.searchParams.append(d,h)})):(a="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new dN.default({method:a,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Gf.default=fN;var Mi=vr&&vr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qt,"__esModule",{value:!0});qt.PostgrestError=qt.PostgrestBuilder=qt.PostgrestTransformBuilder=qt.PostgrestFilterBuilder=qt.PostgrestQueryBuilder=qt.PostgrestClient=void 0;const Gb=Mi(Gf);qt.PostgrestClient=Gb.default;const Yb=Mi(Ac);qt.PostgrestQueryBuilder=Yb.default;const Jb=Mi(ga);qt.PostgrestFilterBuilder=Jb.default;const Xb=Mi(Rc);qt.PostgrestTransformBuilder=Xb.default;const Qb=Mi(Dc);qt.PostgrestBuilder=Qb.default;const Zb=Mi(Mc);qt.PostgrestError=Zb.default;var mN=qt.default={PostgrestClient:Gb.default,PostgrestQueryBuilder:Yb.default,PostgrestFilterBuilder:Jb.default,PostgrestTransformBuilder:Xb.default,PostgrestBuilder:Qb.default,PostgrestError:Zb.default};const{PostgrestClient:pN,PostgrestQueryBuilder:VA,PostgrestFilterBuilder:qA,PostgrestTransformBuilder:WA,PostgrestBuilder:HA,PostgrestError:KA}=mN;class gN{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const r=parseInt(process.versions.node.split(".")[0]);return r>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const xN="2.15.1",yN=`realtime-js/${xN}`,bN="1.0.0",th=1e4,vN=1e3,wN=100;var vo;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(vo||(vo={}));var ft;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ft||(ft={}));var Ar;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Ar||(Ar={}));var rh;(function(e){e.websocket="websocket"})(rh||(rh={}));var ms;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(ms||(ms={}));class _N{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),i=r.getUint8(2);let a=this.HEADER_LENGTH+2;const l=n.decode(t.slice(a,a+s));a=a+s;const c=n.decode(t.slice(a,a+i));a=a+i;const u=JSON.parse(n.decode(t.slice(a,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class ev{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var qe;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(qe||(qe={}));const m0=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,a)=>(i[a]=jN(a,e,t,s),i),{})},jN=(e,t,r,n)=>{const s=t.find(l=>l.name===e),i=s==null?void 0:s.type,a=r[e];return i&&!n.includes(i)?tv(i,a):nh(a)},tv=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return CN(t,r)}switch(e){case qe.bool:return kN(t);case qe.float4:case qe.float8:case qe.int2:case qe.int4:case qe.int8:case qe.numeric:case qe.oid:return NN(t);case qe.json:case qe.jsonb:return SN(t);case qe.timestamp:return EN(t);case qe.abstime:case qe.date:case qe.daterange:case qe.int4range:case qe.int8range:case qe.money:case qe.reltime:case qe.text:case qe.time:case qe.timestamptz:case qe.timetz:case qe.tsrange:case qe.tstzrange:return nh(t);default:return nh(t)}},nh=e=>e,kN=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},NN=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},SN=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},CN=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const a=e.slice(1,r);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>tv(t,l))}return e},EN=e=>typeof e=="string"?e.replace(" ","T"):e,rv=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class ju{constructor(t,r,n={},s=th){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var p0;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(p0||(p0={}));class wo{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=wo.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=wo.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=wo.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const i=this.cloneDeep(t),a=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{a[u]||(c[u]=d)}),this.map(a,(u,d)=>{const h=i[u];if(h){const f=d.map(w=>w.presence_ref),m=h.map(w=>w.presence_ref),v=d.filter(w=>m.indexOf(w.presence_ref)<0),b=h.filter(w=>f.indexOf(w.presence_ref)<0);v.length>0&&(l[u]=v),b.length>0&&(c[u]=b)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:i,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const h=t[l].map(m=>m.presence_ref),f=d.filter(m=>h.indexOf(m.presence_ref)<0);t[l].unshift(...f)}n(l,d,c)}),this.map(a,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(h=>h.presence_ref);u=u.filter(h=>d.indexOf(h.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var g0;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(g0||(g0={}));var _o;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(_o||(_o={}));var nn;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(nn||(nn={}));class Yf{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ft.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new ju(this,Ar.join,this.params,this.timeout),this.rejoinTimer=new ev(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ft.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ft.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=ft.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ar.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new wo(this),this.broadcastEndpointURL=rv(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==ft.closed){const{config:{broadcast:i,presence:a,private:l}}=this.params,c=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[_o.PRESENCE]&&this.bindings[_o.PRESENCE].length>0,d={},h={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>t==null?void 0:t(nn.CHANNEL_ERROR,f)),this._onClose(()=>t==null?void 0:t(nn.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var m;if(this.socket.setAuth(),f===void 0){t==null||t(nn.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,b=(m=v==null?void 0:v.length)!==null&&m!==void 0?m:0,w=[];for(let y=0;y<b;y++){const x=v[y],{filter:{event:g,schema:_,table:k,filter:S}}=x,N=f&&f[y];if(N&&N.event===g&&N.schema===_&&N.table===k&&N.filter===S)w.push(Object.assign(Object.assign({},x),{id:N.id}));else{this.unsubscribe(),this.state=ft.errored,t==null||t(nn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=w,t&&t(nn.SUBSCRIBED);return}}).receive("error",f=>{this.state=ft.errored,t==null||t(nn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(nn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===ft.joined&&t===_o.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:a}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ft.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ar.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new ju(this,Ar.leave,{},t),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ft.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),a}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new ju(this,t,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>wN){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,i;const a=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=Ar;if(n&&[l,c,u,d].indexOf(a)>=0&&n!==this._joinRef())return;let f=this._onMessage(a,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var v,b,w;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((w=(b=m.filter)===null||b===void 0?void 0:b.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===a}).map(m=>m.callback(f,n)):(i=this.bindings[a])===null||i===void 0||i.filter(m=>{var v,b,w,y,x,g;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in m){const _=m.id,k=(v=m.filter)===null||v===void 0?void 0:v.event;return _&&((b=r.ids)===null||b===void 0?void 0:b.includes(_))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const _=(x=(y=m==null?void 0:m.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase();return _==="*"||_===((g=r==null?void 0:r.event)===null||g===void 0?void 0:g.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===a}).map(m=>{if(typeof f=="object"&&"ids"in f){const v=f.data,{schema:b,table:w,commit_timestamp:y,type:x,errors:g}=v;f=Object.assign(Object.assign({},{schema:b,table:w,commit_timestamp:y,eventType:x,new:{},old:{},errors:g}),this._getPayloadRecords(v))}m.callback(f,n)})}_isClosed(){return this.state===ft.closed}_isJoined(){return this.state===ft.joined}_isJoining(){return this.state===ft.joining}_isLeaving(){return this.state===ft.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Yf.isEqual(s.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Ar.close,{},t)}_onError(t){this._on(Ar.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ft.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=m0(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=m0(t.columns,t.old_record)),r}}const x0=()=>{},Va={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},TN=[1e3,2e3,5e3,1e4],PN=1e4,$N=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class AN{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=th,this.transport=null,this.heartbeatIntervalMs=Va.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=x0,this.ref=0,this.reconnectTimer=null,this.logger=x0,this.conn=null,this.sendBuffer=[],this.serializer=new _N,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>pa(async()=>{const{default:l}=await Promise.resolve().then(()=>Di);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${rh.websocket}`,this.httpEndpoint=rv(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=gN.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:bN}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case vo.connecting:return ms.Connecting;case vo.open:return ms.Open;case vo.closing:return ms.Closing;default:return ms.Closed}}isConnected(){return this.connectionState()===ms.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Yf(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:s,ref:i}=t,a=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(vN,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},Va.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:a}=r,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(s,i,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Ar.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([$N],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:yN};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Ar.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${t} callback`,s)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new ev(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Va.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,s,i,a,l,c,u;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:th,this.heartbeatIntervalMs=(s=t==null?void 0:t.heartbeatIntervalMs)!==null&&s!==void 0?s:Va.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:d=>TN[d-1]||PN,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(d,h)=>h(JSON.stringify(d)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Jf extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function mt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class RN extends Jf{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class sh extends Jf{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var DN=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const nv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>pa(async()=>{const{default:n}=await Promise.resolve().then(()=>Di);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},MN=()=>DN(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield pa(()=>Promise.resolve().then(()=>Di),void 0)).Response:Response}),ih=e=>{if(Array.isArray(e))return e.map(r=>ih(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[s]=ih(n)}),t},ON=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Rs=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const ku=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),LN=(e,t,r)=>Rs(void 0,void 0,void 0,function*(){const n=yield MN();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{const i=e.status||500,a=(s==null?void 0:s.statusCode)||i+"";t(new RN(ku(s),i,a))}).catch(s=>{t(new sh(ku(s),s))}):t(new sh(ku(e),e))}),FN=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?s:(ON(n)?(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,t!=null&&t.duplex&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r))};function xa(e,t,r,n,s,i){return Rs(this,void 0,void 0,function*(){return new Promise((a,l)=>{e(r,FN(t,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>LN(c,l,n))})})}function Gl(e,t,r,n){return Rs(this,void 0,void 0,function*(){return xa(e,"GET",t,r,n)})}function qr(e,t,r,n,s){return Rs(this,void 0,void 0,function*(){return xa(e,"POST",t,n,s,r)})}function oh(e,t,r,n,s){return Rs(this,void 0,void 0,function*(){return xa(e,"PUT",t,n,s,r)})}function IN(e,t,r,n){return Rs(this,void 0,void 0,function*(){return xa(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function sv(e,t,r,n,s){return Rs(this,void 0,void 0,function*(){return xa(e,"DELETE",t,n,s,r)})}var Mt=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const BN={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},y0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class zN{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=nv(s)}uploadOrUpdate(t,r,n,s){return Mt(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},y0),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),h=yield(t=="PUT"?oh:qr)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:u,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(mt(i))return{data:null,error:i};throw i}})}upload(t,r,n){return Mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return Mt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:y0.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const h=yield oh(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(mt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return Mt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield qr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new Jf("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:l},error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}})}update(t,r,n){return Mt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Mt(this,void 0,void 0,function*(){try{return{data:yield qr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(mt(s))return{data:null,error:s};throw s}})}copy(t,r,n){return Mt(this,void 0,void 0,function*(){try{return{data:{path:(yield qr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(mt(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return Mt(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),i=yield qr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(mt(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return Mt(this,void 0,void 0,function*(){try{const s=yield qr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(mt(s))return{data:null,error:s};throw s}})}download(t,r){return Mt(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Gl(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(mt(l))return{data:null,error:l};throw l}})}info(t){return Mt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Gl(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:ih(n),error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}})}exists(t){return Mt(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield IN(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(mt(n)&&n instanceof sh){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return Mt(this,void 0,void 0,function*(){try{return{data:yield sv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}list(t,r,n){return Mt(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},BN),r),{prefix:t||""});return{data:yield qr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(mt(s))return{data:null,error:s};throw s}})}listV2(t,r){return Mt(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield qr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const UN="2.11.0",VN={"X-Client-Info":`storage-js/${UN}`};var Is=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class qN{constructor(t,r={},n,s){const i=new URL(t);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},VN),r),this.fetch=nv(n)}listBuckets(){return Is(this,void 0,void 0,function*(){try{return{data:yield Gl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(mt(t))return{data:null,error:t};throw t}})}getBucket(t){return Is(this,void 0,void 0,function*(){try{return{data:yield Gl(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Is(this,void 0,void 0,function*(){try{return{data:yield qr(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Is(this,void 0,void 0,function*(){try{return{data:yield oh(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(mt(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Is(this,void 0,void 0,function*(){try{return{data:yield qr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Is(this,void 0,void 0,function*(){try{return{data:yield sv(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(mt(r))return{data:null,error:r};throw r}})}}class WN extends qN{constructor(t,r={},n,s){super(t,r,n,s)}from(t){return new zN(this.url,this.headers,t,this.fetch)}}const HN="2.55.0";let lo="";typeof Deno<"u"?lo="deno":typeof document<"u"?lo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?lo="react-native":lo="node";const KN={"X-Client-Info":`supabase-js-${lo}/${HN}`},GN={headers:KN},YN={schema:"public"},JN={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},XN={};var QN=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const ZN=e=>{let t;return e?t=e:typeof fetch>"u"?t=Vb:t=fetch,(...r)=>t(...r)},eS=()=>typeof Headers>"u"?qb:Headers,tS=(e,t,r)=>{const n=ZN(r),s=eS();return(i,a)=>QN(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},a),{headers:u}))})};var rS=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function nS(e){return e.endsWith("/")?e:e+"/"}function sS(e,t){var r,n;const{db:s,auth:i,realtime:a,global:l}=e,{db:c,auth:u,realtime:d,global:h}=t,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>rS(this,void 0,void 0,function*(){return""})};return e.accessToken?f.accessToken=e.accessToken:delete f.accessToken,f}const iv="2.71.1",Ws=30*1e3,ah=3,Nu=ah*Ws,iS="http://localhost:9999",oS="supabase.auth.token",aS={"X-Client-Info":`gotrue-js/${iv}`},lh="X-Supabase-Api-Version",ov={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},lS=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,cS=10*60*1e3;class Xf extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Ne(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class uS extends Xf{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function dS(e){return Ne(e)&&e.name==="AuthApiError"}class av extends Xf{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class es extends Xf{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Sn extends es{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hS(e){return Ne(e)&&e.name==="AuthSessionMissingError"}class qa extends es{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wa extends es{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Ha extends es{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function fS(e){return Ne(e)&&e.name==="AuthImplicitGrantRedirectError"}class b0 extends es{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ch extends es{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Su(e){return Ne(e)&&e.name==="AuthRetryableFetchError"}class v0 extends es{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class uh extends es{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Yl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),w0=` 	
\r=`.split(""),mS=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<w0.length;t+=1)e[w0[t].charCodeAt(0)]=-2;for(let t=0;t<Yl.length;t+=1)e[Yl[t].charCodeAt(0)]=t;return e})();function _0(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Yl[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Yl[n]),t.queuedBits-=6}}function lv(e,t,r){const n=mS[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function j0(e){const t=[],r=a=>{t.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{xS(a,n,r)};for(let a=0;a<e.length;a+=1)lv(e.charCodeAt(a),s,i);return t.join("")}function pS(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function gS(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}pS(n,t)}}function xS(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function yS(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)lv(e.charCodeAt(s),r,n);return new Uint8Array(t)}function bS(e){const t=[];return gS(e,r=>t.push(r)),new Uint8Array(t)}function vS(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>_0(s,r,n)),_0(null,r,n),t.join("")}function wS(e){return Math.round(Date.now()/1e3)+e}function _S(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Er=()=>typeof window<"u"&&typeof document<"u",os={tested:!1,writable:!1},cv=()=>{if(!Er())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(os.tested)return os.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),os.tested=!0,os.writable=!0}catch{os.tested=!0,os.writable=!1}return os.writable};function jS(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{t[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const uv=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>pa(async()=>{const{default:n}=await Promise.resolve().then(()=>Di);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},kS=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Hs=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},as=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},jn=async(e,t)=>{await e.removeItem(t)};class Fc{constructor(){this.promise=new Fc.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Fc.promiseConstructor=Promise;function Cu(e){const t=e.split(".");if(t.length!==3)throw new uh("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!lS.test(t[n]))throw new uh("JWT not in base64url format");return{header:JSON.parse(j0(t[0])),payload:JSON.parse(j0(t[1])),signature:yS(t[2]),raw:{header:t[0],payload:t[1]}}}async function NS(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function SS(e,t){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await e(i);if(!t(i,null,a)){n(a);return}}catch(a){if(!t(i,a)){s(a);return}}})()})}function CS(e){return("0"+e.toString(16)).substr(-2)}function ES(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,CS).join("")}async function TS(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function PS(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await TS(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Bs(e,t,r=!1){const n=ES();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Hs(e,`${t}-code-verifier`,s);const i=await PS(n);return[i,n===i?"plain":"s256"]}const $S=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function AS(e){const t=e.headers.get(lh);if(!t||!t.match($S))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function RS(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function DS(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const MS=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function zs(e){if(!MS.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Eu(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function k0(e){return JSON.parse(JSON.stringify(e))}var OS=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const hs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),LS=[502,503,504];async function N0(e){var t;if(!kS(e))throw new ch(hs(e),0);if(LS.includes(e.status))throw new ch(hs(e),e.status);let r;try{r=await e.json()}catch(i){throw new av(hs(i),i)}let n;const s=AS(e);if(s&&s.getTime()>=ov["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new v0(hs(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Sn}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new v0(hs(r),e.status,r.weak_password.reasons);throw new uS(hs(r),e.status||500,n)}const FS=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Pe(e,t,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[lh]||(i[lh]=ov["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const a=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await IS(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function IS(e,t,r,n,s,i){const a=FS(t,n,s,i);let l;try{l=await e(r,Object.assign({},a))}catch(c){throw console.error(c),new ch(hs(c),0)}if(l.ok||await N0(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await N0(c)}}function tn(e){var t;let r=null;VS(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=wS(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function S0(e){const t=tn(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Rn(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function BS(e){return{data:e,error:null}}function zS(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,a=OS(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function US(e){return e}function VS(e){return e.access_token&&e.refresh_token&&e.expires_in}const Tu=["global","local","others"];var qS=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class WS{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=uv(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=Tu[0]){if(Tu.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tu.join(", ")}`);try{return await Pe(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Pe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Rn})}catch(n){if(Ne(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=qS(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Pe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:zS,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Ne(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Pe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Rn})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,i,a,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Pe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:US});if(d.error)throw d.error;const h=await d.json(),f=(a=d.headers.get("x-total-count"))!==null&&a!==void 0?a:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(v=>{const b=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(v.split(";")[1].split("=")[1]);u[`${w}Page`]=b}),u.total=parseInt(f)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(Ne(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){zs(t);try{return await Pe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Rn})}catch(r){if(Ne(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){zs(t);try{return await Pe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Rn})}catch(n){if(Ne(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){zs(t);try{return await Pe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Rn})}catch(n){if(Ne(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){zs(t.userId);try{const{data:r,error:n}=await Pe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async _deleteFactor(t){zs(t.userId),zs(t.id);try{return{data:await Pe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}}}function C0(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function HS(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Us={debug:!!(globalThis&&cv()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dv extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class KS extends dv{}async function GS(e,t,r){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Us.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw Us.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new KS(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Us.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}HS();const YS={url:iS,storageKey:oS,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:aS,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function E0(e,t,r){return await r()}const Vs={};class Yo{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Yo.nextInstanceID,Yo.nextInstanceID+=1,this.instanceID>0&&Er()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},YS),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new WS({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=uv(s.fetch),this.lock=s.lock||E0,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Er()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=GS:this.lock=E0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:cv()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=C0(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=C0(this.memoryStorage)),Er()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Vs[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Vs[this.storageKey]=Object.assign(Object.assign({},Vs[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Vs[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Vs[this.storageKey]=Object.assign(Object.assign({},Vs[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${iv}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=jS(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Er()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),fS(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Ne(r)?{error:r}:{error:new av("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const i=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:tn}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Ne(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,s;try{let i;if("email"in t){const{email:d,password:h,options:f}=t;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await Bs(this.storage,this.storageKey)),i=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:d,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:v},xform:tn})}else if("phone"in t){const{phone:d,password:h,options:f}=t;i=await Pe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:tn})}else throw new Wa("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Ne(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:a,options:l}=t;r=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:S0})}else if("phone"in t){const{phone:i,password:a,options:l}=t;r=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:S0})}else throw new Wa("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new qa}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Ne(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,i,a,l,c,u,d,h,f,m;let v,b;if("message"in t)v=t.message,b=t.signature;else{const{chain:w,wallet:y,statement:x,options:g}=t;let _;if(Er())if(typeof y=="object")_=y;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))_=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(g!=null&&g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=y}const k=new URL((r=g==null?void 0:g.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in _&&_.signIn){const S=await _.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},g==null?void 0:g.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),x?{statement:x}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)v=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),b=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in _)||typeof _.signMessage!="function"||!("publicKey"in _)||typeof _!="object"||!_.publicKey||!("toBase58"in _.publicKey)||typeof _.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${k.host} wants you to sign in with your Solana account:`,_.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(s=(n=g==null?void 0:g.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=g==null?void 0:g.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...!((a=g==null?void 0:g.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...!((l=g==null?void 0:g.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...!((c=g==null?void 0:g.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...!((u=g==null?void 0:g.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...!((h=(d=g==null?void 0:g.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...g.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await _.signMessage(new TextEncoder().encode(v),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=S}}try{const{data:w,error:y}=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:vS(b)},!((f=t.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:tn});if(y)throw y;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new qa}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:y})}catch(w){if(Ne(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const r=await as(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:a}=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:tn});if(await jn(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new qa}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(Ne(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:i,nonce:a}=t,l=await Pe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:tn}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new qa}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(Ne(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,i,a;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Bs(this.storage,this.storageKey));const{error:h}=await Pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Pe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Wa("You must provide either an email or phone number.")}catch(l){if(Ne(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,i;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:l}=await Pe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:tn});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,u=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(Ne(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await Bs(this.storage,this.storageKey)),await Pe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:BS})}catch(i){if(Ne(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Sn;const{error:s}=await Pe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(Ne(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:i}=t,{error:a}=await Pe(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in t){const{phone:n,type:s,options:i}=t,{data:a,error:l}=await Pe(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:l}}throw new Wa("You must provide either an email or phone number and a type")}catch(r){if(Ne(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await as(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Nu:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const a=await as(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=Eu()}if(this.storage.isServer&&t.user){let a=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Rn}):await this._useSession(async r=>{var n,s,i;const{data:a,error:l}=r;if(l)throw l;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Sn}:await Pe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:Rn})})}catch(r){if(Ne(r))return hS(r)&&(await this._removeSession(),await jn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Sn;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Bs(this.storage,this.storageKey));const{data:u,error:d}=await Pe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:Rn});if(d)throw d;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(Ne(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Sn;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:a}=Cu(t.access_token);if(a.exp&&(n=a.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Ne(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:a,error:l}=r;if(l)throw l;t=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Sn;const{session:s,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Ne(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Er())throw new Ha("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Ha(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new b0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ha("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new b0("No code detected.");const{data:x,error:g}=await this._exchangeCodeForSession(t.code);if(g)throw g;const _=new URL(window.location.href);return _.searchParams.delete("code"),window.history.replaceState(window.history.state,"",_.toString()),{data:{session:x.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!a||!u)throw new Ha("No session defined in URL");const d=Math.round(Date.now()/1e3),h=parseInt(l);let f=d+h;c&&(f=parseInt(c));const m=f-d;m*1e3<=Ws&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const v=f-h;d-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,f,d):d-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,f,d);const{data:b,error:w}=await this._getUser(i);if(w)throw w;const y={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:a,token_type:u,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:t.type},error:null}}catch(n){if(Ne(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await as(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const a=(n=s.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:l}=await this.admin.signOut(a,t);if(l&&!(dS(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await jn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=_S(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Bs(this.storage,this.storageKey,!0));try{return await Pe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Ne(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var a,l,c,u,d;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Pe(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Er()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Ne(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)throw a;return await Pe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await SS(async s=>(s>0&&await NS(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Pe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:tn})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Su(i)&&Date.now()+a-n<Ws})}catch(n){if(this._debug(r,"error",n),Ne(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Er()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await as(this.storage,this.storageKey);if(s&&this.userStorage){let a=await as(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await Hs(this.userStorage,this.storageKey+"-user",a)),s.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:Eu()}else if(s&&!s.user&&!s.user){const a=await as(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await jn(this.storage,this.storageKey+"-user"),await Hs(this.storage,this.storageKey,s)):s.user=Eu()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Nu;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Nu}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Su(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Sn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Fc;const{data:i,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!i.session)throw new Sn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),Ne(i)){const a={session:null,error:i};return Su(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Hs(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=k0(s);await Hs(this.storage,this.storageKey,i)}else{const s=k0(r);await Hs(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await jn(this.storage,this.storageKey),await jn(this.storage,this.storageKey+"-code-verifier"),await jn(this.storage,this.storageKey+"-user"),this.userStorage&&await jn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Er()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Ws);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/Ws);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Ws}ms, refresh threshold is ${ah} ticks`),s<=ah&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof dv)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Er()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,a]=await Bs(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Pe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:i,error:a}=r;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await Pe(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Ne(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:a,error:l}=await Pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await Pe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Ne(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=n.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:i}=t;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Cu(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+cS>s)return n;const{data:i,error:a}=await Pe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};n=m.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Cu(n);r!=null&&r.allowExpired||RS(i.exp);const u=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:s,signature:a},error:null}}const d=DS(s.alg),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,bS(`${l}.${c}`)))throw new uh("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(n){if(Ne(n))return{data:null,error:n};throw n}}}Yo.nextInstanceID=0;const JS=Yo;class XS extends JS{constructor(t){super(t)}}var QS=function(e,t,r,n){function s(i){return i instanceof r?i:new r(function(a){a(i)})}return new(r||(r=Promise))(function(i,a){function l(d){try{u(n.next(d))}catch(h){a(h)}}function c(d){try{u(n.throw(d))}catch(h){a(h)}}function u(d){d.done?i(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class ZS{constructor(t,r,n){var s,i,a;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=nS(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:YN,realtime:XN,auth:Object.assign(Object.assign({},JN),{storageKey:u}),global:GN},h=sS(n??{},d);this.storageKey=(s=h.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=h.auth)!==null&&a!==void 0?a:{},this.headers,h.global.fetch),this.fetch=tS(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new pN(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new WN(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new Wk(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return QS(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:i,flowType:a,lock:l,debug:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new XS({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:a,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new AN(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const eC=(e,t,r)=>new ZS(e,t,r);function tC(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}tC()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Jl="https://bahloynyhjgmdndqabhu.supabase.co".trim(),hv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhaGxveW55aGpnbWRuZHFhYmh1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU3NjM0ODAsImV4cCI6MjA3MTMzOTQ4MH0.SYTUzUkXfjHO-odCTKVDHiBH6AqQmJLf2qoiiD8ecZ0".trim();if(!Jl||!hv)throw new Error("Missing Supabase configuration. Please set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY in your environment. See .env.example.");if(!Jl.startsWith("https://")&&!Jl.startsWith("http://"))throw new Error("Invalid Supabase URL format. URL must start with https:// or http://");const z=eC(Jl,hv),Pu=async e=>{e?await z.rpc("set_app_config",{setting_name:"app.client_id",setting_value:e,is_local:!0}):await z.rpc("set_app_config",{setting_name:"app.client_id",setting_value:"",is_local:!0})},fv=p.createContext(void 0);function rC({children:e}){const[t,r]=p.useState(null),[n,s]=p.useState(null),[i,a]=p.useState(!0),[l,c]=p.useState(null),[u,d]=p.useState(null);p.useEffect(()=>{let v=!0;(async()=>{console.log("AuthProvider: Simple initialization");try{const{data:{session:y},error:x}=await z.auth.getSession();if(!v)return;if(y!=null&&y.user&&!x)console.log("AuthProvider: Found existing session for",y.user.email),s(y),r(y.user),c("admin"),d(null);else{const g=localStorage.getItem("client_session");if(g){console.log("AuthProvider: Found stored client session");const _=JSON.parse(g),k={id:_.id,email:_.client_email,user_metadata:{client_id:_.id,is_client:!0}};r(k),s({user:k,access_token:`client_token_${_.id}`,refresh_token:"",expires_in:3600,expires_at:Math.floor(Date.now()/1e3)+3600,token_type:"bearer"}),c("client"),d(_),await Pu(_.id),console.log("AuthProvider: Client context restored:",_.id)}else console.log("AuthProvider: No existing session"),s(null),r(null),c(null),d(null)}}catch(y){console.error("AuthProvider: Init error:",y)}finally{v&&(console.log("AuthProvider: Initialization complete"),a(!1))}})();const{data:{subscription:w}}=z.auth.onAuthStateChange((y,x)=>{console.log("AuthProvider: Auth change:",y),v&&(x!=null&&x.user?(s(x),r(x.user),c("admin"),d(null)):(s(null),r(null),c(null),d(null)),a(!1))});return()=>{v=!1,w.unsubscribe()}},[]);const m={user:t,session:n,loading:i,userType:l,clientData:u,signIn:async(v,b)=>{console.log("AuthContext: Simple signIn called");try{const{data:w,error:y}=await z.auth.signInWithPassword({email:v,password:b});if(w!=null&&w.user&&!y)return console.log("AuthContext: Admin login successful"),{data:w,error:y};console.log("AuthContext: Admin login failed, trying client login");const{data:x}=await z.from("clients").select("*").eq("client_email",v).eq("client_password_hash",b).maybeSingle();if(x){console.log("AuthContext: Client login successful");const g={id:x.id,email:v,user_metadata:{client_id:x.id,is_client:!0},app_metadata:{},aud:"authenticated",created_at:new Date().toISOString(),updated_at:new Date().toISOString(),email_confirmed_at:new Date().toISOString(),phone:null,confirmation_sent_at:null,confirmed_at:null,last_sign_in_at:new Date().toISOString(),role:"authenticated",phone_confirmed_at:null,recovery_sent_at:null,email_change_sent_at:null,new_email:null,invited_at:null,action_link:null,email_change:null,phone_change:null,phone_change_sent_at:null,email_change_confirm_status:0,phone_change_confirm_status:0,banned_until:null,deleted_at:null};return r(g),s({user:g,access_token:`client_token_${x.id}`,refresh_token:"",expires_in:3600,expires_at:Math.floor(Date.now()/1e3)+3600,token_type:"bearer"}),c("client"),d(x),a(!1),localStorage.setItem("client_session",JSON.stringify(x)),await Pu(x.id),console.log("AuthContext: Client context set:",x.id),{data:{user:g,session:null},error:null}}return console.log("AuthContext: Login failed",y),{data:w,error:y}}catch(w){return console.error("AuthContext: SignIn error:",w),{data:null,error:w}}},signOut:async()=>{var v;console.log("AuthContext: SignOut called");try{await Pu(null),localStorage.removeItem("client_session"),r(null),s(null),c(null),d(null),t&&!((v=t.user_metadata)!=null&&v.is_client)&&await z.auth.signOut(),console.log("AuthContext: SignOut completed")}catch(b){console.error("AuthContext: SignOut error:",b)}}};return o.jsx(fv.Provider,{value:m,children:e})}function kr(){const e=p.useContext(fv);if(e===void 0)throw console.error("useAuth called outside AuthProvider"),new Error("useAuth must be used within an AuthProvider");return e}const mv=p.createContext(void 0);function nC({children:e}){const[t,r]=p.useState(()=>localStorage.getItem("theme")||"dark");p.useEffect(()=>{localStorage.setItem("theme",t),document.documentElement.classList.remove("light","dark"),document.documentElement.classList.add(t)},[t]);const n=()=>{r(s=>s==="light"?"dark":"light")};return o.jsx(mv.Provider,{value:{theme:t,toggleTheme:n},children:e})}function Ue(){const e=p.useContext(mv);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}const pv=p.createContext(void 0);function sC({children:e}){const[t,r]=p.useState([]),{theme:n}=Ue(),s=p.useCallback(a=>{const l=Date.now().toString();r(c=>[...c,{id:l,...a}]),setTimeout(()=>r(c=>c.filter(u=>u.id!==l)),4e3)},[]),i=p.useCallback(a=>{r(l=>l.filter(c=>c.id!==a))},[]);return o.jsxs(pv.Provider,{value:{toasts:t,push:s,remove:i},children:[e,o.jsx("div",{className:"fixed right-4 bottom-4 z-50 flex flex-col gap-3",children:t.map(a=>o.jsx("div",{className:`max-w-sm w-full px-4 py-3 rounded-lg shadow-md text-sm border animate-slide-in-right transition-all duration-200 micro-bounce ${n==="light"?a.type==="error"?"bg-red-50 border-red-200 text-red-800":a.type==="info"?"bg-blue-50 border-blue-200 text-blue-800":"bg-green-50 border-green-200 text-green-800":a.type==="error"?"bg-gradient-to-r from-red-500/20 to-pink-500/20 border-red-400/30 text-white":a.type==="info"?"bg-gradient-to-r from-slate-500/20 to-slate-600/20 border-slate-400/30 text-white":"bg-gradient-to-r from-green-500/20 to-emerald-500/20 border-green-400/30 text-white"}`,role:"status","aria-live":"polite",children:a.message},a.id))})]})}function ts(){const e=p.useContext(pv);if(!e)throw new Error("useToast must be used within ToastProvider");return e}const T0=()=>{if(typeof window>"u"||!("IntersectionObserver"in window))return;const e=new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&(r.target.classList.add("visible"),e.unobserve(r.target))})},{threshold:.1,rootMargin:"50px"});return document.querySelectorAll("[data-animate]").forEach(t=>{e.observe(t)}),e},P0=()=>{document.querySelectorAll(".stagger-children").forEach(e=>{const t=e.children;Array.from(t).forEach((r,n)=>{r.style.setProperty("--index",n.toString()),r.style.setProperty("--stagger","0.1s")})})},$0=()=>{if(typeof window>"u"||!("performance"in window))return;let e=performance.now(),t=0;const r=()=>{t++;const n=performance.now();if(n>=e+1e3){const s=Math.round(t*1e3/(n-e));s<30&&console.warn(`Low FPS detected: ${s}fps`),t=0,e=n}requestAnimationFrame(r)};r()},iC=()=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{T0(),P0(),$0()}):(T0(),P0(),$0())};class oC extends vt.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,r){console.error("Error caught by boundary:",t,r)}render(){var t;return this.state.hasError?o.jsx("div",{className:"min-h-screen bg-[#111111] flex items-center justify-center",children:o.jsxs("div",{className:"text-center animate-fade-in max-w-md mx-auto p-8",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-red-500 to-orange-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:o.jsx("span",{className:"text-white text-2xl",children:""})}),o.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Something went wrong"}),o.jsx("p",{className:"text-white/70 mb-4",children:((t=this.state.error)==null?void 0:t.message)||"An unexpected error occurred"}),o.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-xl transition-all duration-200 font-medium shadow-lg hover:scale-105",children:"Reload Page"})]})}):this.props.children}}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var aC={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ue=(e,t)=>{const r=p.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...u},d)=>p.createElement("svg",{ref:d,...aC,width:s,height:s,stroke:n,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${lC(e)}`,l].join(" "),...u},[...t.map(([h,f])=>p.createElement(h,f)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=ue("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=ue("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=ue("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=ue("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ic=ue("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=ue("BookmarkPlus",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=ue("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=ue("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=ue("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=ue("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const em=ue("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=ue("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=ue("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=ue("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=ue("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=ue("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=ue("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=ue("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=ue("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=ue("FolderInput",[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=ue("FolderOpen",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=ue("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=ue("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=ue("Frame",[["line",{x1:"22",x2:"2",y1:"6",y2:"6",key:"15w7dq"}],["line",{x1:"22",x2:"2",y1:"18",y2:"18",key:"1ip48p"}],["line",{x1:"6",x2:"6",y1:"2",y2:"22",key:"a2lnyx"}],["line",{x1:"18",x2:"18",y1:"2",y2:"22",key:"8vb6jd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=ue("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=ue("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=ue("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=ue("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=ue("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=ue("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=ue("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=ue("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=ue("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=ue("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=ue("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=ue("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=ue("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=ue("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=ue("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=ue("MousePointerClick",[["path",{d:"m9 9 5 12 1.8-5.2L21 14Z",key:"1b76lo"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zl=ue("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=ue("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=ue("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=ue("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=ue("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=ue("Redo",[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=ue("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=ue("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=ue("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mh=ue("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=ue("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=ue("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=ue("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=ue("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=ue("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=ue("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=ue("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PC=ue("Undo",[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=ue("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=ue("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=ue("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=ue("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=ue("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),nm="/assets/advertomedia2024-BzvbmLam.png",ec=(...e)=>e.filter(Boolean).join(" ");function Ev(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Ev(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function $C(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Ev(e))&&(n&&(n+=" "),n+=t);return n}const sm="-",AC=e=>{const t=DC(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:a=>{const l=a.split(sm);return l[0]===""&&l.length!==1&&l.shift(),Tv(l,t)||RC(a)},getConflictingClassGroupIds:(a,l)=>{const c=r[a]||[];return l&&n[a]?[...c,...n[a]]:c}}},Tv=(e,t)=>{var a;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?Tv(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const i=e.join(sm);return(a=t.validators.find(({validator:l})=>l(i)))==null?void 0:a.classGroupId},M0=/^\[(.+)\]$/,RC=e=>{if(M0.test(e)){const t=M0.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},DC=e=>{const{theme:t,classGroups:r}=e,n={nextPart:new Map,validators:[]};for(const s in r)ph(r[s],n,s,t);return n},ph=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const i=s===""?t:O0(t,s);i.classGroupId=r;return}if(typeof s=="function"){if(MC(s)){ph(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([i,a])=>{ph(a,O0(t,i),r,n)})})},O0=(e,t)=>{let r=e;return t.split(sm).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},MC=e=>e.isThemeGetter,OC=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(i,a)=>{r.set(i,a),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let a=r.get(i);if(a!==void 0)return a;if((a=n.get(i))!==void 0)return s(i,a),a},set(i,a){r.has(i)?r.set(i,a):s(i,a)}}},gh="!",xh=":",LC=xh.length,FC=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=s=>{const i=[];let a=0,l=0,c=0,u;for(let v=0;v<s.length;v++){let b=s[v];if(a===0&&l===0){if(b===xh){i.push(s.slice(c,v)),c=v+LC;continue}if(b==="/"){u=v;continue}}b==="["?a++:b==="]"?a--:b==="("?l++:b===")"&&l--}const d=i.length===0?s:s.substring(c),h=IC(d),f=h!==d,m=u&&u>c?u-c:void 0;return{modifiers:i,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}};if(t){const s=t+xh,i=n;n=a=>a.startsWith(s)?i(a.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:a,maybePostfixModifierPosition:void 0}}if(r){const s=n;n=i=>r({className:i,parseClassName:s})}return n},IC=e=>e.endsWith(gh)?e.substring(0,e.length-1):e.startsWith(gh)?e.substring(1):e,BC=e=>{const t=Object.fromEntries(e.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const s=[];let i=[];return n.forEach(a=>{a[0]==="["||t[a]?(s.push(...i.sort(),a),i=[]):i.push(a)}),s.push(...i.sort()),s}},zC=e=>({cache:OC(e.cacheSize),parseClassName:FC(e),sortModifiers:BC(e),...AC(e)}),UC=/\s+/,VC=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:i}=t,a=[],l=e.trim().split(UC);let c="";for(let u=l.length-1;u>=0;u-=1){const d=l[u],{isExternal:h,modifiers:f,hasImportantModifier:m,baseClassName:v,maybePostfixModifierPosition:b}=r(d);if(h){c=d+(c.length>0?" "+c:c);continue}let w=!!b,y=n(w?v.substring(0,b):v);if(!y){if(!w){c=d+(c.length>0?" "+c:c);continue}if(y=n(v),!y){c=d+(c.length>0?" "+c:c);continue}w=!1}const x=i(f).join(":"),g=m?x+gh:x,_=g+y;if(a.includes(_))continue;a.push(_);const k=s(y,w);for(let S=0;S<k.length;++S){const N=k[S];a.push(g+N)}c=d+(c.length>0?" "+c:c)}return c};function qC(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Pv(t))&&(n&&(n+=" "),n+=r);return n}const Pv=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Pv(e[n]))&&(r&&(r+=" "),r+=t);return r};function WC(e,...t){let r,n,s,i=a;function a(c){const u=t.reduce((d,h)=>h(d),e());return r=zC(u),n=r.cache.get,s=r.cache.set,i=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=VC(c,r);return s(c,d),d}return function(){return i(qC.apply(null,arguments))}}const ht=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},$v=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Av=/^\((?:(\w[\w-]*):)?(.+)\)$/i,HC=/^\d+\/\d+$/,KC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,GC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,YC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,JC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,XC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,qs=e=>HC.test(e),Ee=e=>!!e&&!Number.isNaN(Number(e)),kn=e=>!!e&&Number.isInteger(Number(e)),Ru=e=>e.endsWith("%")&&Ee(e.slice(0,-1)),en=e=>KC.test(e),QC=()=>!0,ZC=e=>GC.test(e)&&!YC.test(e),Rv=()=>!1,eE=e=>JC.test(e),tE=e=>XC.test(e),rE=e=>!le(e)&&!ce(e),nE=e=>Fi(e,Ov,Rv),le=e=>$v.test(e),ls=e=>Fi(e,Lv,ZC),Du=e=>Fi(e,lE,Ee),L0=e=>Fi(e,Dv,Rv),sE=e=>Fi(e,Mv,tE),Ka=e=>Fi(e,Fv,eE),ce=e=>Av.test(e),ro=e=>Ii(e,Lv),iE=e=>Ii(e,cE),F0=e=>Ii(e,Dv),oE=e=>Ii(e,Ov),aE=e=>Ii(e,Mv),Ga=e=>Ii(e,Fv,!0),Fi=(e,t,r)=>{const n=$v.exec(e);return n?n[1]?t(n[1]):r(n[2]):!1},Ii=(e,t,r=!1)=>{const n=Av.exec(e);return n?n[1]?t(n[1]):r:!1},Dv=e=>e==="position"||e==="percentage",Mv=e=>e==="image"||e==="url",Ov=e=>e==="length"||e==="size"||e==="bg-size",Lv=e=>e==="length",lE=e=>e==="number",cE=e=>e==="family-name",Fv=e=>e==="shadow",uE=()=>{const e=ht("color"),t=ht("font"),r=ht("text"),n=ht("font-weight"),s=ht("tracking"),i=ht("leading"),a=ht("breakpoint"),l=ht("container"),c=ht("spacing"),u=ht("radius"),d=ht("shadow"),h=ht("inset-shadow"),f=ht("text-shadow"),m=ht("drop-shadow"),v=ht("blur"),b=ht("perspective"),w=ht("aspect"),y=ht("ease"),x=ht("animate"),g=()=>["auto","avoid","all","avoid-page","page","left","right","column"],_=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],k=()=>[..._(),ce,le],S=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto","contain","none"],E=()=>[ce,le,c],O=()=>[qs,"full","auto",...E()],D=()=>[kn,"none","subgrid",ce,le],P=()=>["auto",{span:["full",kn,ce,le]},kn,ce,le],te=()=>[kn,"auto",ce,le],B=()=>["auto","min","max","fr",ce,le],he=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Z=()=>["start","end","center","stretch","center-safe","end-safe"],ne=()=>["auto",...E()],fe=()=>[qs,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...E()],R=()=>[e,ce,le],re=()=>[..._(),F0,L0,{position:[ce,le]}],ae=()=>["no-repeat",{repeat:["","x","y","space","round"]}],V=()=>["auto","cover","contain",oE,nE,{size:[ce,le]}],pe=()=>[Ru,ro,ls],ye=()=>["","none","full",u,ce,le],ve=()=>["",Ee,ro,ls],Se=()=>["solid","dashed","dotted","double"],be=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],K=()=>[Ee,Ru,F0,L0],q=()=>["","none",v,ce,le],De=()=>["none",Ee,ce,le],me=()=>["none",Ee,ce,le],Ve=()=>[Ee,ce,le],Le=()=>[qs,"full",...E()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[en],breakpoint:[en],color:[QC],container:[en],"drop-shadow":[en],ease:["in","out","in-out"],font:[rE],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[en],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[en],shadow:[en],spacing:["px",Ee],text:[en],"text-shadow":[en],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",qs,le,ce,w]}],container:["container"],columns:[{columns:[Ee,le,ce,l]}],"break-after":[{"break-after":g()}],"break-before":[{"break-before":g()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:k()}],overflow:[{overflow:S()}],"overflow-x":[{"overflow-x":S()}],"overflow-y":[{"overflow-y":S()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:O()}],"inset-x":[{"inset-x":O()}],"inset-y":[{"inset-y":O()}],start:[{start:O()}],end:[{end:O()}],top:[{top:O()}],right:[{right:O()}],bottom:[{bottom:O()}],left:[{left:O()}],visibility:["visible","invisible","collapse"],z:[{z:[kn,"auto",ce,le]}],basis:[{basis:[qs,"full","auto",l,...E()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ee,qs,"auto","initial","none",le]}],grow:[{grow:["",Ee,ce,le]}],shrink:[{shrink:["",Ee,ce,le]}],order:[{order:[kn,"first","last","none",ce,le]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:P()}],"col-start":[{"col-start":te()}],"col-end":[{"col-end":te()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:P()}],"row-start":[{"row-start":te()}],"row-end":[{"row-end":te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":B()}],"auto-rows":[{"auto-rows":B()}],gap:[{gap:E()}],"gap-x":[{"gap-x":E()}],"gap-y":[{"gap-y":E()}],"justify-content":[{justify:[...he(),"normal"]}],"justify-items":[{"justify-items":[...Z(),"normal"]}],"justify-self":[{"justify-self":["auto",...Z()]}],"align-content":[{content:["normal",...he()]}],"align-items":[{items:[...Z(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Z(),{baseline:["","last"]}]}],"place-content":[{"place-content":he()}],"place-items":[{"place-items":[...Z(),"baseline"]}],"place-self":[{"place-self":["auto",...Z()]}],p:[{p:E()}],px:[{px:E()}],py:[{py:E()}],ps:[{ps:E()}],pe:[{pe:E()}],pt:[{pt:E()}],pr:[{pr:E()}],pb:[{pb:E()}],pl:[{pl:E()}],m:[{m:ne()}],mx:[{mx:ne()}],my:[{my:ne()}],ms:[{ms:ne()}],me:[{me:ne()}],mt:[{mt:ne()}],mr:[{mr:ne()}],mb:[{mb:ne()}],ml:[{ml:ne()}],"space-x":[{"space-x":E()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":E()}],"space-y-reverse":["space-y-reverse"],size:[{size:fe()}],w:[{w:[l,"screen",...fe()]}],"min-w":[{"min-w":[l,"screen","none",...fe()]}],"max-w":[{"max-w":[l,"screen","none","prose",{screen:[a]},...fe()]}],h:[{h:["screen","lh",...fe()]}],"min-h":[{"min-h":["screen","lh","none",...fe()]}],"max-h":[{"max-h":["screen","lh",...fe()]}],"font-size":[{text:["base",r,ro,ls]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,ce,Du]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Ru,le]}],"font-family":[{font:[iE,le,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,ce,le]}],"line-clamp":[{"line-clamp":[Ee,"none",ce,Du]}],leading:[{leading:[i,...E()]}],"list-image":[{"list-image":["none",ce,le]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ce,le]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:R()}],"text-color":[{text:R()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Se(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ee,"from-font","auto",ce,ls]}],"text-decoration-color":[{decoration:R()}],"underline-offset":[{"underline-offset":[Ee,"auto",ce,le]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ce,le]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ce,le]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:re()}],"bg-repeat":[{bg:ae()}],"bg-size":[{bg:V()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},kn,ce,le],radial:["",ce,le],conic:[kn,ce,le]},aE,sE]}],"bg-color":[{bg:R()}],"gradient-from-pos":[{from:pe()}],"gradient-via-pos":[{via:pe()}],"gradient-to-pos":[{to:pe()}],"gradient-from":[{from:R()}],"gradient-via":[{via:R()}],"gradient-to":[{to:R()}],rounded:[{rounded:ye()}],"rounded-s":[{"rounded-s":ye()}],"rounded-e":[{"rounded-e":ye()}],"rounded-t":[{"rounded-t":ye()}],"rounded-r":[{"rounded-r":ye()}],"rounded-b":[{"rounded-b":ye()}],"rounded-l":[{"rounded-l":ye()}],"rounded-ss":[{"rounded-ss":ye()}],"rounded-se":[{"rounded-se":ye()}],"rounded-ee":[{"rounded-ee":ye()}],"rounded-es":[{"rounded-es":ye()}],"rounded-tl":[{"rounded-tl":ye()}],"rounded-tr":[{"rounded-tr":ye()}],"rounded-br":[{"rounded-br":ye()}],"rounded-bl":[{"rounded-bl":ye()}],"border-w":[{border:ve()}],"border-w-x":[{"border-x":ve()}],"border-w-y":[{"border-y":ve()}],"border-w-s":[{"border-s":ve()}],"border-w-e":[{"border-e":ve()}],"border-w-t":[{"border-t":ve()}],"border-w-r":[{"border-r":ve()}],"border-w-b":[{"border-b":ve()}],"border-w-l":[{"border-l":ve()}],"divide-x":[{"divide-x":ve()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ve()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Se(),"hidden","none"]}],"divide-style":[{divide:[...Se(),"hidden","none"]}],"border-color":[{border:R()}],"border-color-x":[{"border-x":R()}],"border-color-y":[{"border-y":R()}],"border-color-s":[{"border-s":R()}],"border-color-e":[{"border-e":R()}],"border-color-t":[{"border-t":R()}],"border-color-r":[{"border-r":R()}],"border-color-b":[{"border-b":R()}],"border-color-l":[{"border-l":R()}],"divide-color":[{divide:R()}],"outline-style":[{outline:[...Se(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ee,ce,le]}],"outline-w":[{outline:["",Ee,ro,ls]}],"outline-color":[{outline:R()}],shadow:[{shadow:["","none",d,Ga,Ka]}],"shadow-color":[{shadow:R()}],"inset-shadow":[{"inset-shadow":["none",h,Ga,Ka]}],"inset-shadow-color":[{"inset-shadow":R()}],"ring-w":[{ring:ve()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:R()}],"ring-offset-w":[{"ring-offset":[Ee,ls]}],"ring-offset-color":[{"ring-offset":R()}],"inset-ring-w":[{"inset-ring":ve()}],"inset-ring-color":[{"inset-ring":R()}],"text-shadow":[{"text-shadow":["none",f,Ga,Ka]}],"text-shadow-color":[{"text-shadow":R()}],opacity:[{opacity:[Ee,ce,le]}],"mix-blend":[{"mix-blend":[...be(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":be()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ee]}],"mask-image-linear-from-pos":[{"mask-linear-from":K()}],"mask-image-linear-to-pos":[{"mask-linear-to":K()}],"mask-image-linear-from-color":[{"mask-linear-from":R()}],"mask-image-linear-to-color":[{"mask-linear-to":R()}],"mask-image-t-from-pos":[{"mask-t-from":K()}],"mask-image-t-to-pos":[{"mask-t-to":K()}],"mask-image-t-from-color":[{"mask-t-from":R()}],"mask-image-t-to-color":[{"mask-t-to":R()}],"mask-image-r-from-pos":[{"mask-r-from":K()}],"mask-image-r-to-pos":[{"mask-r-to":K()}],"mask-image-r-from-color":[{"mask-r-from":R()}],"mask-image-r-to-color":[{"mask-r-to":R()}],"mask-image-b-from-pos":[{"mask-b-from":K()}],"mask-image-b-to-pos":[{"mask-b-to":K()}],"mask-image-b-from-color":[{"mask-b-from":R()}],"mask-image-b-to-color":[{"mask-b-to":R()}],"mask-image-l-from-pos":[{"mask-l-from":K()}],"mask-image-l-to-pos":[{"mask-l-to":K()}],"mask-image-l-from-color":[{"mask-l-from":R()}],"mask-image-l-to-color":[{"mask-l-to":R()}],"mask-image-x-from-pos":[{"mask-x-from":K()}],"mask-image-x-to-pos":[{"mask-x-to":K()}],"mask-image-x-from-color":[{"mask-x-from":R()}],"mask-image-x-to-color":[{"mask-x-to":R()}],"mask-image-y-from-pos":[{"mask-y-from":K()}],"mask-image-y-to-pos":[{"mask-y-to":K()}],"mask-image-y-from-color":[{"mask-y-from":R()}],"mask-image-y-to-color":[{"mask-y-to":R()}],"mask-image-radial":[{"mask-radial":[ce,le]}],"mask-image-radial-from-pos":[{"mask-radial-from":K()}],"mask-image-radial-to-pos":[{"mask-radial-to":K()}],"mask-image-radial-from-color":[{"mask-radial-from":R()}],"mask-image-radial-to-color":[{"mask-radial-to":R()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":_()}],"mask-image-conic-pos":[{"mask-conic":[Ee]}],"mask-image-conic-from-pos":[{"mask-conic-from":K()}],"mask-image-conic-to-pos":[{"mask-conic-to":K()}],"mask-image-conic-from-color":[{"mask-conic-from":R()}],"mask-image-conic-to-color":[{"mask-conic-to":R()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:re()}],"mask-repeat":[{mask:ae()}],"mask-size":[{mask:V()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ce,le]}],filter:[{filter:["","none",ce,le]}],blur:[{blur:q()}],brightness:[{brightness:[Ee,ce,le]}],contrast:[{contrast:[Ee,ce,le]}],"drop-shadow":[{"drop-shadow":["","none",m,Ga,Ka]}],"drop-shadow-color":[{"drop-shadow":R()}],grayscale:[{grayscale:["",Ee,ce,le]}],"hue-rotate":[{"hue-rotate":[Ee,ce,le]}],invert:[{invert:["",Ee,ce,le]}],saturate:[{saturate:[Ee,ce,le]}],sepia:[{sepia:["",Ee,ce,le]}],"backdrop-filter":[{"backdrop-filter":["","none",ce,le]}],"backdrop-blur":[{"backdrop-blur":q()}],"backdrop-brightness":[{"backdrop-brightness":[Ee,ce,le]}],"backdrop-contrast":[{"backdrop-contrast":[Ee,ce,le]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ee,ce,le]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ee,ce,le]}],"backdrop-invert":[{"backdrop-invert":["",Ee,ce,le]}],"backdrop-opacity":[{"backdrop-opacity":[Ee,ce,le]}],"backdrop-saturate":[{"backdrop-saturate":[Ee,ce,le]}],"backdrop-sepia":[{"backdrop-sepia":["",Ee,ce,le]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":E()}],"border-spacing-x":[{"border-spacing-x":E()}],"border-spacing-y":[{"border-spacing-y":E()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ce,le]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ee,"initial",ce,le]}],ease:[{ease:["linear","initial",y,ce,le]}],delay:[{delay:[Ee,ce,le]}],animate:[{animate:["none",x,ce,le]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,ce,le]}],"perspective-origin":[{"perspective-origin":k()}],rotate:[{rotate:De()}],"rotate-x":[{"rotate-x":De()}],"rotate-y":[{"rotate-y":De()}],"rotate-z":[{"rotate-z":De()}],scale:[{scale:me()}],"scale-x":[{"scale-x":me()}],"scale-y":[{"scale-y":me()}],"scale-z":[{"scale-z":me()}],"scale-3d":["scale-3d"],skew:[{skew:Ve()}],"skew-x":[{"skew-x":Ve()}],"skew-y":[{"skew-y":Ve()}],transform:[{transform:[ce,le,"","none","gpu","cpu"]}],"transform-origin":[{origin:k()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Le()}],"translate-x":[{"translate-x":Le()}],"translate-y":[{"translate-y":Le()}],"translate-z":[{"translate-z":Le()}],"translate-none":["translate-none"],accent:[{accent:R()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:R()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ce,le]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ce,le]}],fill:[{fill:["none",...R()]}],"stroke-w":[{stroke:[Ee,ro,ls,Du]}],stroke:[{stroke:["none",...R()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},dE=WC(uE);function tc(...e){return dE($C(e))}const im=p.createContext({});function om(e){const t=p.useRef(null);return t.current===null&&(t.current=e()),t.current}const am=typeof window<"u",Iv=am?p.useLayoutEffect:p.useEffect,Bc=p.createContext(null);function lm(e,t){e.indexOf(t)===-1&&e.push(t)}function cm(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const gn=(e,t,r)=>r>t?t:r<e?e:r;let rc=()=>{};const xn={},Bv=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function zv(e){return typeof e=="object"&&e!==null}const Uv=e=>/^0[^.\s]+$/u.test(e);function um(e){let t;return()=>(t===void 0&&(t=e()),t)}const br=e=>e,hE=(e,t)=>r=>t(e(r)),ya=(...e)=>e.reduce(hE),Qo=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class dm{constructor(){this.subscriptions=[]}add(t){return lm(this.subscriptions,t),()=>cm(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const a=this.subscriptions[i];a&&a(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Yr=e=>e*1e3,xr=e=>e/1e3;function Vv(e,t){return t?e*(1e3/t):0}const qv=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,fE=1e-7,mE=12;function pE(e,t,r,n,s){let i,a,l=0;do a=t+(r-t)/2,i=qv(a,n,s)-e,i>0?r=a:t=a;while(Math.abs(i)>fE&&++l<mE);return a}function ba(e,t,r,n){if(e===t&&r===n)return br;const s=i=>pE(i,0,1,e,r);return i=>i===0||i===1?i:qv(s(i),t,n)}const Wv=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Hv=e=>t=>1-e(1-t),Kv=ba(.33,1.53,.69,.99),hm=Hv(Kv),Gv=Wv(hm),Yv=e=>(e*=2)<1?.5*hm(e):.5*(2-Math.pow(2,-10*(e-1))),fm=e=>1-Math.sin(Math.acos(e)),Jv=Hv(fm),Xv=Wv(fm),gE=ba(.42,0,1,1),xE=ba(0,0,.58,1),Qv=ba(.42,0,.58,1),yE=e=>Array.isArray(e)&&typeof e[0]!="number",Zv=e=>Array.isArray(e)&&typeof e[0]=="number",I0={linear:br,easeIn:gE,easeInOut:Qv,easeOut:xE,circIn:fm,circInOut:Xv,circOut:Jv,backIn:hm,backInOut:Gv,backOut:Kv,anticipate:Yv},bE=e=>typeof e=="string",B0=e=>{if(Zv(e)){rc(e.length===4);const[t,r,n,s]=e;return ba(t,r,n,s)}else if(bE(e))return rc(I0[e]!==void 0),I0[e];return e},Ya=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"],z0={value:null,addProjectionMetrics:null};function vE(e,t){let r=new Set,n=new Set,s=!1,i=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1},c=0;function u(h){a.has(h)&&(d.schedule(h),e()),c++,h(l)}const d={schedule:(h,f=!1,m=!1)=>{const b=m&&s?r:n;return f&&a.add(h),b.has(h)||b.add(h),h},cancel:h=>{n.delete(h),a.delete(h)},process:h=>{if(l=h,s){i=!0;return}s=!0,[r,n]=[n,r],r.forEach(u),t&&z0.value&&z0.value.frameloop[t].push(c),c=0,r.clear(),s=!1,i&&(i=!1,d.process(h))}};return d}const wE=40;function ew(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,a=Ya.reduce((g,_)=>(g[_]=vE(i,t?_:void 0),g),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:h,preRender:f,render:m,postRender:v}=a,b=()=>{const g=xn.useManualTiming?s.timestamp:performance.now();r=!1,xn.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(g-s.timestamp,wE),1)),s.timestamp=g,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),f.process(s),m.process(s),v.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(b))},w=()=>{r=!0,n=!0,s.isProcessing||e(b)};return{schedule:Ya.reduce((g,_)=>{const k=a[_];return g[_]=(S,N=!1,E=!1)=>(r||w(),k.schedule(S,N,E)),g},{}),cancel:g=>{for(let _=0;_<Ya.length;_++)a[Ya[_]].cancel(g)},state:s,steps:a}}const{schedule:Je,cancel:Gn,state:kt,steps:Mu}=ew(typeof requestAnimationFrame<"u"?requestAnimationFrame:br,!0);let gl;function _E(){gl=void 0}const Kt={now:()=>(gl===void 0&&Kt.set(kt.isProcessing||xn.useManualTiming?kt.timestamp:performance.now()),gl),set:e=>{gl=e,queueMicrotask(_E)}},tw=e=>t=>typeof t=="string"&&t.startsWith(e),mm=tw("--"),jE=tw("var(--"),pm=e=>jE(e)?kE.test(e.split("/*")[0].trim()):!1,kE=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Bi={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Zo={...Bi,transform:e=>gn(0,1,e)},Ja={...Bi,default:1},jo=e=>Math.round(e*1e5)/1e5,gm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function NE(e){return e==null}const SE=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,xm=(e,t)=>r=>!!(typeof r=="string"&&SE.test(r)&&r.startsWith(e)||t&&!NE(r)&&Object.prototype.hasOwnProperty.call(r,t)),rw=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,i,a,l]=n.match(gm);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},CE=e=>gn(0,255,e),Ou={...Bi,transform:e=>Math.round(CE(e))},ys={test:xm("rgb","red"),parse:rw("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Ou.transform(e)+", "+Ou.transform(t)+", "+Ou.transform(r)+", "+jo(Zo.transform(n))+")"};function EE(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const yh={test:xm("#"),parse:EE,transform:ys.transform},va=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Cn=va("deg"),Jr=va("%"),we=va("px"),TE=va("vh"),PE=va("vw"),U0={...Jr,parse:e=>Jr.parse(e)/100,transform:e=>Jr.transform(e*100)},ii={test:xm("hsl","hue"),parse:rw("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Jr.transform(jo(t))+", "+Jr.transform(jo(r))+", "+jo(Zo.transform(n))+")"},ct={test:e=>ys.test(e)||yh.test(e)||ii.test(e),parse:e=>ys.test(e)?ys.parse(e):ii.test(e)?ii.parse(e):yh.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ys.transform(e):ii.transform(e),getAnimatableNone:e=>{const t=ct.parse(e);return t.alpha=0,ct.transform(t)}},$E=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function AE(e){var t,r;return isNaN(e)&&typeof e=="string"&&(((t=e.match(gm))==null?void 0:t.length)||0)+(((r=e.match($E))==null?void 0:r.length)||0)>0}const nw="number",sw="color",RE="var",DE="var(",V0="${}",ME=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function ea(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const l=t.replace(ME,c=>(ct.test(c)?(n.color.push(i),s.push(sw),r.push(ct.parse(c))):c.startsWith(DE)?(n.var.push(i),s.push(RE),r.push(c)):(n.number.push(i),s.push(nw),r.push(parseFloat(c))),++i,V0)).split(V0);return{values:r,split:l,indexes:n,types:s}}function iw(e){return ea(e).values}function ow(e){const{split:t,types:r}=ea(e),n=t.length;return s=>{let i="";for(let a=0;a<n;a++)if(i+=t[a],s[a]!==void 0){const l=r[a];l===nw?i+=jo(s[a]):l===sw?i+=ct.transform(s[a]):i+=s[a]}return i}}const OE=e=>typeof e=="number"?0:ct.test(e)?ct.getAnimatableNone(e):e;function LE(e){const t=iw(e);return ow(e)(t.map(OE))}const Yn={test:AE,parse:iw,createTransformer:ow,getAnimatableNone:LE};function Lu(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function FE({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,a=0;if(!t)s=i=a=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;s=Lu(c,l,e+1/3),i=Lu(c,l,e),a=Lu(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(a*255),alpha:n}}function nc(e,t){return r=>r>0?t:e}const Ze=(e,t,r)=>e+(t-e)*r,Fu=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},IE=[yh,ys,ii],BE=e=>IE.find(t=>t.test(e));function q0(e){const t=BE(e);if(!t)return!1;let r=t.parse(e);return t===ii&&(r=FE(r)),r}const W0=(e,t)=>{const r=q0(e),n=q0(t);if(!r||!n)return nc(e,t);const s={...r};return i=>(s.red=Fu(r.red,n.red,i),s.green=Fu(r.green,n.green,i),s.blue=Fu(r.blue,n.blue,i),s.alpha=Ze(r.alpha,n.alpha,i),ys.transform(s))},bh=new Set(["none","hidden"]);function zE(e,t){return bh.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function UE(e,t){return r=>Ze(e,t,r)}function ym(e){return typeof e=="number"?UE:typeof e=="string"?pm(e)?nc:ct.test(e)?W0:WE:Array.isArray(e)?aw:typeof e=="object"?ct.test(e)?W0:VE:nc}function aw(e,t){const r=[...e],n=r.length,s=e.map((i,a)=>ym(i)(i,t[a]));return i=>{for(let a=0;a<n;a++)r[a]=s[a](i);return r}}function VE(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=ym(e[s])(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function qE(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],a=e.indexes[i][n[i]],l=e.values[a]??0;r[s]=l,n[i]++}return r}const WE=(e,t)=>{const r=Yn.createTransformer(t),n=ea(e),s=ea(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?bh.has(e)&&!s.values.length||bh.has(t)&&!n.values.length?zE(e,t):ya(aw(qE(n,s),s.values),r):nc(e,t)};function lw(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?Ze(e,t,r):ym(e)(e,t)}const HE=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>Je.update(t,r),stop:()=>Gn(t),now:()=>kt.isProcessing?kt.timestamp:Kt.now()}},cw=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let i=0;i<s;i++)n+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},sc=2e4;function bm(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<sc;)t+=r,n=e.next(t);return t>=sc?1/0:t}function KE(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(bm(n),sc);return{type:"keyframes",ease:i=>n.next(s*i).value/t,duration:xr(s)}}const GE=5;function uw(e,t,r){const n=Math.max(t-GE,0);return Vv(r-e(n),t-n)}const rt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Iu=.001;function YE({duration:e=rt.duration,bounce:t=rt.bounce,velocity:r=rt.velocity,mass:n=rt.mass}){let s,i,a=1-t;a=gn(rt.minDamping,rt.maxDamping,a),e=gn(rt.minDuration,rt.maxDuration,xr(e)),a<1?(s=u=>{const d=u*a,h=d*e,f=d-r,m=vh(u,a),v=Math.exp(-h);return Iu-f/m*v},i=u=>{const h=u*a*e,f=h*r+r,m=Math.pow(a,2)*Math.pow(u,2)*e,v=Math.exp(-h),b=vh(Math.pow(u,2),a);return(-s(u)+Iu>0?-1:1)*((f-m)*v)/b}):(s=u=>{const d=Math.exp(-u*e),h=(u-r)*e+1;return-Iu+d*h},i=u=>{const d=Math.exp(-u*e),h=(r-u)*(e*e);return d*h});const l=5/e,c=XE(s,i,l);if(e=Yr(e),isNaN(c))return{stiffness:rt.stiffness,damping:rt.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:e}}}const JE=12;function XE(e,t,r){let n=r;for(let s=1;s<JE;s++)n=n-e(n)/t(n);return n}function vh(e,t){return e*Math.sqrt(1-t*t)}const QE=["duration","bounce"],ZE=["stiffness","damping","mass"];function H0(e,t){return t.some(r=>e[r]!==void 0)}function e5(e){let t={velocity:rt.velocity,stiffness:rt.stiffness,damping:rt.damping,mass:rt.mass,isResolvedFromDuration:!1,...e};if(!H0(e,ZE)&&H0(e,QE))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*gn(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:rt.mass,stiffness:s,damping:i}}else{const r=YE(e);t={...t,...r,mass:rt.mass},t.isResolvedFromDuration=!0}return t}function ic(e=rt.visualDuration,t=rt.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],a=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:h,velocity:f,isResolvedFromDuration:m}=e5({...r,velocity:-xr(r.velocity||0)}),v=f||0,b=u/(2*Math.sqrt(c*d)),w=a-i,y=xr(Math.sqrt(c/d)),x=Math.abs(w)<5;n||(n=x?rt.restSpeed.granular:rt.restSpeed.default),s||(s=x?rt.restDelta.granular:rt.restDelta.default);let g;if(b<1){const k=vh(y,b);g=S=>{const N=Math.exp(-b*y*S);return a-N*((v+b*y*w)/k*Math.sin(k*S)+w*Math.cos(k*S))}}else if(b===1)g=k=>a-Math.exp(-y*k)*(w+(v+y*w)*k);else{const k=y*Math.sqrt(b*b-1);g=S=>{const N=Math.exp(-b*y*S),E=Math.min(k*S,300);return a-N*((v+b*y*w)*Math.sinh(E)+k*w*Math.cosh(E))/k}}const _={calculatedDuration:m&&h||null,next:k=>{const S=g(k);if(m)l.done=k>=h;else{let N=k===0?v:0;b<1&&(N=k===0?Yr(v):uw(g,k,S));const E=Math.abs(N)<=n,O=Math.abs(a-S)<=s;l.done=E&&O}return l.value=l.done?a:S,l},toString:()=>{const k=Math.min(bm(_),sc),S=cw(N=>_.next(k*N).value,k,30);return k+"ms "+S},toTransition:()=>{}};return _}ic.applyToOptions=e=>{const t=KE(e,100,ic);return e.ease=t.ease,e.duration=Yr(t.duration),e.type="keyframes",e};function wh({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=e[0],f={done:!1,value:h},m=E=>l!==void 0&&E<l||c!==void 0&&E>c,v=E=>l===void 0?c:c===void 0||Math.abs(l-E)<Math.abs(c-E)?l:c;let b=r*t;const w=h+b,y=a===void 0?w:a(w);y!==w&&(b=y-h);const x=E=>-b*Math.exp(-E/n),g=E=>y+x(E),_=E=>{const O=x(E),D=g(E);f.done=Math.abs(O)<=u,f.value=f.done?y:D};let k,S;const N=E=>{m(f.value)&&(k=E,S=ic({keyframes:[f.value,v(f.value)],velocity:uw(g,E,f.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return N(0),{calculatedDuration:null,next:E=>{let O=!1;return!S&&k===void 0&&(O=!0,_(E),N(E)),k!==void 0&&E>=k?S.next(E-k):(!O&&_(E),f)}}}function t5(e,t,r){const n=[],s=r||xn.mix||lw,i=e.length-1;for(let a=0;a<i;a++){let l=s(e[a],e[a+1]);if(t){const c=Array.isArray(t)?t[a]||br:t;l=ya(c,l)}n.push(l)}return n}function r5(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(rc(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=t5(t,n,s),c=l.length,u=d=>{if(a&&d<e[0])return t[0];let h=0;if(c>1)for(;h<e.length-2&&!(d<e[h+1]);h++);const f=Qo(e[h],e[h+1],d);return l[h](f)};return r?d=>u(gn(e[0],e[i-1],d)):u}function n5(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=Qo(0,t,n);e.push(Ze(r,1,s))}}function s5(e){const t=[0];return n5(t,e.length-1),t}function i5(e,t){return e.map(r=>r*t)}function o5(e,t){return e.map(()=>t||Qv).splice(0,e.length-1)}function ko({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=yE(n)?n.map(B0):B0(n),i={done:!1,value:t[0]},a=i5(r&&r.length===t.length?r:s5(t),e),l=r5(a,t,{ease:Array.isArray(s)?s:o5(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const a5=e=>e!==null;function vm(e,{repeat:t,repeatType:r="loop"},n,s=1){const i=e.filter(a5),l=s<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!l||n===void 0?i[l]:n}const l5={decay:wh,inertia:wh,tween:ko,keyframes:ko,spring:ic};function dw(e){typeof e.type=="string"&&(e.type=l5[e.type])}class wm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const c5=e=>e/100;class _m extends wm{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,s;const{motionValue:r}=this.options;r&&r.updatedAt!==Kt.now()&&this.tick(Kt.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(n=this.options).onStop)==null||s.call(n))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;dw(t);const{type:r=ko,repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:a=0}=t;let{keyframes:l}=t;const c=r||ko;c!==ko&&typeof l[0]!="number"&&(this.mixKeyframes=ya(c5,lw(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-a})),u.calculatedDuration===null&&(u.calculatedDuration=bm(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=u}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:i,mirroredGenerator:a,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:h,repeatType:f,repeatDelay:m,type:v,onUpdate:b,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const y=this.currentTime-u*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?y<0:y>s;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let g=this.currentTime,_=n;if(h){const E=Math.min(this.currentTime,s)/l;let O=Math.floor(E),D=E%1;!D&&E>=1&&(D=1),D===1&&O--,O=Math.min(O,h+1),!!(O%2)&&(f==="reverse"?(D=1-D,m&&(D-=m/l)):f==="mirror"&&(_=a)),g=gn(0,1,D)*l}const k=x?{done:!1,value:d[0]}:_.next(g);i&&(k.value=i(k.value));let{done:S}=k;!x&&c!==null&&(S=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return N&&v!==wh&&(k.value=vm(d,this.options,w,this.speed)),b&&b(k.value),N&&this.finish(),k}then(t,r){return this.finished.then(t,r)}get duration(){return xr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+xr(t)}get time(){return xr(this.currentTime)}set time(t){var r;t=Yr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Kt.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=xr(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:t=HE,startTime:r}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),(i=(s=this.options).onPlay)==null||i.call(s);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Kt.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(t=this.options).onComplete)==null||r.call(t)}cancel(){var t,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(t=this.options).onCancel)==null||r.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),t.observe(this)}}function u5(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const bs=e=>e*180/Math.PI,_h=e=>{const t=bs(Math.atan2(e[1],e[0]));return jh(t)},d5={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:_h,rotateZ:_h,skewX:e=>bs(Math.atan(e[1])),skewY:e=>bs(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},jh=e=>(e=e%360,e<0&&(e+=360),e),K0=_h,G0=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Y0=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),h5={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:G0,scaleY:Y0,scale:e=>(G0(e)+Y0(e))/2,rotateX:e=>jh(bs(Math.atan2(e[6],e[5]))),rotateY:e=>jh(bs(Math.atan2(-e[2],e[0]))),rotateZ:K0,rotate:K0,skewX:e=>bs(Math.atan(e[4])),skewY:e=>bs(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function kh(e){return e.includes("scale")?1:0}function Nh(e,t){if(!e||e==="none")return kh(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=h5,s=r;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=d5,s=l}if(!s)return kh(t);const i=n[t],a=s[1].split(",").map(m5);return typeof i=="function"?i(a):a[i]}const f5=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Nh(r,t)};function m5(e){return parseFloat(e.trim())}const zi=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ui=new Set(zi),J0=e=>e===Bi||e===we,p5=new Set(["x","y","z"]),g5=zi.filter(e=>!p5.has(e));function x5(e){const t=[];return g5.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const _s={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Nh(t,"x"),y:(e,{transform:t})=>Nh(t,"y")};_s.translateX=_s.x;_s.translateY=_s.y;const js=new Set;let Sh=!1,Ch=!1,Eh=!1;function hw(){if(Ch){const e=Array.from(js).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=x5(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,a])=>{var l;(l=n.getValue(i))==null||l.set(a)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Ch=!1,Sh=!1,js.forEach(e=>e.complete(Eh)),js.clear()}function fw(){js.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Ch=!0)})}function y5(){Eh=!0,fw(),hw(),Eh=!1}class jm{constructor(t,r,n,s,i,a=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=a}scheduleResolve(){this.state="scheduled",this.isAsync?(js.add(this),Sh||(Sh=!0,Je.read(fw),Je.resolveKeyframes(hw))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const i=s==null?void 0:s.get(),a=t[t.length-1];if(i!==void 0)t[0]=i;else if(n&&r){const l=n.readValue(r,a);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=a),s&&i===void 0&&s.set(t[0])}u5(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),js.delete(this)}cancel(){this.state==="scheduled"&&(js.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const b5=e=>e.startsWith("--");function v5(e,t,r){b5(t)?e.style.setProperty(t,r):e.style[t]=r}const w5=um(()=>window.ScrollTimeline!==void 0),_5={};function j5(e,t){const r=um(e);return()=>_5[t]??r()}const mw=j5(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),co=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,X0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:co([0,.65,.55,1]),circOut:co([.55,0,1,.45]),backIn:co([.31,.01,.66,-.59]),backOut:co([.33,1.53,.69,.99])};function pw(e,t){if(e)return typeof e=="function"?mw()?cw(e,t):"ease-out":Zv(e)?co(e):Array.isArray(e)?e.map(r=>pw(r,t)||X0.easeOut):X0[e]}function k5(e,t,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:a="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:r};c&&(d.offset=c);const h=pw(l,s);Array.isArray(h)&&(d.easing=h);const f={delay:n,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:a==="reverse"?"alternate":"normal"};return u&&(f.pseudoElement=u),e.animate(d,f)}function gw(e){return typeof e=="function"&&"applyToOptions"in e}function N5({type:e,...t}){return gw(e)&&mw()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class S5 extends wm{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:i,allowFlatten:a=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=a,this.options=t,rc(typeof t.type!="string");const u=N5(t);this.animation=k5(r,n,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=vm(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):v5(r,n,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,r;(r=(t=this.animation).finish)==null||r.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,r;this.isPseudoElement||(r=(t=this.animation).commitStyles)==null||r.call(t)}get duration(){var r,n;const t=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return xr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+xr(t)}get time(){return xr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Yr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&w5()?(this.animation.timeline=t,br):r(this)}}const xw={anticipate:Yv,backInOut:Gv,circInOut:Xv};function C5(e){return e in xw}function E5(e){typeof e.ease=="string"&&C5(e.ease)&&(e.ease=xw[e.ease])}const Q0=10;class T5 extends S5{constructor(t){E5(t),dw(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:i,...a}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const l=new _m({...a,autoplay:!1}),c=Yr(this.finishedTime??this.time);r.setWithVelocity(l.sample(c-Q0).value,l.sample(c).value,Q0),l.stop()}}const Z0=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Yn.test(e)||e==="0")&&!e.startsWith("url("));function P5(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function $5(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],a=Z0(s,t),l=Z0(i,t);return!a||!l?!1:P5(e)||(r==="spring"||gw(r))&&n}function Th(e){e.duration=0,e.type="keyframes"}const A5=new Set(["opacity","clipPath","filter","transform"]),R5=um(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function D5(e){var d;const{motionValue:t,name:r,repeatDelay:n,repeatType:s,damping:i,type:a}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return R5()&&r&&A5.has(r)&&(r!=="transform"||!u)&&!c&&!n&&s!=="mirror"&&i!==0&&a!=="inertia"}const M5=40;class O5 extends wm{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:a="loop",keyframes:l,name:c,motionValue:u,element:d,...h}){var v;super(),this.stop=()=>{var b,w;this._animation&&(this._animation.stop(),(b=this.stopTimeline)==null||b.call(this)),(w=this.keyframeResolver)==null||w.cancel()},this.createdAt=Kt.now();const f={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:a,name:c,motionValue:u,element:d,...h},m=(d==null?void 0:d.KeyframeResolver)||jm;this.keyframeResolver=new m(l,(b,w,y)=>this.onKeyframesResolved(b,w,f,!y),c,u,d),(v=this.keyframeResolver)==null||v.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:i,type:a,velocity:l,delay:c,isHandoff:u,onUpdate:d}=n;this.resolvedAt=Kt.now(),$5(t,i,a,l)||((xn.instantAnimations||!c)&&(d==null||d(vm(t,n,r))),t[0]=t[t.length-1],Th(n),n.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>M5?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},m=!u&&D5(f)?new T5({...f,element:f.motionValue.owner.current}):new _m(f);m.finished.then(()=>this.notifyFinished()).catch(br),this.pendingTimeline&&(this.stopTimeline=m.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=m}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),y5()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const L5=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function F5(e){const t=L5.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function yw(e,t,r=1){const[n,s]=F5(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const a=i.trim();return Bv(a)?parseFloat(a):a}return pm(s)?yw(s,t,r+1):s}function km(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const bw=new Set(["width","height","top","left","right","bottom",...zi]),I5={test:e=>e==="auto",parse:e=>e},vw=e=>t=>t.test(e),ww=[Bi,we,Jr,Cn,PE,TE,I5],eg=e=>ww.find(vw(e));function B5(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Uv(e):!0}const z5=new Set(["brightness","contrast","saturate","opacity"]);function U5(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(gm)||[];if(!n)return e;const s=r.replace(n,"");let i=z5.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const V5=/\b([a-z-]*)\(.*?\)/gu,Ph={...Yn,getAnimatableNone:e=>{const t=e.match(V5);return t?t.map(U5).join(" "):e}},tg={...Bi,transform:Math.round},q5={rotate:Cn,rotateX:Cn,rotateY:Cn,rotateZ:Cn,scale:Ja,scaleX:Ja,scaleY:Ja,scaleZ:Ja,skew:Cn,skewX:Cn,skewY:Cn,distance:we,translateX:we,translateY:we,translateZ:we,x:we,y:we,z:we,perspective:we,transformPerspective:we,opacity:Zo,originX:U0,originY:U0,originZ:we},Nm={borderWidth:we,borderTopWidth:we,borderRightWidth:we,borderBottomWidth:we,borderLeftWidth:we,borderRadius:we,radius:we,borderTopLeftRadius:we,borderTopRightRadius:we,borderBottomRightRadius:we,borderBottomLeftRadius:we,width:we,maxWidth:we,height:we,maxHeight:we,top:we,right:we,bottom:we,left:we,padding:we,paddingTop:we,paddingRight:we,paddingBottom:we,paddingLeft:we,margin:we,marginTop:we,marginRight:we,marginBottom:we,marginLeft:we,backgroundPositionX:we,backgroundPositionY:we,...q5,zIndex:tg,fillOpacity:Zo,strokeOpacity:Zo,numOctaves:tg},W5={...Nm,color:ct,backgroundColor:ct,outlineColor:ct,fill:ct,stroke:ct,borderColor:ct,borderTopColor:ct,borderRightColor:ct,borderBottomColor:ct,borderLeftColor:ct,filter:Ph,WebkitFilter:Ph},_w=e=>W5[e];function jw(e,t){let r=_w(e);return r!==Ph&&(r=Yn),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const H5=new Set(["auto","none","0"]);function K5(e,t,r){let n=0,s;for(;n<e.length&&!s;){const i=e[n];typeof i=="string"&&!H5.has(i)&&ea(i).values.length&&(s=e[n]),n++}if(s&&r)for(const i of t)e[i]=jw(r,s)}class G5 extends jm{constructor(t,r,n,s,i){super(t,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),pm(u))){const d=yw(u,r.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!bw.has(n)||t.length!==2)return;const[s,i]=t,a=eg(s),l=eg(i);if(a!==l)if(J0(a)&&J0(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else _s[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||B5(t[s]))&&n.push(s);n.length&&K5(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_s[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){var l;const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const i=n.length-1,a=n[i];n[i]=_s[r](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,u])=>{t.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function Y5(e,t,r){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const s=document.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const kw=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Nw(e){return zv(e)&&"offsetHeight"in e}const rg=30,J5=e=>!isNaN(parseFloat(e));class X5{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var i;const s=Kt.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=Kt.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=J5(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new dm);const n=this.events[t].add(r);return t==="change"?()=>{n(),Je.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Kt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>rg)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,rg);return Vv(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,r;(t=this.dependents)==null||t.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Si(e,t){return new X5(e,t)}const{schedule:Sm,cancel:GA}=ew(queueMicrotask,!1),Tr={x:!1,y:!1};function Sw(){return Tr.x||Tr.y}function Q5(e){return e==="x"||e==="y"?Tr[e]?null:(Tr[e]=!0,()=>{Tr[e]=!1}):Tr.x||Tr.y?null:(Tr.x=Tr.y=!0,()=>{Tr.x=Tr.y=!1})}function Cw(e,t){const r=Y5(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function ng(e){return!(e.pointerType==="touch"||Sw())}function Z5(e,t,r={}){const[n,s,i]=Cw(e,r),a=l=>{if(!ng(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=h=>{ng(h)&&(u(h),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return n.forEach(l=>{l.addEventListener("pointerenter",a,s)}),i}const Ew=(e,t)=>t?e===t?!0:Ew(e,t.parentElement):!1,Cm=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,e4=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function t4(e){return e4.has(e.tagName)||e.tabIndex!==-1}const xl=new WeakSet;function sg(e){return t=>{t.key==="Enter"&&e(t)}}function Bu(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const r4=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=sg(()=>{if(xl.has(r))return;Bu(r,"down");const s=sg(()=>{Bu(r,"up")}),i=()=>Bu(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function ig(e){return Cm(e)&&!Sw()}function n4(e,t,r={}){const[n,s,i]=Cw(e,r),a=l=>{const c=l.currentTarget;if(!ig(l))return;xl.add(c);const u=t(c,l),d=(m,v)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),xl.has(c)&&xl.delete(c),ig(m)&&typeof u=="function"&&u(m,{success:v})},h=m=>{d(m,c===window||c===document||r.useGlobalTarget||Ew(c,m.target))},f=m=>{d(m,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return n.forEach(l=>{(r.useGlobalTarget?window:l).addEventListener("pointerdown",a,s),Nw(l)&&(l.addEventListener("focus",u=>r4(u,s)),!t4(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function Tw(e){return zv(e)&&"ownerSVGElement"in e}function s4(e){return Tw(e)&&e.tagName==="svg"}const Rt=e=>!!(e&&e.getVelocity),i4=[...ww,ct,Yn],o4=e=>i4.find(vw(e)),Em=p.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function og(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function a4(...e){return t=>{let r=!1;const n=e.map(s=>{const i=og(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():og(e[s],null)}}}}function l4(...e){return p.useCallback(a4(...e),e)}class c4 extends p.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=Nw(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function u4({children:e,isPresent:t,anchorX:r,root:n}){const s=p.useId(),i=p.useRef(null),a=p.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=p.useContext(Em),c=l4(i,e==null?void 0:e.ref);return p.useInsertionEffect(()=>{const{width:u,height:d,top:h,left:f,right:m}=a.current;if(t||!i.current||!u||!d)return;const v=r==="left"?`left: ${f}`:`right: ${m}`;i.current.dataset.motionPopId=s;const b=document.createElement("style");l&&(b.nonce=l);const w=n??document.head;return w.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${u}px !important;
            height: ${d}px !important;
            ${v}px !important;
            top: ${h}px !important;
          }
        `),()=>{w.contains(b)&&w.removeChild(b)}},[t]),o.jsx(c4,{isPresent:t,childRef:i,sizeRef:a,children:p.cloneElement(e,{ref:c})})}const d4=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:a,anchorX:l,root:c})=>{const u=om(h4),d=p.useId();let h=!0,f=p.useMemo(()=>(h=!1,{id:d,initial:t,isPresent:r,custom:s,onExitComplete:m=>{u.set(m,!0);for(const v of u.values())if(!v)return;n&&n()},register:m=>(u.set(m,!1),()=>u.delete(m))}),[r,u,n]);return i&&h&&(f={...f}),p.useMemo(()=>{u.forEach((m,v)=>u.set(v,!1))},[r]),p.useEffect(()=>{!r&&!u.size&&n&&n()},[r]),a==="popLayout"&&(e=o.jsx(u4,{isPresent:r,anchorX:l,root:c,children:e})),o.jsx(Bc.Provider,{value:f,children:e})};function h4(){return new Map}function Pw(e=!0){const t=p.useContext(Bc);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,i=p.useId();p.useEffect(()=>{if(e)return s(i)},[e]);const a=p.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,a]:[!0]}const Xa=e=>e.key||"";function ag(e){const t=[];return p.Children.forEach(e,r=>{p.isValidElement(r)&&t.push(r)}),t}const f4=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:a=!1,anchorX:l="left",root:c})=>{const[u,d]=Pw(a),h=p.useMemo(()=>ag(e),[e]),f=a&&!u?[]:h.map(Xa),m=p.useRef(!0),v=p.useRef(h),b=om(()=>new Map),[w,y]=p.useState(h),[x,g]=p.useState(h);Iv(()=>{m.current=!1,v.current=h;for(let S=0;S<x.length;S++){const N=Xa(x[S]);f.includes(N)?b.delete(N):b.get(N)!==!0&&b.set(N,!1)}},[x,f.length,f.join("-")]);const _=[];if(h!==w){let S=[...h];for(let N=0;N<x.length;N++){const E=x[N],O=Xa(E);f.includes(O)||(S.splice(N,0,E),_.push(E))}return i==="wait"&&_.length&&(S=_),g(ag(S)),y(h),null}const{forceRender:k}=p.useContext(im);return o.jsx(o.Fragment,{children:x.map(S=>{const N=Xa(S),E=a&&!u?!1:h===x||f.includes(N),O=()=>{if(b.has(N))b.set(N,!0);else return;let D=!0;b.forEach(P=>{P||(D=!1)}),D&&(k==null||k(),g(v.current),a&&(d==null||d()),n&&n())};return o.jsx(d4,{isPresent:E,initial:!m.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:E?void 0:O,anchorX:l,children:S},N)})})},$w=p.createContext({strict:!1}),lg={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ci={};for(const e in lg)Ci[e]={isEnabled:t=>lg[e].some(r=>!!t[r])};function m4(e){for(const t in e)Ci[t]={...Ci[t],...e[t]}}const p4=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function oc(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||p4.has(e)}let Aw=e=>!oc(e);function g4(e){typeof e=="function"&&(Aw=t=>t.startsWith("on")?!oc(t):e(t))}try{g4(require("@emotion/is-prop-valid").default)}catch{}function x4(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(Aw(s)||r===!0&&oc(s)||!t&&!oc(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const zc=p.createContext({});function Uc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ta(e){return typeof e=="string"||Array.isArray(e)}const Tm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Pm=["initial",...Tm];function Vc(e){return Uc(e.animate)||Pm.some(t=>ta(e[t]))}function Rw(e){return!!(Vc(e)||e.variants)}function y4(e,t){if(Vc(e)){const{initial:r,animate:n}=e;return{initial:r===!1||ta(r)?r:void 0,animate:ta(n)?n:void 0}}return e.inherit!==!1?t:{}}function b4(e){const{initial:t,animate:r}=y4(e,p.useContext(zc));return p.useMemo(()=>({initial:t,animate:r}),[cg(t),cg(r)])}function cg(e){return Array.isArray(e)?e.join(" "):e}const ra={};function v4(e){for(const t in e)ra[t]=e[t],mm(t)&&(ra[t].isCSSVariable=!0)}function Dw(e,{layout:t,layoutId:r}){return Ui.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!ra[e]||e==="opacity")}const w4={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_4=zi.length;function j4(e,t,r){let n="",s=!0;for(let i=0;i<_4;i++){const a=zi[i],l=e[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||r){const u=kw(l,Nm[a]);if(!c){s=!1;const d=w4[a]||a;n+=`${d}(${u}) `}r&&(t[a]=u)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function $m(e,t,r){const{style:n,vars:s,transformOrigin:i}=e;let a=!1,l=!1;for(const c in t){const u=t[c];if(Ui.has(c)){a=!0;continue}else if(mm(c)){s[c]=u;continue}else{const d=kw(u,Nm[c]);c.startsWith("origin")?(l=!0,i[c]=d):n[c]=d}}if(t.transform||(a||r?n.transform=j4(t,e.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;n.transformOrigin=`${c} ${u} ${d}`}}const Am=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Mw(e,t,r){for(const n in t)!Rt(t[n])&&!Dw(n,r)&&(e[n]=t[n])}function k4({transformTemplate:e},t){return p.useMemo(()=>{const r=Am();return $m(r,t,e),Object.assign({},r.vars,r.style)},[t])}function N4(e,t){const r=e.style||{},n={};return Mw(n,r,e),Object.assign(n,k4(e,t)),n}function S4(e,t){const r={},n=N4(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const C4={offset:"stroke-dashoffset",array:"stroke-dasharray"},E4={offset:"strokeDashoffset",array:"strokeDasharray"};function T4(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?C4:E4;e[i.offset]=we.transform(-n);const a=we.transform(t),l=we.transform(r);e[i.array]=`${a} ${l}`}function Ow(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:i=1,pathOffset:a=0,...l},c,u,d){if($m(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:h,style:f}=e;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete h.transformBox),t!==void 0&&(h.x=t),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),s!==void 0&&T4(h,s,i,a,!1)}const Lw=()=>({...Am(),attrs:{}}),Fw=e=>typeof e=="string"&&e.toLowerCase()==="svg";function P4(e,t,r,n){const s=p.useMemo(()=>{const i=Lw();return Ow(i,t,Fw(n),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};Mw(i,e.style,e),s.style={...i,...s.style}}return s}const $4=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Rm(e){return typeof e!="string"||e.includes("-")?!1:!!($4.indexOf(e)>-1||/[A-Z]/u.test(e))}function A4(e,t,r,{latestValues:n},s,i=!1){const l=(Rm(e)?P4:S4)(t,n,s,e),c=x4(t,typeof e=="string",i),u=e!==p.Fragment?{...c,...l,ref:r}:{},{children:d}=t,h=p.useMemo(()=>Rt(d)?d.get():d,[d]);return p.createElement(e,{...u,children:h})}function ug(e){const t=[{},{}];return e==null||e.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function Dm(e,t,r,n){if(typeof t=="function"){const[s,i]=ug(n);t=t(r!==void 0?r:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=ug(n);t=t(r!==void 0?r:e.custom,s,i)}return t}function yl(e){return Rt(e)?e.get():e}function R4({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:D4(r,n,s,e),renderState:t()}}function D4(e,t,r,n){const s={},i=n(e,{});for(const f in i)s[f]=yl(i[f]);let{initial:a,animate:l}=e;const c=Vc(e),u=Rw(e);t&&u&&!c&&e.inherit!==!1&&(a===void 0&&(a=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||a===!1;const h=d?l:a;if(h&&typeof h!="boolean"&&!Uc(h)){const f=Array.isArray(h)?h:[h];for(let m=0;m<f.length;m++){const v=Dm(e,f[m]);if(v){const{transitionEnd:b,transition:w,...y}=v;for(const x in y){let g=y[x];if(Array.isArray(g)){const _=d?g.length-1:0;g=g[_]}g!==null&&(s[x]=g)}for(const x in b)s[x]=b[x]}}}return s}const Iw=e=>(t,r)=>{const n=p.useContext(zc),s=p.useContext(Bc),i=()=>R4(e,t,n,s);return r?i():om(i)};function Mm(e,t,r){var i;const{style:n}=e,s={};for(const a in n)(Rt(n[a])||t.style&&Rt(t.style[a])||Dw(a,e)||((i=r==null?void 0:r.getValue(a))==null?void 0:i.liveStyle)!==void 0)&&(s[a]=n[a]);return s}const M4=Iw({scrapeMotionValuesFromProps:Mm,createRenderState:Am});function Bw(e,t,r){const n=Mm(e,t,r);for(const s in e)if(Rt(e[s])||Rt(t[s])){const i=zi.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=e[s]}return n}const O4=Iw({scrapeMotionValuesFromProps:Bw,createRenderState:Lw}),L4=Symbol.for("motionComponentSymbol");function oi(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function F4(e,t,r){return p.useCallback(n=>{n&&e.onMount&&e.onMount(n),t&&(n?t.mount(n):t.unmount()),r&&(typeof r=="function"?r(n):oi(r)&&(r.current=n))},[t])}const Om=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),I4="framerAppearId",zw="data-"+Om(I4),Uw=p.createContext({});function B4(e,t,r,n,s){var b,w;const{visualElement:i}=p.useContext(zc),a=p.useContext($w),l=p.useContext(Bc),c=p.useContext(Em).reducedMotion,u=p.useRef(null);n=n||a.renderer,!u.current&&n&&(u.current=n(e,{visualState:t,parent:i,props:r,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=u.current,h=p.useContext(Uw);d&&!d.projection&&s&&(d.type==="html"||d.type==="svg")&&z4(u.current,r,s,h);const f=p.useRef(!1);p.useInsertionEffect(()=>{d&&f.current&&d.update(r,l)});const m=r[zw],v=p.useRef(!!m&&!((b=window.MotionHandoffIsComplete)!=null&&b.call(window,m))&&((w=window.MotionHasOptimisedAnimation)==null?void 0:w.call(window,m)));return Iv(()=>{d&&(f.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),v.current&&d.animationState&&d.animationState.animateChanges())}),p.useEffect(()=>{d&&(!v.current&&d.animationState&&d.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)==null||y.call(window,m)}),v.current=!1),d.enteringChildren=void 0)}),d}function z4(e,t,r,n){const{layoutId:s,layout:i,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:Vw(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!a||l&&oi(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:u})}function Vw(e){if(e)return e.options.allowProjection!==!1?e.projection:Vw(e.parent)}function zu(e,{forwardMotionProps:t=!1}={},r,n){r&&m4(r);const s=Rm(e)?O4:M4;function i(l,c){let u;const d={...p.useContext(Em),...l,layoutId:U4(l)},{isStatic:h}=d,f=b4(l),m=s(l,h);if(!h&&am){V4();const v=q4(d);u=v.MeasureLayout,f.visualElement=B4(e,m,d,n,v.ProjectionNode)}return o.jsxs(zc.Provider,{value:f,children:[u&&f.visualElement?o.jsx(u,{visualElement:f.visualElement,...d}):null,A4(e,l,F4(m,f.visualElement,c),m,h,t)]})}i.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const a=p.forwardRef(i);return a[L4]=e,a}function U4({layoutId:e}){const t=p.useContext(im).id;return t&&e!==void 0?t+"-"+e:e}function V4(e,t){p.useContext($w).strict}function q4(e){const{drag:t,layout:r}=Ci;if(!t&&!r)return{};const n={...t,...r};return{MeasureLayout:t!=null&&t.isEnabled(e)||r!=null&&r.isEnabled(e)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function W4(e,t){if(typeof Proxy>"u")return zu;const r=new Map,n=(i,a)=>zu(i,a,e,t),s=(i,a)=>n(i,a);return new Proxy(s,{get:(i,a)=>a==="create"?n:(r.has(a)||r.set(a,zu(a,void 0,e,t)),r.get(a))})}function qw({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function H4({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function K4(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Uu(e){return e===void 0||e===1}function $h({scale:e,scaleX:t,scaleY:r}){return!Uu(e)||!Uu(t)||!Uu(r)}function fs(e){return $h(e)||Ww(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Ww(e){return dg(e.x)||dg(e.y)}function dg(e){return e&&e!=="0%"}function ac(e,t,r){const n=e-r,s=t*n;return r+s}function hg(e,t,r,n,s){return s!==void 0&&(e=ac(e,s,n)),ac(e,r,n)+t}function Ah(e,t=0,r=1,n,s){e.min=hg(e.min,t,r,n,s),e.max=hg(e.max,t,r,n,s)}function Hw(e,{x:t,y:r}){Ah(e.x,t.translate,t.scale,t.originPoint),Ah(e.y,r.translate,r.scale,r.originPoint)}const fg=.999999999999,mg=1.0000000000001;function G4(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,a;for(let l=0;l<s;l++){i=r[l],a=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&li(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,Hw(e,a)),n&&fs(i.latestValues)&&li(e,i.latestValues))}t.x<mg&&t.x>fg&&(t.x=1),t.y<mg&&t.y>fg&&(t.y=1)}function ai(e,t){e.min=e.min+t,e.max=e.max+t}function pg(e,t,r,n,s=.5){const i=Ze(e.min,e.max,s);Ah(e,t,r,i,n)}function li(e,t){pg(e.x,t.x,t.scaleX,t.scale,t.originX),pg(e.y,t.y,t.scaleY,t.scale,t.originY)}function Kw(e,t){return qw(K4(e.getBoundingClientRect(),t))}function Y4(e,t,r){const n=Kw(e,r),{scroll:s}=t;return s&&(ai(n.x,s.offset.x),ai(n.y,s.offset.y)),n}const gg=()=>({translate:0,scale:1,origin:0,originPoint:0}),ci=()=>({x:gg(),y:gg()}),xg=()=>({min:0,max:0}),ot=()=>({x:xg(),y:xg()}),Rh={current:null},Gw={current:!1};function J4(){if(Gw.current=!0,!!am)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Rh.current=e.matches;e.addEventListener("change",t),t()}else Rh.current=!1}const X4=new WeakMap;function Q4(e,t,r){for(const n in t){const s=t[n],i=r[n];if(Rt(s))e.addValue(n,s);else if(Rt(i))e.addValue(n,Si(s,{owner:e}));else if(i!==s)if(e.hasValue(n)){const a=e.getValue(n);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=e.getStaticValue(n);e.addValue(n,Si(a!==void 0?a:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const yg=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Z4{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=jm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Kt.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,Je.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Vc(r),this.isVariantNode=Rw(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const f in h){const m=h[f];c[f]!==void 0&&Rt(m)&&m.set(c[f])}}mount(t){var r;this.current=t,X4.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),Gw.current||J4(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Rh.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var t;this.projection&&this.projection.unmount(),Gn(this.notifyUpdate),Gn(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(t=this.parent)==null||t.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=Ui.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",a=>{this.latestValues[t]=a,this.props.onUpdate&&Je.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ci){const r=Ci[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ot()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<yg.length;n++){const s=yg[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,a=t[i];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=Q4(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=Si(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(Bv(n)||Uv(n))?n=parseFloat(n):!o4(n)&&Yn.test(r)&&(n=jw(t,r)),this.setBaseTarget(t,Rt(n)?n.get():n)),Rt(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var i;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const a=Dm(this.props,r,(i=this.presenceContext)==null?void 0:i.custom);a&&(n=a[t])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Rt(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new dm),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){Sm.render(this.render)}}class Yw extends Z4{constructor(){super(...arguments),this.KeyframeResolver=G5}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Rt(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Jw(e,{style:t,vars:r},n,s){const i=e.style;let a;for(a in t)i[a]=t[a];s==null||s.applyProjectionStyles(i,n);for(a in r)i.setProperty(a,r[a])}function eT(e){return window.getComputedStyle(e)}class tT extends Yw{constructor(){super(...arguments),this.type="html",this.renderInstance=Jw}readValueFromInstance(t,r){var n;if(Ui.has(r))return(n=this.projection)!=null&&n.isProjecting?kh(r):f5(t,r);{const s=eT(t),i=(mm(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:r}){return Kw(t,r)}build(t,r,n){$m(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return Mm(t,r,n)}}const Xw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function rT(e,t,r,n){Jw(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(Xw.has(s)?s:Om(s),t.attrs[s])}class nT extends Yw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ot}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Ui.has(r)){const n=_w(r);return n&&n.default||0}return r=Xw.has(r)?r:Om(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return Bw(t,r,n)}build(t,r,n){Ow(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){rT(t,r,n,s)}mount(t){this.isSVGTag=Fw(t.tagName),super.mount(t)}}const sT=(e,t)=>Rm(e)?new nT(t):new tT(t,{allowProjection:e!==p.Fragment});function gi(e,t,r){const n=e.getProps();return Dm(n,t,r!==void 0?r:n.custom,e)}const Dh=e=>Array.isArray(e);function iT(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Si(r))}function oT(e){return Dh(e)?e[e.length-1]||0:e}function aT(e,t){const r=gi(e,t);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const a in i){const l=oT(i[a]);iT(e,a,l)}}function lT(e){return!!(Rt(e)&&e.add)}function Mh(e,t){const r=e.getValue("willChange");if(lT(r))return r.add(t);if(!r&&xn.WillChange){const n=new xn.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function Qw(e){return e.props[zw]}const cT=e=>e!==null;function uT(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(cT),i=t&&r!=="loop"&&t%2===1?0:s.length-1;return!i||n===void 0?s[i]:n}const dT={type:"spring",stiffness:500,damping:25,restSpeed:10},hT=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),fT={type:"keyframes",duration:.8},mT={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},pT=(e,{keyframes:t})=>t.length>2?fT:Ui.has(e)?e.startsWith("scale")?hT(t[1]):dT:mT;function gT({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const Lm=(e,t,r,n={},s,i)=>a=>{const l=km(n,e)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Yr(c);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:f=>{t.set(f),l.onUpdate&&l.onUpdate(f)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:s};gT(l)||Object.assign(d,pT(e,d)),d.duration&&(d.duration=Yr(d.duration)),d.repeatDelay&&(d.repeatDelay=Yr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Th(d),d.delay===0&&(h=!0)),(xn.instantAnimations||xn.skipAnimations)&&(h=!0,Th(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,h&&!i&&t.get()!==void 0){const f=uT(d.keyframes,l);if(f!==void 0){Je.update(()=>{d.onUpdate(f),d.onComplete()});return}}return l.isSync?new _m(d):new O5(d)};function xT({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function Zw(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:a,...l}=t;n&&(i=n);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const h=e.getValue(d,e.latestValues[d]??null),f=l[d];if(f===void 0||u&&xT(u,d))continue;const m={delay:r,...km(i||{},d)},v=h.get();if(v!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===v&&!m.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const y=Qw(e);if(y){const x=window.MotionHandoffAnimation(y,d,Je);x!==null&&(m.startTime=x,b=!0)}}Mh(e,d),h.start(Lm(d,h,f,e.shouldReduceMotion&&bw.has(d)?{type:!1}:m,e,b));const w=h.animation;w&&c.push(w)}return a&&Promise.all(c).then(()=>{Je.update(()=>{a&&aT(e,a)})}),c}function e_(e,t,r,n=0,s=1){const i=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),a=e.size,l=(a-1)*n;return typeof r=="function"?r(i,a):s===1?i*n:l-i*n}function Oh(e,t,r={}){var c;const n=gi(e,t,r.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(Zw(e,n,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:f}=s;return yT(e,t,u,d,h,f,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,d]=l==="beforeChildren"?[i,a]:[a,i];return u().then(()=>d())}else return Promise.all([i(),a(r.delay)])}function yT(e,t,r=0,n=0,s=0,i=1,a){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(Oh(c,t,{...a,delay:r+(typeof n=="function"?0:n)+e_(e.variantChildren,c,n,s,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function bT(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>Oh(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=Oh(e,t,r);else{const s=typeof t=="function"?gi(e,t,r.custom):t;n=Promise.all(Zw(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}function t_(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const vT=Pm.length;function r_(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?r_(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<vT;r++){const n=Pm[r],s=e.props[n];(ta(s)||s===!1)&&(t[n]=s)}return t}const wT=[...Tm].reverse(),_T=Tm.length;function jT(e){return t=>Promise.all(t.map(({animation:r,options:n})=>bT(e,r,n)))}function kT(e){let t=jT(e),r=bg(),n=!0;const s=c=>(u,d)=>{var f;const h=gi(e,d,c==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:m,transitionEnd:v,...b}=h;u={...u,...b,...v}}return u};function i(c){t=c(e)}function a(c){const{props:u}=e,d=r_(e.parent)||{},h=[],f=new Set;let m={},v=1/0;for(let w=0;w<_T;w++){const y=wT[w],x=r[y],g=u[y]!==void 0?u[y]:d[y],_=ta(g),k=y===c?x.isActive:null;k===!1&&(v=w);let S=g===d[y]&&g!==u[y]&&_;if(S&&n&&e.manuallyAnimateOnMount&&(S=!1),x.protectedKeys={...m},!x.isActive&&k===null||!g&&!x.prevProp||Uc(g)||typeof g=="boolean")continue;const N=NT(x.prevProp,g);let E=N||y===c&&x.isActive&&!S&&_||w>v&&_,O=!1;const D=Array.isArray(g)?g:[g];let P=D.reduce(s(y),{});k===!1&&(P={});const{prevResolvedValues:te={}}=x,B={...te,...P},he=fe=>{E=!0,f.has(fe)&&(O=!0,f.delete(fe)),x.needsAnimating[fe]=!0;const R=e.getValue(fe);R&&(R.liveStyle=!1)};for(const fe in B){const R=P[fe],re=te[fe];if(m.hasOwnProperty(fe))continue;let ae=!1;Dh(R)&&Dh(re)?ae=!t_(R,re):ae=R!==re,ae?R!=null?he(fe):f.add(fe):R!==void 0&&f.has(fe)?he(fe):x.protectedKeys[fe]=!0}x.prevProp=g,x.prevResolvedValues=P,x.isActive&&(m={...m,...P}),n&&e.blockInitialAnimation&&(E=!1);const Z=S&&N;E&&(!Z||O)&&h.push(...D.map(fe=>{const R={type:y};if(typeof fe=="string"&&n&&!Z&&e.manuallyAnimateOnMount&&e.parent){const{parent:re}=e,ae=gi(re,fe);if(re.enteringChildren&&ae){const{delayChildren:V}=ae.transition||{};R.delay=e_(re.enteringChildren,e,V)}}return{animation:fe,options:R}}))}if(f.size){const w={};if(typeof u.initial!="boolean"){const y=gi(e,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(w.transition=y.transition)}f.forEach(y=>{const x=e.getBaseTarget(y),g=e.getValue(y);g&&(g.liveStyle=!0),w[y]=x??null}),h.push({animation:w})}let b=!!h.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(b=!1),n=!1,b?t(h):Promise.resolve()}function l(c,u){var h;if(r[c].isActive===u)return Promise.resolve();(h=e.variantChildren)==null||h.forEach(f=>{var m;return(m=f.animationState)==null?void 0:m.setActive(c,u)}),r[c].isActive=u;const d=a(c);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:a,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=bg()}}}function NT(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!t_(t,e):!1}function cs(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bg(){return{animate:cs(!0),whileInView:cs(),whileHover:cs(),whileTap:cs(),whileDrag:cs(),whileFocus:cs(),exit:cs()}}class rs{constructor(t){this.isMounted=!1,this.node=t}update(){}}class ST extends rs{constructor(t){super(t),t.animationState||(t.animationState=kT(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Uc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let CT=0;class ET extends rs{constructor(){super(...arguments),this.id=CT++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const TT={animation:{Feature:ST},exit:{Feature:ET}};function na(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}function wa(e){return{point:{x:e.pageX,y:e.pageY}}}const PT=e=>t=>Cm(t)&&e(t,wa(t));function No(e,t,r,n){return na(e,t,PT(r),n)}const n_=1e-4,$T=1-n_,AT=1+n_,s_=.01,RT=0-s_,DT=0+s_;function Lt(e){return e.max-e.min}function MT(e,t,r){return Math.abs(e-t)<=r}function vg(e,t,r,n=.5){e.origin=n,e.originPoint=Ze(t.min,t.max,e.origin),e.scale=Lt(r)/Lt(t),e.translate=Ze(r.min,r.max,e.origin)-e.originPoint,(e.scale>=$T&&e.scale<=AT||isNaN(e.scale))&&(e.scale=1),(e.translate>=RT&&e.translate<=DT||isNaN(e.translate))&&(e.translate=0)}function So(e,t,r,n){vg(e.x,t.x,r.x,n?n.originX:void 0),vg(e.y,t.y,r.y,n?n.originY:void 0)}function wg(e,t,r){e.min=r.min+t.min,e.max=e.min+Lt(t)}function OT(e,t,r){wg(e.x,t.x,r.x),wg(e.y,t.y,r.y)}function _g(e,t,r){e.min=t.min-r.min,e.max=e.min+Lt(t)}function Co(e,t,r){_g(e.x,t.x,r.x),_g(e.y,t.y,r.y)}function hr(e){return[e("x"),e("y")]}const i_=({current:e})=>e?e.ownerDocument.defaultView:null,jg=(e,t)=>Math.abs(e-t);function LT(e,t){const r=jg(e.x,t.x),n=jg(e.y,t.y);return Math.sqrt(r**2+n**2)}class o_{constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:a=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=qu(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,v=LT(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!m&&!v)return;const{point:b}=f,{timestamp:w}=kt;this.history.push({...b,timestamp:w});const{onStart:y,onMove:x}=this.handlers;m||(y&&y(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Vu(m,this.transformPagePoint),Je.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:v,onSessionEnd:b,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=qu(f.type==="pointercancel"?this.lastMoveEventInfo:Vu(m,this.transformPagePoint),this.history);this.startEvent&&v&&v(f,y),b&&b(f,y)},!Cm(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=a,this.contextWindow=s||window;const l=wa(t),c=Vu(l,this.transformPagePoint),{point:u}=c,{timestamp:d}=kt;this.history=[{...u,timestamp:d}];const{onSessionStart:h}=r;h&&h(t,qu(c,this.history)),this.removeListeners=ya(No(this.contextWindow,"pointermove",this.handlePointerMove),No(this.contextWindow,"pointerup",this.handlePointerUp),No(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Gn(this.updatePoint)}}function Vu(e,t){return t?{point:t(e.point)}:e}function kg(e,t){return{x:e.x-t.x,y:e.y-t.y}}function qu({point:e},t){return{point:e,delta:kg(e,a_(t)),offset:kg(e,FT(t)),velocity:IT(t,.1)}}function FT(e){return e[0]}function a_(e){return e[e.length-1]}function IT(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=a_(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Yr(t)));)r--;if(!n)return{x:0,y:0};const i=xr(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const a={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function BT(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?Ze(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?Ze(r,e,n.max):Math.min(e,r)),e}function Ng(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function zT(e,{top:t,left:r,bottom:n,right:s}){return{x:Ng(e.x,r,s),y:Ng(e.y,t,n)}}function Sg(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function UT(e,t){return{x:Sg(e.x,t.x),y:Sg(e.y,t.y)}}function VT(e,t){let r=.5;const n=Lt(e),s=Lt(t);return s>n?r=Qo(t.min,t.max-n,e.min):n>s&&(r=Qo(e.min,e.max-s,t.min)),gn(0,1,r)}function qT(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const Lh=.35;function WT(e=Lh){return e===!1?e=0:e===!0&&(e=Lh),{x:Cg(e,"left","right"),y:Cg(e,"top","bottom")}}function Cg(e,t,r){return{min:Eg(e,t),max:Eg(e,r)}}function Eg(e,t){return typeof e=="number"?e:e[t]||0}const HT=new WeakMap;class KT{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ot(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(wa(h).point)},a=(h,f)=>{const{drag:m,dragPropagation:v,onDragStart:b}=this.getProps();if(m&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Q5(m),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),hr(y=>{let x=this.getAxisMotionValue(y).get()||0;if(Jr.test(x)){const{projection:g}=this.visualElement;if(g&&g.layout){const _=g.layout.layoutBox[y];_&&(x=Lt(_)*(parseFloat(x)/100))}}this.originPoint[y]=x}),b&&Je.postRender(()=>b(h,f)),Mh(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:m,dragDirectionLock:v,onDirectionLock:b,onDrag:w}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:y}=f;if(v&&this.currentDirection===null){this.currentDirection=GT(y),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",f.point,y),this.updateAxis("y",f.point,y),this.visualElement.render(),w&&w(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>hr(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new o_(t,{onSessionStart:i,onStart:a,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:i_(this.visualElement)})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!n)return;const{velocity:a}=s;this.startAnimation(a);const{onDragEnd:l}=this.getProps();l&&Je.postRender(()=>l(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!Qa(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let a=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(a=BT(a,this.constraints[t],this.elastic[t])),i.set(a)}resolveConstraints(){var i;const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;t&&oi(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=zT(n.layoutBox,t):this.constraints=!1,this.elastic=WT(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&hr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=qT(n.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!oi(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Y4(n,s.root,this.visualElement.getTransformPagePoint());let a=UT(s.layout.layoutBox,i);if(r){const l=r(H4(a));this.hasMutatedConstraints=!!l,l&&(a=qw(l))}return a}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=hr(d=>{if(!Qa(d,r,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const f=s?200:1e6,m=s?40:1e7,v={type:"inertia",velocity:n?t[d]:0,bounceStiffness:f,bounceDamping:m,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(d,v)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return Mh(this.visualElement,t),n.start(Lm(t,n,0,r,this.visualElement,!1))}stopAnimation(){hr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){hr(t=>{var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.pause()})}getAnimationState(t){var r;return(r=this.getAxisMotionValue(t).animation)==null?void 0:r.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){hr(r=>{const{drag:n}=this.getProps();if(!Qa(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[r];i.set(t[r]-Ze(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!oi(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};hr(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();s[a]=VT({min:c,max:c},this.constraints[a])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),hr(a=>{if(!Qa(a,t,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(Ze(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;HT.set(this.visualElement,this);const t=this.visualElement.current,r=No(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();oi(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Je.read(n);const a=na(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(hr(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:a=Lh,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:a,dragMomentum:l}}}function Qa(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function GT(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class YT extends rs{constructor(t){super(t),this.removeGroupControls=br,this.removeListeners=br,this.controls=new KT(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||br}unmount(){this.removeGroupControls(),this.removeListeners()}}const Tg=e=>(t,r)=>{e&&Je.postRender(()=>e(t,r))};class JT extends rs{constructor(){super(...arguments),this.removePointerDownListener=br}onPointerDown(t){this.session=new o_(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:i_(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:Tg(t),onStart:Tg(r),onMove:n,onEnd:(i,a)=>{delete this.session,s&&Je.postRender(()=>s(i,a))}}}mount(){this.removePointerDownListener=No(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const bl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Pg(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const no={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(we.test(e))e=parseFloat(e);else return e;const r=Pg(e,t.target.x),n=Pg(e,t.target.y);return`${r}% ${n}%`}},XT={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=Yn.parse(e);if(s.length>5)return n;const i=Yn.createTransformer(e),a=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;s[0+a]/=l,s[1+a]/=c;const u=Ze(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),i(s)}};let Wu=!1;class QT extends p.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;v4(ZT),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),Wu&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),bl.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,{projection:a}=n;return a&&(a.isPresent=i,Wu=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==i?a.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?a.promote():a.relegate()||Je.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Sm.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;Wu=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function l_(e){const[t,r]=Pw(),n=p.useContext(im);return o.jsx(QT,{...e,layoutGroup:n,switchLayoutGroup:p.useContext(Uw),isPresent:t,safeToRemove:r})}const ZT={borderRadius:{...no,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:no,borderTopRightRadius:no,borderBottomLeftRadius:no,borderBottomRightRadius:no,boxShadow:XT};function eP(e,t,r){const n=Rt(e)?e:Si(e);return n.start(Lm("",n,t,r)),n.animation}const tP=(e,t)=>e.depth-t.depth;class rP{constructor(){this.children=[],this.isDirty=!1}add(t){lm(this.children,t),this.isDirty=!0}remove(t){cm(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(tP),this.isDirty=!1,this.children.forEach(t)}}function nP(e,t){const r=Kt.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(Gn(n),e(i-t))};return Je.setup(n,!0),()=>Gn(n)}const c_=["TopLeft","TopRight","BottomLeft","BottomRight"],sP=c_.length,$g=e=>typeof e=="string"?parseFloat(e):e,Ag=e=>typeof e=="number"||we.test(e);function iP(e,t,r,n,s,i){s?(e.opacity=Ze(0,r.opacity??1,oP(n)),e.opacityExit=Ze(t.opacity??1,0,aP(n))):i&&(e.opacity=Ze(t.opacity??1,r.opacity??1,n));for(let a=0;a<sP;a++){const l=`border${c_[a]}Radius`;let c=Rg(t,l),u=Rg(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Ag(c)===Ag(u)?(e[l]=Math.max(Ze($g(c),$g(u),n),0),(Jr.test(u)||Jr.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=Ze(t.rotate||0,r.rotate||0,n))}function Rg(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const oP=u_(0,.5,Jv),aP=u_(.5,.95,br);function u_(e,t,r){return n=>n<e?0:n>t?1:r(Qo(e,t,n))}function Dg(e,t){e.min=t.min,e.max=t.max}function dr(e,t){Dg(e.x,t.x),Dg(e.y,t.y)}function Mg(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Og(e,t,r,n,s){return e-=t,e=ac(e,1/r,n),s!==void 0&&(e=ac(e,1/s,n)),e}function lP(e,t=0,r=1,n=.5,s,i=e,a=e){if(Jr.test(t)&&(t=parseFloat(t),t=Ze(a.min,a.max,t/100)-a.min),typeof t!="number")return;let l=Ze(i.min,i.max,n);e===i&&(l-=t),e.min=Og(e.min,t,r,l,s),e.max=Og(e.max,t,r,l,s)}function Lg(e,t,[r,n,s],i,a){lP(e,t[r],t[n],t[s],t.scale,i,a)}const cP=["x","scaleX","originX"],uP=["y","scaleY","originY"];function Fg(e,t,r,n){Lg(e.x,t,cP,r?r.x:void 0,n?n.x:void 0),Lg(e.y,t,uP,r?r.y:void 0,n?n.y:void 0)}function Ig(e){return e.translate===0&&e.scale===1}function d_(e){return Ig(e.x)&&Ig(e.y)}function Bg(e,t){return e.min===t.min&&e.max===t.max}function dP(e,t){return Bg(e.x,t.x)&&Bg(e.y,t.y)}function zg(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function h_(e,t){return zg(e.x,t.x)&&zg(e.y,t.y)}function Ug(e){return Lt(e.x)/Lt(e.y)}function Vg(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class hP{constructor(){this.members=[]}add(t){lm(this.members,t),t.scheduleRender()}remove(t){if(cm(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender(),t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function fP(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y,a=(r==null?void 0:r.z)||0;if((s||i||a)&&(n=`translate3d(${s}px, ${i}px, ${a}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:f,skewX:m,skewY:v}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),m&&(n+=`skewX(${m}deg) `),v&&(n+=`skewY(${v}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const Hu=["","X","Y","Z"],mP=1e3;let pP=0;function Ku(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function f_(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=Qw(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Je,!(s||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&f_(n)}function m_({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(a={},l=t==null?void 0:t()){this.id=pP++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(yP),this.nodes.forEach(_P),this.nodes.forEach(jP),this.nodes.forEach(bP)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new rP)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new dm),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a){if(this.instance)return;this.isSVG=Tw(a)&&!s4(a),this.instance=a;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,h=0;const f=()=>this.root.updateBlockedByResize=!1;Je.read(()=>{h=window.innerWidth}),e(a,()=>{const m=window.innerWidth;m!==h&&(h=m,this.root.updateBlockedByResize=!0,d&&d(),d=nP(f,250),bl.hasAnimatedSinceResize&&(bl.hasAnimatedSinceResize=!1,this.nodes.forEach(Hg)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||u.getDefaultTransition()||EP,{onLayoutAnimationStart:b,onLayoutAnimationComplete:w}=u.getProps(),y=!this.targetLayout||!h_(this.targetLayout,m),x=!h&&f;if(this.options.layoutRoot||this.resumeFrom||x||h&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const g={...km(v,"layout"),onPlay:b,onComplete:w};(u.shouldReduceMotion||this.options.layoutRoot)&&(g.delay=0,g.type=!1),this.startAnimation(g),this.setAnimationOrigin(d,x)}else h||Hg(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Gn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(kP),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&f_(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(qg);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Wg);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(wP),this.nodes.forEach(gP),this.nodes.forEach(xP)):this.nodes.forEach(Wg),this.clearAllSnapshots();const l=Kt.now();kt.delta=gn(0,1e3/60,l-kt.timestamp),kt.timestamp=l,kt.isProcessing=!0,Mu.update.process(kt),Mu.preRender.process(kt),Mu.render.process(kt),kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Sm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(vP),this.sharedNodes.forEach(NP)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Je.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Je.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Lt(this.snapshot.measuredBox.x)&&!Lt(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ot(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!d_(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&this.instance&&(l||fs(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),TP(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var u;const{visualElement:a}=this.options;if(!a)return ot();const l=a.measureViewportBox();if(!(((u=this.scroll)==null?void 0:u.wasRoot)||this.path.some(PP))){const{scroll:d}=this.root;d&&(ai(l.x,d.offset.x),ai(l.y,d.offset.y))}return l}removeElementScroll(a){var c;const l=ot();if(dr(l,a),(c=this.scroll)!=null&&c.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:f}=d;d!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&dr(l,a),ai(l.x,h.offset.x),ai(l.y,h.offset.y))}return l}applyTransform(a,l=!1){const c=ot();dr(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&li(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),fs(d.latestValues)&&li(c,d.latestValues)}return fs(this.latestValues)&&li(c,this.latestValues),c}removeTransform(a){const l=ot();dr(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!fs(u.latestValues))continue;$h(u.latestValues)&&u.updateSnapshot();const d=ot(),h=u.measurePageBox();dr(d,h),Fg(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return fs(this.latestValues)&&Fg(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var f;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(a||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=kt.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ot(),this.relativeTargetOrigin=ot(),Co(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ot(),this.targetWithTransforms=ot()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),OT(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):dr(this.target,this.layout.layoutBox),Hw(this.target,this.targetDelta)):dr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ot(),this.relativeTargetOrigin=ot(),Co(this.relativeTargetOrigin,this.target,m.target),dr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||$h(this.parent.latestValues)||Ww(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var v;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||(v=this.parent)!=null&&v.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===kt.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;dr(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;G4(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=ot());const{target:m}=a;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Mg(this.prevProjectionDelta.x,this.projectionDelta.x),Mg(this.prevProjectionDelta.y,this.projectionDelta.y)),So(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!Vg(this.projectionDelta.x,this.prevProjectionDelta.x)||!Vg(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ci(),this.projectionDelta=ci(),this.projectionDeltaWithTransform=ci()}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=ci();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=ot(),m=c?c.source:void 0,v=this.layout?this.layout.source:void 0,b=m!==v,w=this.getStack(),y=!w||w.members.length<=1,x=!!(b&&!y&&this.options.crossfade===!0&&!this.path.some(CP));this.animationProgress=0;let g;this.mixTargetDelta=_=>{const k=_/1e3;Kg(h.x,a.x,k),Kg(h.y,a.y,k),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Co(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SP(this.relativeTarget,this.relativeTargetOrigin,f,k),g&&dP(this.relativeTarget,g)&&(this.isProjectionDirty=!1),g||(g=ot()),dr(g,this.relativeTarget)),b&&(this.animationValues=d,iP(d,u,this.latestValues,k,x,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=k},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){var l,c,u;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(u=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||u.stop(),this.pendingAnimation&&(Gn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Je.update(()=>{bl.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Si(0)),this.currentAnimation=eP(this.motionValue,[0,1e3],{...a,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),a.onUpdate&&a.onUpdate(d)},onStop:()=>{},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(mP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&p_(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||ot();const h=Lt(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const f=Lt(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+f}dr(l,c),li(l,d),So(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new hP),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var l;const{layoutId:a}=this.options;return a?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:a}=this.options;return a?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&Ku("z",a,u,this.animationValues);for(let d=0;d<Hu.length;d++)Ku(`rotate${Hu[d]}`,a,u,this.animationValues),Ku(`skew${Hu[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}applyProjectionStyles(a,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){a.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,a.visibility="",a.opacity="",a.pointerEvents=yl(l==null?void 0:l.pointerEvents)||"",a.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(a.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,a.pointerEvents=yl(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!fs(this.latestValues)&&(a.transform=c?c({},""):"none",this.hasProjected=!1);return}a.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let h=fP(this.projectionDeltaWithTransform,this.treeScale,d);c&&(h=c(d,h)),a.transform=h;const{x:f,y:m}=this.projectionDelta;a.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,u.animationValues?a.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:a.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const v in ra){if(d[v]===void 0)continue;const{correct:b,applyTo:w,isCSSVariable:y}=ra[v],x=h==="none"?d[v]:b(d[v],u);if(w){const g=w.length;for(let _=0;_<g;_++)a[w[_]]=x}else y?this.options.visualElement.renderState.vars[v]=x:a[v]=x}this.options.layoutId&&(a.pointerEvents=u===this?yl(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(qg),this.root.sharedNodes.clear()}}}function gP(e){e.updateLayout()}function xP(e){var r;const t=((r=e.resumeFrom)==null?void 0:r.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=e.layout,{animationType:i}=e.options,a=t.source!==e.layout.source;i==="size"?hr(h=>{const f=a?t.measuredBox[h]:t.layoutBox[h],m=Lt(f);f.min=n[h].min,f.max=f.min+m}):p_(i,t.layoutBox,n)&&hr(h=>{const f=a?t.measuredBox[h]:t.layoutBox[h],m=Lt(n[h]);f.max=f.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const l=ci();So(l,n,t.layoutBox);const c=ci();a?So(c,e.applyTransform(s,!0),t.measuredBox):So(c,n,t.layoutBox);const u=!d_(l);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:m}=h;if(f&&m){const v=ot();Co(v,t.layoutBox,f.layoutBox);const b=ot();Co(b,n,m.layoutBox),h_(v,b)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=b,e.relativeTargetOrigin=v,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function yP(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function bP(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function vP(e){e.clearSnapshot()}function qg(e){e.clearMeasurements()}function Wg(e){e.isLayoutDirty=!1}function wP(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Hg(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function _P(e){e.resolveTargetDelta()}function jP(e){e.calcProjection()}function kP(e){e.resetSkewAndRotation()}function NP(e){e.removeLeadSnapshot()}function Kg(e,t,r){e.translate=Ze(t.translate,0,r),e.scale=Ze(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function Gg(e,t,r,n){e.min=Ze(t.min,r.min,n),e.max=Ze(t.max,r.max,n)}function SP(e,t,r,n){Gg(e.x,t.x,r.x,n),Gg(e.y,t.y,r.y,n)}function CP(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const EP={duration:.45,ease:[.4,0,.1,1]},Yg=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Jg=Yg("applewebkit/")&&!Yg("chrome/")?Math.round:br;function Xg(e){e.min=Jg(e.min),e.max=Jg(e.max)}function TP(e){Xg(e.x),Xg(e.y)}function p_(e,t,r){return e==="position"||e==="preserve-aspect"&&!MT(Ug(t),Ug(r),.2)}function PP(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const $P=m_({attachResizeListener:(e,t)=>na(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gu={current:void 0},g_=m_({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Gu.current){const e=new $P({});e.mount(window),e.setOptions({layoutScroll:!0}),Gu.current=e}return Gu.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),AP={pan:{Feature:JT},drag:{Feature:YT,ProjectionNode:g_,MeasureLayout:l_}};function Qg(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&Je.postRender(()=>i(t,wa(t)))}class RP extends rs{mount(){const{current:t}=this.node;t&&(this.unmount=Z5(t,(r,n)=>(Qg(this.node,n,"Start"),s=>Qg(this.node,s,"End"))))}unmount(){}}class DP extends rs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ya(na(this.node.current,"focus",()=>this.onFocus()),na(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Zg(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&Je.postRender(()=>i(t,wa(t)))}class MP extends rs{mount(){const{current:t}=this.node;t&&(this.unmount=n4(t,(r,n)=>(Zg(this.node,n,"Start"),(s,{success:i})=>Zg(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Fh=new WeakMap,Yu=new WeakMap,OP=e=>{const t=Fh.get(e.target);t&&t(e)},LP=e=>{e.forEach(OP)};function FP({root:e,...t}){const r=e||document;Yu.has(r)||Yu.set(r,{});const n=Yu.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(LP,{root:e,...t})),n[s]}function IP(e,t,r){const n=FP(t);return Fh.set(e,r),n.observe(e),()=>{Fh.delete(e),n.unobserve(e)}}const BP={some:0,all:1};class zP extends rs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,a={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:BP[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),f=u?d:h;f&&f(c)};return IP(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(UP(t,r))&&this.startObserver()}unmount(){}}function UP({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const VP={inView:{Feature:zP},tap:{Feature:MP},focus:{Feature:DP},hover:{Feature:RP}},qP={layout:{ProjectionNode:g_,MeasureLayout:l_}},WP={...TT,...VP,...AP,...qP},Wt=W4(WP,sT),x_=p.createContext(void 0),Fm=()=>{const e=p.useContext(x_);if(!e)throw new Error("useSidebar must be used within a SidebarProvider");return e},HP=({children:e,open:t,setOpen:r,animate:n=!0})=>{const[s,i]=p.useState(!1),a=t!==void 0?t:s,l=r!==void 0?r:i;return o.jsx(x_.Provider,{value:{open:a,setOpen:l,animate:n},children:e})},KP=({children:e,open:t,setOpen:r,animate:n})=>o.jsx(HP,{open:t,setOpen:r,animate:n,children:e}),GP=e=>o.jsxs(o.Fragment,{children:[o.jsx(YP,{...e}),o.jsx(JP,{...e})]}),YP=({className:e,children:t,...r})=>{const{open:n,setOpen:s,animate:i}=Fm();return o.jsx(Wt.div,{className:tc("h-full px-4 py-4 hidden md:flex md:flex-col bg-neutral-100 dark:bg-neutral-800 w-[300px] flex-shrink-0",e),animate:{width:i?n?"300px":"60px":"300px"},onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),...r,children:t})},JP=({className:e,children:t,...r})=>{const{open:n,setOpen:s}=Fm();return o.jsx(o.Fragment,{children:o.jsxs("div",{className:tc("h-10 px-4 py-4 flex flex-row md:hidden items-center justify-between bg-neutral-100 dark:bg-neutral-800 w-full"),...r,children:[o.jsx("div",{className:"flex justify-end z-20 w-full",children:o.jsx(vC,{className:"text-neutral-800 dark:text-neutral-200 cursor-pointer",onClick:()=>s(!n)})}),o.jsx(f4,{children:n&&o.jsxs(Wt.div,{initial:{x:"-100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-100%",opacity:0},transition:{duration:.3,ease:"easeInOut"},className:tc("fixed h-full w-full inset-0 bg-white dark:bg-neutral-900 p-10 z-[100] flex flex-col justify-between",e),children:[o.jsx("div",{className:"absolute right-10 top-10 z-50 text-neutral-800 dark:text-neutral-200 cursor-pointer",onClick:()=>s(!n),children:o.jsx(st,{})}),t]})})]})})},ex=({link:e,className:t,...r})=>{const{open:n,animate:s}=Fm();return o.jsxs(ma,{to:e.href,className:tc("flex items-center justify-start gap-2 group/sidebar py-2",t),...r,children:[e.icon,o.jsx(Wt.span,{animate:{display:s?n?"inline-block":"none":"inline-block",opacity:s?n?1:0:1},className:"text-neutral-700 dark:text-neutral-200 text-sm group-hover/sidebar:translate-x-1 transition duration-150 whitespace-pre inline-block !p-0 !m-0",children:e.label})]})},XP=[{name:"Dashboard",href:"/",icon:o.jsx(xC,{className:"text-neutral-700 dark:text-neutral-200 h-5 w-5 flex-shrink-0"})},{name:"Clients",href:"/clients",icon:o.jsx(Xo,{className:"text-neutral-700 dark:text-neutral-200 h-5 w-5 flex-shrink-0"})},{name:"Forms",href:"/forms",icon:o.jsx(sr,{className:"text-neutral-700 dark:text-neutral-200 h-5 w-5 flex-shrink-0"})},{name:"Responses",href:"/responses",icon:o.jsx(Ic,{className:"text-neutral-700 dark:text-neutral-200 h-5 w-5 flex-shrink-0"})},{name:"Settings",href:"/settings",icon:o.jsx(mh,{className:"text-neutral-700 dark:text-neutral-200 h-5 w-5 flex-shrink-0"})}],QP=[{name:"Responses",href:"/responses",icon:o.jsx(Ic,{className:"text-neutral-700 dark:text-neutral-200 h-5 w-5 flex-shrink-0"})}];function ZP(){var c,u;const{user:e,userType:t,clientData:r,signOut:n}=kr();Ue(),bn();const[s,i]=p.useState(!1),l=(t==="client"?QP:XP).map(d=>({label:d.name,href:d.href,icon:d.icon}));return o.jsxs("div",{className:ec("flex flex-col md:flex-row w-full flex-1 mx-auto border border-neutral-200 dark:border-neutral-700 overflow-hidden","h-screen"),children:[o.jsx(KP,{open:s,setOpen:i,children:o.jsxs(GP,{className:"justify-between gap-10",children:[o.jsxs("div",{className:"flex flex-col flex-1 overflow-y-auto overflow-x-hidden",children:[s?o.jsx(e3,{}):o.jsx(t3,{}),o.jsx("div",{className:"mt-8 flex flex-col gap-2",children:l.map((d,h)=>o.jsx(ex,{link:d},h))})]}),o.jsxs("div",{children:[o.jsx(ex,{link:{label:t==="client"&&r?r.name:(e==null?void 0:e.email)||"User",href:"#",icon:o.jsx("div",{className:"h-7 w-7 flex-shrink-0 rounded-full bg-gradient-to-r from-green-400 to-blue-500 flex items-center justify-center",children:o.jsx("span",{className:"text-xs font-bold text-white",children:(u=(c=e==null?void 0:e.email)==null?void 0:c[0])==null?void 0:u.toUpperCase()})})}}),o.jsxs("button",{onClick:n,className:ec("flex items-center justify-start gap-2 group/sidebar py-2 w-full text-left","text-neutral-700 dark:text-neutral-200 hover:text-red-600 transition-colors"),children:[o.jsx(bC,{className:"h-5 w-5 flex-shrink-0"}),o.jsx(Wt.span,{animate:{display:s?"inline-block":"none",opacity:s?1:0},className:"text-sm group-hover/sidebar:translate-x-1 transition duration-150 whitespace-pre inline-block !p-0 !m-0",children:"Logout"})]})]})]})}),o.jsx(r3,{})]})}const e3=()=>o.jsxs(ma,{to:"/",className:"font-normal flex space-x-2 items-center text-sm py-1 relative z-20",children:[o.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:o.jsx("img",{src:nm,alt:"Advertomedia Logo",className:"w-10 h-10 object-contain"})}),o.jsx(Wt.span,{initial:{opacity:0},animate:{opacity:1},className:"font-medium text-neutral-800 dark:text-neutral-200 whitespace-pre",children:"Online Designer"})]}),t3=()=>o.jsx(ma,{to:"/",className:"font-normal flex space-x-2 items-center text-sm py-1 relative z-20",children:o.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:o.jsx("img",{src:nm,alt:"Logo",className:"w-10 h-10 object-contain"})})}),r3=()=>o.jsx("div",{className:"flex flex-1",children:o.jsx("div",{className:ec("p-2 md:p-10 rounded-tl-2xl border border-neutral-200 dark:border-neutral-700","bg-white dark:bg-neutral-900 flex flex-col gap-2 flex-1 w-full h-full overflow-y-auto"),children:o.jsx(ok,{})})});function n3(){const{theme:e,toggleTheme:t}=Ue();return o.jsx("button",{onClick:t,className:`p-2 rounded-lg transition-all duration-200 hover:scale-110 ${e==="light"?"text-slate-600 hover:text-slate-900 hover:bg-gray-100 bg-gray-50":"text-white/70 hover:text-white hover:bg-white/10 bg-white/5"}`,title:`Switch to ${e==="light"?"dark":"light"} mode`,children:e==="light"?o.jsx(wC,{className:"w-4 h-4"}):o.jsx(CC,{className:"w-4 h-4"})})}function s3(){const[e,t]=p.useState(""),[r,n]=p.useState(""),[s,i]=p.useState(!1),[a,l]=p.useState(!1),[c,u]=p.useState(""),{signIn:d}=kr(),{theme:h}=Ue(),f=async m=>{m.preventDefault(),l(!0),u("");const{error:v}=await d(e,r);v&&u(v.message),l(!1)};return o.jsxs("div",{className:"min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-4 right-4 z-20",children:o.jsx(n3,{})}),o.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[o.jsx("div",{className:`absolute -top-40 -right-40 w-80 h-80 rounded-full blur-3xl animate-pulse ${h==="light"?"bg-orange-500/10":"bg-orange-500/20"}`}),o.jsx("div",{className:`absolute -bottom-40 -left-40 w-80 h-80 rounded-full blur-3xl animate-pulse ${h==="light"?"bg-red-500/10":"bg-red-500/20"}`,style:{animationDelay:"1s"}}),o.jsx("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-60 h-60 rounded-full blur-3xl animate-pulse ${h==="light"?"bg-orange-600/5":"bg-orange-600/10"}`,style:{animationDelay:"2s"}})]}),o.jsx("div",{className:"max-w-md w-full relative z-10 animate-fade-in",children:o.jsxs("div",{className:`backdrop-blur-xl rounded-2xl border p-8 shadow-2xl ${h==="light"?"bg-white/80 border-gray-200":"bg-white/10 border-white/20"}`,children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"mx-auto w-20 h-20 flex items-center justify-center mb-6 animate-scale-in",children:o.jsx("img",{src:nm,alt:"Advertomedia Logo",className:"w-20 h-20 object-contain"})}),o.jsx("h2",{className:`text-3xl font-bold bg-gradient-to-r bg-clip-text text-transparent animate-slide-up ${h==="light"?"from-gray-800 to-orange-600":"from-white to-orange-200"}`,children:"Online Designer"}),o.jsx("p",{className:`mt-2 text-lg animate-fade-in-delay ${h==="light"?"text-gray-600":"text-white/70"}`,children:"Sign in to your admin account"})]}),o.jsxs("form",{onSubmit:f,className:"space-y-6",children:[c&&o.jsx("div",{className:`backdrop-blur-sm rounded-xl p-4 animate-fade-in ${h==="light"?"bg-red-50 border border-red-200":"bg-red-500/20 border border-red-400/30"}`,children:o.jsx("p",{className:`text-sm ${h==="light"?"text-red-700":"text-red-200"}`,children:c})}),o.jsxs("div",{className:"animate-slide-up",style:{animationDelay:"0.2s"},children:[o.jsx("label",{htmlFor:"email",className:`block text-sm font-medium mb-2 ${h==="light"?"text-gray-700":"text-white/90"}`,children:"Email Address"}),o.jsxs("div",{className:"relative",children:[o.jsx(Xl,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 ${h==="light"?"text-gray-400":"text-white/40"}`}),o.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:e,onChange:m=>t(m.target.value),className:`w-full pl-12 pr-4 py-3 backdrop-blur-sm border rounded-xl transition-all duration-200 ${h==="light"?"bg-white/50 border-gray-200 text-gray-900 placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent hover:bg-white/70":"bg-white/10 border-white/20 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-400 focus:border-transparent hover:bg-white/15"}`,placeholder:"admin@example.com"})]})]}),o.jsxs("div",{className:"animate-slide-up",style:{animationDelay:"0.4s"},children:[o.jsx("label",{htmlFor:"password",className:`block text-sm font-medium mb-2 ${h==="light"?"text-gray-700":"text-white/90"}`,children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx(yC,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 ${h==="light"?"text-gray-400":"text-white/40"}`}),o.jsx("input",{id:"password",name:"password",type:s?"text":"password",required:!0,value:r,onChange:m=>n(m.target.value),className:`w-full pl-12 pr-12 py-3 backdrop-blur-sm border rounded-xl transition-all duration-200 ${h==="light"?"bg-white/50 border-gray-200 text-gray-900 placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent hover:bg-white/70":"bg-white/10 border-white/20 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-400 focus:border-transparent hover:bg-white/15"}`,placeholder:"Enter your password"}),o.jsx("button",{type:"button",className:`absolute right-3 top-1/2 transform -translate-y-1/2 transition-colors ${h==="light"?"text-gray-400 hover:text-gray-600":"text-white/40 hover:text-white/70"}`,onClick:()=>i(!s),children:s?o.jsx(yv,{className:"h-5 w-5"}):o.jsx(pn,{className:"h-5 w-5"})})]})]}),o.jsx("button",{type:"submit",disabled:a,className:`w-full py-3 px-4 rounded-xl font-semibold text-white transition-all duration-200 animate-slide-up ${a?h==="light"?"bg-gray-300 cursor-not-allowed opacity-50":"bg-white/20 cursor-not-allowed opacity-50":"bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 shadow-lg shadow-orange-500/25 hover:shadow-orange-500/40 hover:scale-105"}`,style:{animationDelay:"0.6s"},children:a?o.jsxs("div",{className:"flex items-center justify-center",children:[o.jsx("div",{className:`animate-spin rounded-full h-5 w-5 border-b-2 mr-2 ${h==="light"?"border-gray-600":"border-white"}`}),"Signing in..."]}):"Sign In"})]})]})})]})}const i3="/assets/banner-CiXZE2OQ.jpg",Za=vt.memo(({title:e,value:t,subtitle:r,colors:n,delay:s,className:i=""})=>{const a={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1,delayChildren:s+.3}}},l={hidden:{opacity:0},show:{opacity:1,transition:{duration:.5}}};return o.jsx(Wt.div,{className:`relative overflow-hidden h-full bg-white dark:bg-white/5 rounded-2xl border border-gray-200 dark:border-white/10 ${i}`,initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:s},children:o.jsxs(Wt.div,{className:"relative z-10 p-3 sm:p-5 md:p-8 text-gray-900 dark:text-white h-full flex flex-col justify-between",variants:a,initial:"hidden",animate:"show",children:[o.jsx(Wt.h3,{className:"text-sm sm:text-base md:text-lg text-gray-700 dark:text-gray-300 font-medium",variants:l,children:e}),o.jsx(Wt.p,{className:"text-2xl sm:text-4xl md:text-5xl font-bold my-4 text-gray-900 dark:text-white",variants:l,children:t}),r&&o.jsx(Wt.p,{className:"text-sm text-gray-600 dark:text-gray-400",variants:l,children:r})]})})});function o3(){const{user:e}=kr(),{theme:t}=Ue(),r=Zn(),[n,s]=p.useState({totalClients:0,totalForms:0,totalResponses:0,responseRate:0}),[i,a]=p.useState(!0),[l,c]=p.useState(!0),[u,d]=p.useState([]),h=p.useCallback(async()=>{if(e)try{const[{count:b},{count:w},{count:y}]=await Promise.all([z.from("clients").select("*",{count:"exact",head:!0}).eq("user_id",e.id),z.from("forms").select("*",{count:"exact",head:!0}).eq("user_id",e.id),z.from("responses").select("*, forms!inner(user_id)",{count:"exact",head:!0}).eq("forms.user_id",e.id)]),x=w&&w>0?Math.round((y||0)/(w*10)*100):0;s({totalClients:b||0,totalForms:w||0,totalResponses:y||0,responseRate:Math.min(x,100)})}catch(b){console.error("Error fetching stats:",b)}finally{a(!1)}},[e]),f=p.useCallback(async()=>{if(e)try{const[{data:b},{data:w},{data:y}]=await Promise.all([z.from("forms").select("id, name, created_at").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(2),z.from("responses").select("id, contact_name, submitted_at, forms!inner(user_id, name)").eq("forms.user_id",e.id).order("submitted_at",{ascending:!1}).limit(2),z.from("clients").select("id, name, created_at").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(1)]),x=[];b==null||b.forEach(g=>{x.push({id:g.id,type:"form_created",title:"New form created",description:g.name,timestamp:new Date(g.created_at),icon:sr,color:"from-blue-500 to-cyan-500"})}),w==null||w.forEach(g=>{x.push({id:g.id,type:"response_received",title:"New response received",description:`${g.contact_name||"Anonymous"} - ${g.forms.name}`,timestamp:new Date(g.submitted_at),icon:$u,color:"from-green-500 to-emerald-500"})}),y==null||y.forEach(g=>{x.push({id:g.id,type:"client_added",title:"New client added",description:g.name,timestamp:new Date(g.created_at),icon:Xo,color:"from-purple-500 to-pink-500"})}),x.sort((g,_)=>_.timestamp.getTime()-g.timestamp.getTime()),d(x.slice(0,5))}catch(b){console.error("Error fetching recent activity:",b)}},[e]);p.useEffect(()=>{h(),f()},[h,f]);const m=b=>{const w=Math.floor((new Date().getTime()-b.getTime())/1e3);return w<60?"Just now":w<3600?`${Math.floor(w/60)} minutes ago`:w<86400?`${Math.floor(w/3600)} hours ago`:w<604800?`${Math.floor(w/86400)} days ago`:b.toLocaleDateString()},v=p.useMemo(()=>[{title:"Create New Form",description:"Build a custom form for your clients",icon:Dr,color:"from-blue-500 to-cyan-500",bgColor:"from-blue-500/10 to-cyan-500/10",borderColor:"border-blue-400/30",action:()=>r("/forms")},{title:"Add New Client",description:"Set up branding for a new client",icon:Xo,color:"from-green-500 to-emerald-500",bgColor:"from-green-500/10 to-emerald-500/10",borderColor:"border-green-400/30",action:()=>r("/clients")},{title:"View Responses",description:"Check latest form submissions",icon:pn,color:"from-purple-500 to-pink-500",bgColor:"from-purple-500/10 to-pink-500/10",borderColor:"border-purple-400/30",action:()=>r("/responses")},{title:"Analytics",description:"View detailed performance metrics",icon:Ic,color:"from-orange-500 to-red-500",bgColor:"from-orange-500/10 to-red-500/10",borderColor:"border-orange-400/30",action:()=>{}}],[r]);return o.jsx("div",{className:`w-full min-h-full ${t==="light"?"bg-gray-50":""}`,children:o.jsxs("div",{className:"max-w-[1600px] mx-auto p-8",children:[l&&o.jsxs("div",{className:"mb-8 relative overflow-hidden rounded-3xl animate-fade-in",children:[o.jsx("button",{onClick:()=>c(!1),className:"absolute top-6 right-6 z-10 p-2 bg-black/30 hover:bg-black/50 backdrop-blur-sm rounded-full transition-all duration-200 group",children:o.jsx(st,{className:"w-5 h-5 text-white/80 group-hover:text-white"})}),o.jsx("img",{src:i3,alt:"Promotional Banner",className:"w-full h-[400px] object-cover rounded-3xl"})]}),o.jsx("div",{className:"mb-10",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:`text-5xl font-bold bg-gradient-to-r bg-clip-text text-transparent ${t==="light"?"from-gray-900 via-blue-600 to-purple-600":"from-white via-blue-200 to-purple-200"}`,children:"Welcome back, Adel!"}),o.jsx("p",{className:`mt-3 text-lg ${t==="light"?"text-gray-600":"text-white/70"}`,children:"Here's what's happening with your forms today"})]}),o.jsx("div",{className:"flex gap-3",children:o.jsxs("button",{onClick:()=>r("/forms"),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold rounded-xl transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl",children:[o.jsx(Dr,{className:"w-5 h-5 mr-2"}),"Create Form"]})})]})}),i?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",style:{minHeight:"400px"},children:[...Array(4)].map((b,w)=>o.jsxs("div",{className:`backdrop-blur-md rounded-2xl border p-6 animate-pulse ${t==="light"?"bg-white border-gray-200":"bg-white/5 border-white/10"}`,children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsx("div",{className:`w-16 h-16 rounded-xl ${t==="light"?"bg-gray-200":"bg-white/10"}`})}),o.jsx("div",{className:`h-4 rounded w-24 mb-3 ${t==="light"?"bg-gray-200":"bg-white/10"}`}),o.jsx("div",{className:`h-8 rounded w-16 ${t==="light"?"bg-gray-200":"bg-white/10"}`})]},w))}):o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",style:{minHeight:"400px"},children:[o.jsx("div",{className:"md:col-span-2",children:o.jsx(Za,{title:"Total Clients",value:n.totalClients,subtitle:"Active clients in your account",colors:["#3B82F6","#60A5FA","#93C5FD"],delay:.2})}),o.jsx(Za,{title:"Active Forms",value:n.totalForms,subtitle:"Forms ready to collect responses",colors:["#60A5FA","#34D399","#93C5FD"],delay:.4}),o.jsx(Za,{title:"Response Rate",value:`${n.responseRate}%`,subtitle:"Engagement across all forms",colors:["#F59E0B","#A78BFA","#FCD34D"],delay:.6}),o.jsx("div",{className:"md:col-span-2",children:o.jsx(Za,{title:"Total Responses",value:n.totalResponses,subtitle:"Form submissions received this month",colors:["#3B82F6","#A78BFA","#FBCFE8"],delay:.8})})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[o.jsxs("div",{className:"lg:col-span-2",children:[o.jsxs("div",{className:`backdrop-blur-md rounded-2xl border p-8 ${t==="light"?"bg-white border-gray-200":"bg-white/5 border-white/10"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:`text-2xl font-bold ${t==="light"?"text-gray-900":"text-white"}`,children:"Quick Actions"}),o.jsx(Cv,{className:"w-6 h-6 text-yellow-500"})]}),o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map((b,w)=>o.jsxs("button",{onClick:b.action,className:`text-left p-6 rounded-xl border-2 transition-all duration-300 hover:scale-[1.02] hover:shadow-lg group will-change-transform ${b.borderColor} bg-gradient-to-br ${b.bgColor}`,style:{animationDelay:`${w*.1}s`},children:[o.jsx("div",{className:`w-12 h-12 rounded-xl bg-gradient-to-r ${b.color} flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300`,children:o.jsx(b.icon,{className:"w-6 h-6 text-white"})}),o.jsx("h4",{className:`text-lg font-semibold mb-2 ${t==="light"?"text-gray-900":"text-white"}`,children:b.title}),o.jsx("p",{className:`text-sm ${t==="light"?"text-gray-600":"text-white/60"}`,children:b.description})]},b.title))})]}),o.jsxs("div",{className:`mt-8 backdrop-blur-md rounded-2xl border p-8 ${t==="light"?"bg-white border-gray-200":"bg-white/5 border-white/10"}`,children:[o.jsx("h3",{className:`text-2xl font-bold mb-6 ${t==="light"?"text-gray-900":"text-white"}`,children:"Performance Insights"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[o.jsxs("div",{className:"text-center p-6 rounded-xl bg-gradient-to-br from-blue-500/10 to-cyan-500/10 border border-blue-400/20",children:[o.jsx(_C,{className:"w-10 h-10 mx-auto mb-3 text-blue-500"}),o.jsx("p",{className:`text-3xl font-bold mb-2 ${t==="light"?"text-gray-900":"text-white"}`,children:n.totalResponses*3}),o.jsx("p",{className:`text-sm ${t==="light"?"text-gray-600":"text-white/60"}`,children:"Total Clicks"})]}),o.jsxs("div",{className:"text-center p-6 rounded-xl bg-gradient-to-br from-green-500/10 to-emerald-500/10 border border-green-400/20",children:[o.jsx(EC,{className:"w-10 h-10 mx-auto mb-3 text-green-500"}),o.jsxs("p",{className:`text-3xl font-bold mb-2 ${t==="light"?"text-gray-900":"text-white"}`,children:[Math.round(n.responseRate*1.2),"%"]}),o.jsx("p",{className:`text-sm ${t==="light"?"text-gray-600":"text-white/60"}`,children:"Conversion Rate"})]}),o.jsxs("div",{className:"text-center p-6 rounded-xl bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-400/20",children:[o.jsx(dh,{className:"w-10 h-10 mx-auto mb-3 text-purple-500"}),o.jsx("p",{className:`text-3xl font-bold mb-2 ${t==="light"?"text-gray-900":"text-white"}`,children:"2.5m"}),o.jsx("p",{className:`text-sm ${t==="light"?"text-gray-600":"text-white/60"}`,children:"Avg. Time"})]})]})]})]}),o.jsxs("div",{className:"lg:col-span-1",children:[o.jsxs("div",{className:`backdrop-blur-md rounded-2xl border p-8 ${t==="light"?"bg-white border-gray-200":"bg-white/5 border-white/10"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsx("h3",{className:`text-2xl font-bold ${t==="light"?"text-gray-900":"text-white"}`,children:"Recent Activity"}),o.jsx($u,{className:"w-6 h-6 text-green-500"})]}),o.jsx("div",{className:"space-y-4",children:u.length>0?u.map((b,w)=>o.jsxs("div",{className:`flex items-start gap-4 p-4 rounded-xl border transition-all duration-200 hover:scale-[1.02] will-change-transform ${t==="light"?"bg-gray-50 border-gray-100 hover:bg-gray-100":"bg-white/5 border-white/10 hover:bg-white/10"}`,style:{animationDelay:`${w*.1}s`},children:[o.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 bg-gradient-to-br ${b.color==="from-blue-500 to-cyan-500"?"from-blue-500/10 to-cyan-500/10":b.color==="from-green-500 to-emerald-500"?"from-green-500/10 to-emerald-500/10":"from-purple-500/10 to-pink-500/10"}`,children:o.jsx(b.icon,{className:`w-6 h-6 bg-gradient-to-r ${b.color} bg-clip-text text-transparent`})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:`font-semibold text-sm mb-1 ${t==="light"?"text-gray-900":"text-white"}`,children:b.title}),o.jsx("p",{className:`text-sm mb-2 truncate ${t==="light"?"text-gray-600":"text-white/70"}`,children:b.description}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(dh,{className:`w-3 h-3 ${t==="light"?"text-gray-400":"text-white/40"}`}),o.jsx("span",{className:`text-xs ${t==="light"?"text-gray-500":"text-white/50"}`,children:m(b.timestamp)})]})]}),o.jsx(rm,{className:"w-4 h-4 text-yellow-400 flex-shrink-0 mt-1"})]},b.id)):o.jsxs("div",{className:"text-center py-12",children:[o.jsx($u,{className:`w-16 h-16 mx-auto mb-4 ${t==="light"?"text-gray-300":"text-white/20"}`}),o.jsx("p",{className:`text-sm ${t==="light"?"text-gray-500":"text-white/50"}`,children:"No recent activity yet"})]})}),u.length>0&&o.jsx("button",{className:`w-full mt-6 py-3 rounded-xl border-2 font-medium transition-all duration-200 hover:scale-[1.02] ${t==="light"?"border-gray-200 hover:bg-gray-50 text-gray-700":"border-white/10 hover:bg-white/5 text-white/80"}`,children:"View All Activity"})]}),o.jsx("div",{className:"mt-8 backdrop-blur-md rounded-2xl border p-6 bg-gradient-to-br from-amber-500/10 to-orange-500/10 border-amber-400/20",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-amber-500 to-orange-500 flex items-center justify-center flex-shrink-0",children:o.jsx(SC,{className:"w-5 h-5 text-white"})}),o.jsxs("div",{children:[o.jsx("h4",{className:`font-semibold mb-2 ${t==="light"?"text-gray-900":"text-white"}`,children:"Pro Tip"}),o.jsx("p",{className:`text-sm ${t==="light"?"text-gray-700":"text-white/80"}`,children:"Use form templates to save time! Create reusable templates for common form types."})]})]})})]})]})]})})}const a3=({client:e,index:t,onEdit:r,onDelete:n})=>(e.primary_color,e.secondary_color,o.jsx(Wt.div,{className:"relative overflow-hidden h-full bg-white dark:bg-white/5 rounded-2xl border border-gray-200 dark:border-white/10 hover:shadow-2xl transition-all duration-300",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:t*.1},whileHover:{y:-4},children:o.jsxs(Wt.div,{className:"relative z-10 p-6 h-full flex flex-col",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:t*.1+.2},children:[o.jsxs("div",{className:"flex items-start justify-between mb-4",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-semibold text-lg text-gray-900 dark:text-white mb-1",children:e.name}),o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Created ",new Date(e.created_at).toLocaleDateString()]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:r,className:"p-2 rounded-xl transition-all duration-200 hover:scale-110 text-gray-500 dark:text-white/60 hover:text-blue-600 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-500/20",children:o.jsx(Sv,{className:"w-4 h-4"})}),o.jsx("button",{onClick:n,className:"p-2 rounded-xl transition-all duration-200 hover:scale-110 text-gray-500 dark:text-white/60 hover:text-red-600 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-500/20",children:o.jsx(Oi,{className:"w-4 h-4"})})]})]}),o.jsxs("div",{className:"space-y-4 flex-1",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-medium uppercase tracking-wide mb-2 block text-gray-600 dark:text-gray-400",children:"Brand Colors"}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-10 h-10 rounded-xl border-2 shadow-lg ring-2 transition-transform hover:scale-110 border-gray-200 dark:border-white/30 ring-gray-100 dark:ring-white/10",style:{backgroundColor:e.primary_color},title:`Primary: ${e.primary_color}`}),o.jsx("div",{className:"w-10 h-10 rounded-xl border-2 shadow-lg ring-2 transition-transform hover:scale-110 border-gray-200 dark:border-white/30 ring-gray-100 dark:ring-white/10",style:{backgroundColor:e.secondary_color},title:`Secondary: ${e.secondary_color}`})]})]}),e.logo_url&&o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-medium uppercase tracking-wide mb-2 block text-gray-600 dark:text-gray-400",children:"Logo"}),o.jsx("div",{className:"backdrop-blur-sm p-3 rounded-xl border bg-gray-50 dark:bg-white/10 border-gray-100 dark:border-white/20",children:o.jsx("img",{src:e.logo_url,alt:`${e.name} logo`,className:"h-8"})})]}),e.webhook_url&&o.jsxs("div",{children:[o.jsx("label",{className:"text-xs font-medium uppercase tracking-wide mb-2 block text-gray-600 dark:text-gray-400",children:"Webhook"}),o.jsx("div",{className:"backdrop-blur-sm p-3 rounded-xl border bg-green-50 dark:bg-green-500/10 border-green-200 dark:border-green-400/30",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"w-2 h-2 rounded-full mr-2 bg-green-500 dark:bg-green-400"}),o.jsx("span",{className:"text-xs font-medium text-green-700 dark:text-green-300",children:"Zapier Connected"})]})})]})]})]})}));function Ju(e){if(!e||typeof e!="string"||(e=e.trim(),!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)))return!1;const[r,n]=e.split("@");if(!r||r.length===0||r.length>64||r.startsWith(".")||r.endsWith(".")||r.includes("..")||!n||n.length===0||n.length>253||n.startsWith(".")||n.endsWith(".")||n.includes("..")||!n.includes("."))return!1;const s=n.split(".");for(const i of s)if(i.length===0||i.length>63||i.startsWith("-")||i.endsWith("-")||!/^[a-zA-Z0-9-]+$/.test(i))return!1;return!(e.includes("..")||e.startsWith(".")||e.endsWith(".")||r.includes("..")||n.includes(".."))}function l3(){const{user:e}=kr(),{theme:t}=Ue(),{push:r}=ts(),[n,s]=p.useState([]),[i,a]=p.useState(!0),[l,c]=p.useState(!1),[u,d]=p.useState(null),[h,f]=p.useState({name:"",primary_color:"#2563EB",secondary_color:"#475569",logo_file:null,client_email:"",additional_emails:[],client_password:"",email_notifications_enabled:!0,webhook_url:""}),[m,v]=p.useState(null),[b,w]=p.useState(!1),[y,x]=p.useState(!1);p.useEffect(()=>{g()},[e]);const g=async()=>{if(e)try{const{data:P,error:te}=await z.from("clients").select("*").eq("user_id",e.id).order("created_at",{ascending:!1});if(te)throw te;s(P||[])}catch(P){console.error("Error fetching clients:",P),r({type:"error",message:"Error loading clients"})}finally{a(!1)}},_=async(P,te)=>{const B=P.name.split(".").pop(),Z=`client-logos/${`${te}-${Date.now()}.${B}`}`,{error:ne}=await z.storage.from("client-logos").upload(Z,P);if(ne)throw console.error("Error uploading logo:",ne),new Error("Failed to upload logo");const{data:fe}=z.storage.from("client-logos").getPublicUrl(Z);return fe.publicUrl},k=async P=>{if(P.preventDefault(),!!e){w(!0);try{if(h.client_email&&!Ju(h.client_email)){r({title:"Invalid Email",description:"Please enter a valid primary email address",type:"error"}),w(!1);return}const te=h.additional_emails.filter(Z=>Z&&!Ju(Z));if(te.length>0){r({title:"Invalid Additional Emails",description:`Please fix these invalid email addresses: ${te.join(", ")}`,type:"error"}),w(!1);return}const B=h.additional_emails.filter(Z=>Z&&Z.trim());let he=null;if(u){h.logo_file&&(he=await _(h.logo_file,u.id));const Z={name:h.name,primary_color:h.primary_color,secondary_color:h.secondary_color,client_email:h.client_email||null,additional_emails:B,client_password_hash:h.client_password||null,email_notifications_enabled:h.email_notifications_enabled,webhook_url:h.webhook_url||null};he&&(Z.logo_url=he);const{error:ne}=await z.from("clients").update(Z).eq("id",u.id);if(ne)throw ne;r({type:"success",message:"Client updated successfully"})}else{console.log("Creating new client with data:",{name:h.name,primary_color:h.primary_color,secondary_color:h.secondary_color,client_email:h.client_email||null,client_password_hash:h.client_password||null,user_id:e.id});const{data:Z,error:ne}=await z.from("clients").insert({name:h.name,primary_color:h.primary_color,secondary_color:h.secondary_color,client_email:h.client_email||null,additional_emails:B,client_password_hash:h.client_password||null,email_notifications_enabled:h.email_notifications_enabled,webhook_url:h.webhook_url||null,user_id:e.id}).select().single();if(console.log("Client creation result:",{newClient:Z,error:ne}),ne)throw ne;if(h.logo_file&&Z){he=await _(h.logo_file,Z.id);const{error:fe}=await z.from("clients").update({logo_url:he}).eq("id",Z.id);if(fe)throw fe}r({type:"success",message:"Client created successfully"})}c(!1),d(null),f({name:"",primary_color:"#2563EB",secondary_color:"#475569",logo_file:null,client_email:"",additional_emails:[],client_password:"",email_notifications_enabled:!0,webhook_url:""}),v(null),g()}catch(te){console.error("Error saving client:",te),r({type:"error",message:"Error saving client"})}finally{w(!1)}}},S=P=>{d(P),f({name:P.name,primary_color:P.primary_color,secondary_color:P.secondary_color,logo_file:null,client_email:P.client_email||"",additional_emails:P.additional_emails||[],client_password:P.client_password_hash||"",email_notifications_enabled:P.email_notifications_enabled??!0,webhook_url:P.webhook_url||""}),v(P.logo_url),c(!0)},N=async P=>{if(confirm("Are you sure you want to delete this client?")){try{const{error:te}=await z.from("clients").delete().eq("id",P);if(te)throw te;g()}catch(te){console.error("Error deleting client:",te),r({type:"error",message:"Error deleting client"})}r({type:"success",message:"Client deleted"})}},E=P=>{var B;const te=(B=P.target.files)==null?void 0:B[0];if(te){if(!te.type.startsWith("image/")){r({type:"error",message:"Please select an image file"});return}if(te.size>5*1024*1024){r({type:"error",message:"File size must be less than 5MB"});return}f({...h,logo_file:te});const he=new FileReader;he.onloadend=()=>{v(he.result)},he.readAsDataURL(te)}},O=()=>{f({...h,logo_file:null}),v(null)},D=["#2563EB","#7C3AED","#DC2626","#EA580C","#D97706","#65A30D","#059669","#0891B2","#4338CA","#9333EA","#C2410C","#BE123C","#475569","#374151","#1F2937","#111827","#0F172A","#18181B"];return o.jsxs("div",{className:"p-8 animate-fade-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{className:"animate-slide-up",children:[o.jsx("h1",{className:`text-4xl font-bold bg-gradient-to-r bg-clip-text text-transparent ${t==="light"?"from-gray-800 via-orange-600 to-red-600":"from-white via-orange-100 to-red-200"}`,children:"Clients"}),o.jsx("p",{className:`mt-2 text-lg ${t==="light"?"text-gray-600":"text-white/70"}`,children:"Manage your client branding and settings"})]}),o.jsxs("button",{onClick:()=>c(!0),className:"flex items-center px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white rounded-xl font-medium transition-all duration-200 shadow-lg shadow-orange-500/25 hover:shadow-orange-500/40 hover:scale-105 animate-slide-up",style:{animationDelay:"0.2s"},children:[o.jsx(Dr,{className:"w-5 h-5 mr-2"}),"Add Client"]})]}),i?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((P,te)=>o.jsxs("div",{className:`backdrop-blur-xl rounded-2xl border p-6 animate-pulse ${t==="light"?"bg-white/50 border-gray-200":"bg-white/10 border-white/20"}`,children:[o.jsx("div",{className:`h-4 rounded w-32 mb-4 ${t==="light"?"bg-gray-200":"bg-white/20"}`}),o.jsx("div",{className:`h-3 rounded w-24 mb-2 ${t==="light"?"bg-gray-200":"bg-white/20"}`}),o.jsxs("div",{className:"flex space-x-2 mt-4",children:[o.jsx("div",{className:`h-8 w-8 rounded-xl ${t==="light"?"bg-gray-200":"bg-white/20"}`}),o.jsx("div",{className:`h-8 w-8 rounded-xl ${t==="light"?"bg-gray-200":"bg-white/20"}`})]})]},te))}):n.length===0?o.jsxs("div",{className:"text-center py-12 animate-fade-in",style:{animationDelay:"0.3s"},children:[o.jsx("div",{className:`w-16 h-16 backdrop-blur-xl rounded-full flex items-center justify-center mx-auto mb-4 border ${t==="light"?"bg-gray-100 border-gray-200":"bg-white/10 border-white/20"}`,children:o.jsx(Xo,{className:`w-8 h-8 ${t==="light"?"text-gray-400":"text-white/60"}`})}),o.jsx("h3",{className:`text-xl font-semibold mb-2 ${t==="light"?"text-gray-900":"text-white"}`,children:"No clients yet"}),o.jsx("p",{className:`mb-6 text-lg ${t==="light"?"text-gray-600":"text-white/70"}`,children:"Get started by adding your first client"}),o.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-xl font-medium transition-all duration-200 shadow-lg shadow-blue-500/25 hover:shadow-blue-500/40 hover:scale-105",children:[o.jsx(Dr,{className:"w-5 h-5 mr-2"}),"Add Your First Client"]})]}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map((P,te)=>o.jsx(a3,{client:P,index:te,onEdit:()=>S(P),onDelete:()=>N(P.id),theme:t},P.id))}),l&&o.jsx("div",{className:`fixed inset-0 flex items-center justify-center z-50 animate-fade-in p-4 ${t==="light"?"bg-black/50":"bg-black/70"}`,style:{paddingTop:"2rem",paddingBottom:"2rem"},children:o.jsxs("div",{className:`border rounded-2xl p-8 w-full max-w-2xl animate-scale-in shadow-2xl max-h-[85vh] overflow-y-auto my-auto ${t==="light"?"bg-white/95 border-gray-200 backdrop-blur-sm":"bg-gray-900/95 border-white/10 backdrop-blur-sm"}`,children:[o.jsx("h2",{className:`text-2xl font-semibold mb-6 bg-gradient-to-r bg-clip-text text-transparent ${t==="light"?"from-gray-800 to-blue-600":"from-white to-blue-200"}`,children:u?"Edit Client":"Add New Client"}),o.jsxs("form",{onSubmit:k,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="light"?"text-gray-700":"text-white/90"}`,children:"Client Name"}),o.jsx("input",{type:"text",value:h.name,onChange:P=>f({...h,name:P.target.value}),className:`w-full px-4 py-3 backdrop-blur-sm border rounded-xl transition-all duration-200 ${t==="light"?"bg-white/70 border-gray-200 text-gray-900 placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent hover:bg-white/90":"bg-white/10 border-white/20 text-white placeholder-white/50 focus:ring-2 focus:ring-blue-400 focus:border-transparent hover:bg-white/15"}`,placeholder:"e.g., Premium Windows & Doors",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="light"?"text-gray-700":"text-white/90"}`,children:"Company Logo"}),m?o.jsxs("div",{className:"relative group",children:[o.jsx("div",{className:"bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl p-4 flex items-center justify-center",children:o.jsx("img",{src:m,alt:"Logo preview",className:"max-h-16 max-w-32 object-contain"})}),o.jsx("button",{type:"button",onClick:O,className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center transition-colors opacity-0 group-hover:opacity-100",children:o.jsx(st,{className:"w-3 h-3"})}),o.jsx("div",{className:"mt-2 text-center",children:o.jsxs("label",{className:"text-xs text-blue-300 hover:text-blue-200 cursor-pointer underline",children:["Change Logo",o.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden"})]})})]}):o.jsxs("label",{className:"block w-full",children:[o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm border-2 border-dashed border-white/30 rounded-xl p-8 text-center hover:bg-white/15 hover:border-white/40 transition-all duration-200 cursor-pointer group",children:[o.jsx(Ts,{className:"w-8 h-8 text-white/60 mx-auto mb-2 group-hover:text-white/80 transition-colors"}),o.jsx("p",{className:"text-sm text-white/70 group-hover:text-white/90 transition-colors",children:"Click to upload logo"}),o.jsx("p",{className:"text-xs text-white/50 mt-1",children:"PNG, JPG up to 5MB"})]}),o.jsx("input",{type:"file",accept:"image/*",onChange:E,className:"hidden"})]})]}),o.jsxs("div",{className:"border-t border-white/10 pt-6",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx(Xo,{className:"w-5 h-5 text-blue-300 mr-2"}),o.jsx("h3",{className:"text-lg font-medium text-white",children:"Client Portal Access"})]}),o.jsx("p",{className:"text-sm text-white/70 mb-4",children:"Set up login credentials for your client to access their form responses"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Client Email"}),o.jsx("input",{type:"email",value:h.client_email,onChange:P=>f({...h,client_email:P.target.value}),className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15",placeholder:"client@company.com"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Additional Recipients"}),o.jsxs("div",{className:"space-y-2",children:[h.additional_emails.map((P,te)=>o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"email",value:P,onChange:B=>{const he=[...h.additional_emails];he[te]=B.target.value,f({...h,additional_emails:he}),B.target.value&&!Ju(B.target.value)&&r({title:"Invalid Email",description:"Please enter a valid email address",type:"warning"})},className:"flex-1 px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15 text-sm",placeholder:"additional@company.com"}),o.jsx("button",{type:"button",onClick:()=>{const B=h.additional_emails.filter((he,Z)=>Z!==te);f({...h,additional_emails:B})},className:"p-2 text-red-400 hover:text-red-300 hover:bg-red-500/20 rounded-lg transition-colors",title:"Remove email",children:o.jsx(st,{size:16})})]},te)),o.jsx("button",{type:"button",onClick:()=>f({...h,additional_emails:[...h.additional_emails,""]}),className:"w-full px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white/70 hover:text-white hover:bg-white/15 hover:border-white/30 transition-all duration-200 text-sm font-medium",children:"+ Add Another Email"})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-white/90 mb-2",children:"Client Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:y?"text":"password",value:h.client_password,onChange:P=>f({...h,client_password:P.target.value}),className:"w-full px-4 py-3 pr-12 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15",placeholder:"Enter secure password"}),o.jsx("button",{type:"button",onClick:()=>x(!y),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/50 hover:text-white/80 transition-colors",children:y?o.jsx(yv,{size:20}):o.jsx(pn,{size:20})})]})]})]}),o.jsx("div",{className:"bg-gradient-to-r from-blue-500/20 to-cyan-500/20 border border-blue-400/30 rounded-xl p-4 mt-4",children:o.jsxs("p",{className:"text-sm text-blue-200",children:[o.jsx("strong",{children:"Note:"})," These credentials will allow your client to log in and view only their form responses. Leave blank if you don't want to provide client access."]})})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium mb-3 ${t==="light"?"text-gray-700":"text-white/90"}`,children:" Email Notifications"}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",id:"email_notifications",checked:h.email_notifications_enabled,onChange:P=>f({...h,email_notifications_enabled:P.target.checked}),className:"w-4 h-4 text-blue-600 border-2 border-white/20 rounded focus:ring-blue-500 focus:ring-2"}),o.jsx("label",{htmlFor:"email_notifications",className:`text-sm ${t==="light"?"text-gray-700":"text-white/80"}`,children:"Send email notifications for new form responses"})]}),o.jsx("div",{className:`bg-gradient-to-r from-yellow-500/20 to-orange-500/20 border border-yellow-400/30 rounded-xl p-3 mt-3 ${h.email_notifications_enabled?"block":"hidden"}`,children:o.jsxs("p",{className:"text-sm text-yellow-200",children:[o.jsx("strong",{children:" Email Alert:"})," When enabled, email notifications will be sent to ",o.jsx("strong",{children:h.client_email||"[primary email]"}),h.additional_emails.length>0&&` and ${h.additional_emails.length} additional recipient${h.additional_emails.length>1?"s":""}`," whenever someone submits a response to their forms."]})})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium mb-2 ${t==="light"?"text-gray-700":"text-white/90"}`,children:" Webhook URL (Zapier)"}),o.jsx("input",{type:"url",value:h.webhook_url,onChange:P=>f({...h,webhook_url:P.target.value}),placeholder:"https://hooks.zapier.com/hooks/catch/...",className:`w-full px-4 py-3 backdrop-blur-sm border rounded-xl transition-all duration-200 ${t==="light"?"bg-white/70 border-gray-200 text-gray-900 placeholder-gray-500 focus:ring-2 focus:ring-purple-500 focus:border-transparent hover:bg-white/90":"bg-white/10 border-white/20 text-white placeholder-white/50 focus:ring-2 focus:ring-purple-400 focus:border-transparent hover:bg-white/15"}`}),o.jsx("p",{className:`text-xs mt-2 ${t==="light"?"text-gray-500":"text-white/60"}`,children:"Enter your Zapier webhook URL to automatically send form responses to your workflows"})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-white/90 mb-3",children:[o.jsx(Zl,{className:"w-4 h-4 inline mr-2"}),"Primary Color"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"grid grid-cols-6 gap-2",children:D.slice(0,12).map(P=>o.jsx("button",{type:"button",onClick:()=>f({...h,primary_color:P}),className:`w-10 h-10 rounded-xl transition-all duration-200 hover:scale-110 border-2 ${h.primary_color===P?"border-white shadow-lg ring-2 ring-white/50":"border-white/30 hover:border-white/60"}`,style:{backgroundColor:P},title:P},P))}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"color",value:h.primary_color,onChange:P=>f({...h,primary_color:P.target.value}),className:"w-12 h-12 border border-white/20 rounded-xl cursor-pointer bg-white/10 backdrop-blur-sm hover:scale-110 transition-transform"}),o.jsx("input",{type:"text",value:h.primary_color,onChange:P=>f({...h,primary_color:P.target.value}),className:"flex-1 px-3 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent text-sm font-mono placeholder-white/50 hover:bg-white/15 transition-all duration-200",placeholder:"#2563EB"})]})]})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-white/90 mb-3",children:[o.jsx(Zl,{className:"w-4 h-4 inline mr-2"}),"Secondary Color"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"grid grid-cols-6 gap-2",children:D.slice(6).map(P=>o.jsx("button",{type:"button",onClick:()=>f({...h,secondary_color:P}),className:`w-10 h-10 rounded-xl transition-all duration-200 hover:scale-110 border-2 ${h.secondary_color===P?"border-white shadow-lg ring-2 ring-white/50":"border-white/30 hover:border-white/60"}`,style:{backgroundColor:P},title:P},P))}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"color",value:h.secondary_color,onChange:P=>f({...h,secondary_color:P.target.value}),className:"w-12 h-12 border border-white/20 rounded-xl cursor-pointer bg-white/10 backdrop-blur-sm hover:scale-110 transition-transform"}),o.jsx("input",{type:"text",value:h.secondary_color,onChange:P=>f({...h,secondary_color:P.target.value}),className:"flex-1 px-3 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent text-sm font-mono placeholder-white/50 hover:bg-white/15 transition-all duration-200",placeholder:"#475569"})]})]})]}),o.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4 border-t border-white/10",children:[o.jsx("button",{type:"button",onClick:()=>{c(!1),d(null),f({name:"",primary_color:"#2563EB",secondary_color:"#475569",logo_file:null,client_email:"",additional_emails:[],client_password:"",email_notifications_enabled:!0,webhook_url:""}),v(null)},className:"px-6 py-2 text-white/70 hover:text-white transition-colors hover:bg-white/10 rounded-xl disabled:opacity-50",disabled:b,children:"Cancel"}),o.jsx("button",{type:"submit",disabled:b,className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 disabled:from-slate-600 disabled:to-slate-700 text-white rounded-xl transition-all duration-200 font-medium shadow-lg shadow-blue-500/25 hover:shadow-blue-500/40 hover:scale-105 disabled:scale-100 disabled:shadow-none flex items-center",children:b?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}),u?"Updating...":"Creating..."]}):u?"Update Client":"Add Client"})]})]})]})})]})}function c3({folders:e,selectedFolderId:t,uncategorizedCount:r,onSelectFolder:n,onCreateFolder:s,onEditFolder:i,onDeleteFolder:a,isCollapsed:l=!1,onToggleCollapse:c}){const{theme:u}=Ue(),[d,h]=p.useState(null);p.useEffect(()=>{const b=()=>h(null);return document.addEventListener("click",b),()=>document.removeEventListener("click",b)},[]);const f=(b,w)=>{b.stopPropagation(),h(d===w?null:w)},m=(b,w)=>{b.stopPropagation(),h(null),i(w)},v=(b,w)=>{b.stopPropagation(),h(null),a(w)};return l?o.jsx("div",{className:`w-16 border-r transition-all duration-300 animate-slide-in-left ${u==="light"?"bg-white/50 border-gray-200":"bg-white/5 border-white/10"}`,children:o.jsx("button",{onClick:c,className:`w-full p-4 flex items-center justify-center transition-colors ${u==="light"?"hover:bg-gray-100 text-gray-600":"hover:bg-white/10 text-white/60"}`,title:"Expand sidebar",children:o.jsx(em,{className:"w-5 h-5"})})}):o.jsxs("div",{className:`w-72 border-r transition-all duration-300 flex flex-col animate-slide-in-left ${u==="light"?"bg-white/50 border-gray-200":"bg-white/5 border-white/10"}`,children:[o.jsxs("div",{className:`p-4 border-b flex items-center justify-between ${u==="light"?"border-gray-200":"border-white/10"}`,children:[o.jsx("h3",{className:`font-semibold ${u==="light"?"text-gray-900":"text-white"}`,children:"Folders"}),o.jsx("button",{onClick:c,className:`p-1 rounded transition-colors ${u==="light"?"hover:bg-gray-100 text-gray-600":"hover:bg-white/10 text-white/60"}`,title:"Collapse sidebar",children:o.jsx(Zf,{className:"w-4 h-4 rotate-[-90deg]"})})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-2 space-y-1",children:[o.jsxs("button",{onClick:()=>n(null),className:`w-full flex items-center justify-between px-3 py-2.5 rounded-lg transition-all ${t===null?u==="light"?"bg-orange-100 text-orange-700":"bg-orange-500/20 text-orange-300":u==="light"?"hover:bg-gray-100 text-gray-700":"hover:bg-white/10 text-white/70"}`,children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(gC,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"All Forms"})]}),o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t===null?u==="light"?"bg-orange-200 text-orange-700":"bg-orange-500/30 text-orange-200":u==="light"?"bg-gray-200 text-gray-600":"bg-white/10 text-white/60"}`,children:e.reduce((b,w)=>b+(w.form_count||0),0)+r})]}),r>0&&o.jsxs("button",{onClick:()=>n("uncategorized"),className:`w-full flex items-center justify-between px-3 py-2.5 rounded-lg transition-all ${t==="uncategorized"?u==="light"?"bg-slate-100 text-slate-700":"bg-slate-500/20 text-slate-300":u==="light"?"hover:bg-gray-100 text-gray-700":"hover:bg-white/10 text-white/70"}`,children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx(hh,{className:"w-5 h-5"}),o.jsx("span",{className:"font-medium",children:"Uncategorized"})]}),o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${t==="uncategorized"?u==="light"?"bg-slate-200 text-slate-700":"bg-slate-500/30 text-slate-200":u==="light"?"bg-gray-200 text-gray-600":"bg-white/10 text-white/60"}`,children:r})]}),e.length>0&&o.jsx("div",{className:`my-2 border-t ${u==="light"?"border-gray-200":"border-white/10"}`}),e.map(b=>o.jsxs("div",{className:"relative",children:[o.jsxs("button",{onClick:()=>n(b.id),className:`w-full flex items-center justify-between px-3 py-2.5 rounded-lg transition-all ${t===b.id?"ring-2 ring-offset-2":u==="light"?"hover:bg-gray-100":"hover:bg-white/10"}`,style:{backgroundColor:t===b.id?`${b.color}20`:void 0,borderColor:t===b.id?`${b.color}40`:void 0,ringColor:t===b.id?b.color:void 0},children:[o.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[o.jsx(hh,{className:"w-5 h-5 flex-shrink-0",style:{color:b.color}}),o.jsx("span",{className:`font-medium truncate ${t===b.id?u==="light"?"text-gray-900":"text-white":u==="light"?"text-gray-700":"text-white/70"}`,children:b.name})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full flex-shrink-0 ${t===b.id?"opacity-80":u==="light"?"bg-gray-200 text-gray-600":"bg-white/10 text-white/60"}`,style:{backgroundColor:t===b.id?`${b.color}30`:void 0,color:t===b.id?b.color:void 0},children:b.form_count||0}),o.jsx("button",{onClick:w=>f(w,b.id),className:`p-1 rounded hover:bg-black/10 transition-colors ${u==="light"?"text-gray-500":"text-white/50"}`,children:o.jsx(jv,{className:"w-4 h-4"})})]})]}),d===b.id&&o.jsxs("div",{className:`absolute right-2 top-12 w-48 rounded-lg border shadow-lg z-10 overflow-hidden ${u==="light"?"bg-white border-gray-200":"bg-gray-800 border-white/20"}`,children:[o.jsxs("button",{onClick:w=>m(w,b),className:`w-full flex items-center space-x-2 px-4 py-2 transition-colors ${u==="light"?"hover:bg-gray-100 text-gray-700":"hover:bg-white/10 text-white"}`,children:[o.jsx(kC,{className:"w-4 h-4"}),o.jsx("span",{children:"Edit Folder"})]}),o.jsxs("button",{onClick:w=>v(w,b.id),className:`w-full flex items-center space-x-2 px-4 py-2 transition-colors ${u==="light"?"hover:bg-red-50 text-red-600":"hover:bg-red-500/10 text-red-400"}`,children:[o.jsx(Oi,{className:"w-4 h-4"}),o.jsx("span",{children:"Delete Folder"})]})]})]},b.id))]}),o.jsx("div",{className:`p-3 border-t ${u==="light"?"border-gray-200":"border-white/10"}`,children:o.jsxs("button",{onClick:s,className:"w-full flex items-center justify-center space-x-2 px-4 py-2.5 rounded-lg font-medium transition-all hover:scale-105 bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white",children:[o.jsx(mC,{className:"w-5 h-5"}),o.jsx("span",{children:"New Folder"})]})})]})}const u3=["#FF6B35","#F7931E","#FFD23F","#4ECDC4","#3B82F6","#8B5CF6","#EC4899","#EF4444","#10B981","#6366F1","#64748B","#78716C"];function d3({isOpen:e,onClose:t,onSave:r,initialData:n,mode:s}){const{theme:i}=Ue(),[a,l]=p.useState((n==null?void 0:n.name)||""),[c,u]=p.useState((n==null?void 0:n.description)||""),[d,h]=p.useState((n==null?void 0:n.color)||"#FF6B35"),[f,m]=p.useState(!1),v=async y=>{if(y.preventDefault(),!!a.trim()){m(!0);try{await r({name:a.trim(),description:c.trim(),color:d}),t(),l(""),u(""),h("#FF6B35")}catch(x){console.error("Error saving folder:",x)}finally{m(!1)}}},b=()=>{f||(l((n==null?void 0:n.name)||""),u((n==null?void 0:n.description)||""),h((n==null?void 0:n.color)||"#FF6B35"),t())};if(!e)return null;const w=o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in",children:o.jsxs("div",{className:`w-full max-w-md rounded-2xl border shadow-2xl animate-scale-in ${i==="light"?"bg-white border-gray-200":"bg-gray-900 border-white/20"}`,children:[o.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${i==="light"?"border-gray-200":"border-white/10"}`,children:[o.jsx("h2",{className:`text-2xl font-bold ${i==="light"?"text-gray-900":"text-white"}`,children:s==="create"?"Create New Folder":"Edit Folder"}),o.jsx("button",{onClick:b,disabled:f,className:`p-2 rounded-lg transition-colors ${i==="light"?"hover:bg-gray-100 text-gray-500":"hover:bg-white/10 text-white/60"}`,children:o.jsx(st,{className:"w-5 h-5"})})]}),o.jsxs("form",{onSubmit:v,className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium mb-2 ${i==="light"?"text-gray-700":"text-white/80"}`,children:["Folder Name ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:a,onChange:y=>l(y.target.value),placeholder:"e.g., Marketing Forms, Client Projects...",required:!0,maxLength:50,className:`w-full px-4 py-2 rounded-lg border transition-all ${i==="light"?"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20":"bg-white/5 border-white/20 text-white placeholder-white/40 focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20"} focus:outline-none`})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium mb-2 ${i==="light"?"text-gray-700":"text-white/80"}`,children:"Description (Optional)"}),o.jsx("textarea",{value:c,onChange:y=>u(y.target.value),placeholder:"Add a description for this folder...",rows:3,maxLength:200,className:`w-full px-4 py-2 rounded-lg border transition-all resize-none ${i==="light"?"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20":"bg-white/5 border-white/20 text-white placeholder-white/40 focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20"} focus:outline-none`})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium mb-3 ${i==="light"?"text-gray-700":"text-white/80"}`,children:"Folder Color"}),o.jsx("div",{className:"grid grid-cols-6 gap-3",children:u3.map(y=>o.jsx("button",{type:"button",onClick:()=>h(y),className:`w-10 h-10 rounded-lg transition-all hover:scale-110 ${d===y?"ring-2 ring-offset-2 ring-offset-white dark:ring-offset-gray-900":"hover:ring-2 ring-offset-2 ring-offset-white dark:ring-offset-gray-900"}`,style:{backgroundColor:y},title:y},y))}),o.jsxs("div",{className:"mt-3 flex items-center space-x-3",children:[o.jsx("input",{type:"color",value:d,onChange:y=>h(y.target.value),className:"w-12 h-10 rounded-lg border-2 cursor-pointer",title:"Custom color"}),o.jsx("span",{className:`text-sm ${i==="light"?"text-gray-600":"text-white/60"}`,children:"Or choose a custom color"})]})]}),o.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:b,disabled:f,className:`px-4 py-2 rounded-lg font-medium transition-colors ${i==="light"?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-white/10 text-white hover:bg-white/20"} disabled:opacity-50 disabled:cursor-not-allowed`,children:"Cancel"}),o.jsx("button",{type:"submit",disabled:f||!a.trim(),className:"px-6 py-2 bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105",children:f?"Saving...":s==="create"?"Create Folder":"Save Changes"})]})]})]})});return Hr.createPortal(w,document.body)}function h3({folderName:e,folderColor:t,size:r="md"}){const{theme:n}=Ue(),s={sm:"px-2 py-1 text-xs",md:"px-3 py-1.5 text-sm",lg:"px-4 py-2 text-base"},i={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"};return o.jsxs("div",{className:`inline-flex items-center space-x-1.5 rounded-full font-medium backdrop-blur-sm border ${s[r]}`,style:{backgroundColor:`${t}20`,borderColor:`${t}40`,color:n==="light"?t:`${t}dd`},children:[o.jsx(hh,{className:i[r],style:{color:t}}),o.jsx("span",{children:e})]})}function f3({selectedCount:e,folders:t,onMoveToFolder:r,onClearSelection:n}){const{theme:s}=Ue();return e===0?null:o.jsx("div",{className:`fixed bottom-8 left-1/2 transform -translate-x-1/2 rounded-2xl border shadow-2xl backdrop-blur-xl p-4 animate-slide-up z-40 ${s==="light"?"bg-white/90 border-gray-200":"bg-gray-900/90 border-white/20"}`,children:o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("div",{className:`flex items-center space-x-2 px-4 py-2 rounded-lg ${s==="light"?"bg-blue-50":"bg-blue-500/20"}`,children:o.jsxs("span",{className:`font-semibold ${s==="light"?"text-blue-700":"text-blue-300"}`,children:[e," form",e!==1?"s":""," selected"]})}),o.jsxs("div",{className:"relative",children:[o.jsxs("select",{onChange:i=>{const a=i.target.value;r(a==="null"?null:a),i.target.value=""},className:`px-4 py-2 rounded-lg border font-medium cursor-pointer transition-all appearance-none pr-10 ${s==="light"?"bg-white border-gray-300 text-gray-700 hover:border-orange-500":"bg-white/10 border-white/20 text-white hover:border-orange-400"} focus:outline-none focus:ring-2 focus:ring-orange-500/20`,children:[o.jsx("option",{value:"",children:"Move to folder..."}),o.jsx("option",{value:"null",children:" Uncategorized"}),t.map(i=>o.jsxs("option",{value:i.id,children:[" ",i.name]},i.id))]}),o.jsx(fC,{className:`absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 pointer-events-none ${s==="light"?"text-gray-400":"text-white/40"}`})]}),o.jsx("button",{onClick:n,className:`p-2 rounded-lg transition-colors ${s==="light"?"hover:bg-gray-100 text-gray-500":"hover:bg-white/10 text-white/60"}`,title:"Clear selection",children:o.jsx(st,{className:"w-5 h-5"})})]})})}const m3=({form:e,index:t,responseCount:r,isSelected:n,onToggleSelect:s,onViewResponses:i,onMoveToFolder:a,onCopyEmbed:l,onPreview:c,onEdit:u,onDuplicate:d,onToggleStatus:h,onDelete:f,folders:m,openMenuId:v,onToggleMenu:b,FolderBadge:w})=>{var x;e.clients&&e.clients.primary_color;const y=v===e.id;return o.jsx(Wt.div,{className:`relative bg-white dark:bg-white/5 rounded-2xl border border-gray-200 dark:border-white/10 hover:shadow-2xl transition-all duration-300 ${y?"z-[100] overflow-visible":"overflow-hidden"}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:t*.05},children:o.jsx(Wt.div,{className:"relative z-10 p-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.3,delay:t*.05+.1},children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start space-x-4 flex-1",children:[o.jsx("input",{type:"checkbox",checked:n,onChange:s,className:"mt-1 w-5 h-5 rounded border-2 border-gray-300 dark:border-white/30 bg-white dark:bg-white/10 checked:bg-orange-500 checked:border-orange-500 cursor-pointer transition-all"}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center space-x-3 mb-3 flex-wrap gap-2",children:[o.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:e.name}),e.internal_name&&o.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded bg-orange-500/20 text-orange-600 dark:text-orange-300 border border-orange-400/30",children:e.internal_name}),o.jsx("span",{className:`px-3 py-1.5 text-xs font-medium rounded-full backdrop-blur-sm border ${e.is_active?"bg-green-500/20 text-green-600 dark:text-green-300 border-green-400/30":"bg-slate-500/20 text-slate-600 dark:text-slate-300 border-slate-400/30"}`,children:e.is_active?"Active":"Inactive"}),e.form_folders&&w&&o.jsx(w,{folderName:e.form_folders.name,folderColor:e.form_folders.color,size:"sm"})]}),e.description&&o.jsx("p",{className:"text-gray-700 dark:text-white/70 mb-4 text-base leading-relaxed",children:e.description}),o.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600 dark:text-white/60",children:[o.jsxs("span",{className:"flex items-center",children:[o.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2"}),"Client: ",(x=e.clients)==null?void 0:x.name]}),o.jsx("span",{children:""}),o.jsxs("span",{children:["Created ",new Date(e.created_at).toLocaleDateString()]})]})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsxs("button",{onClick:i,className:"flex items-center space-x-2 px-4 py-2 text-sm font-medium rounded-xl transition-all duration-200 backdrop-blur-sm border border-gray-200 dark:border-white/20 bg-gradient-to-r from-blue-500/10 to-purple-600/10 dark:from-blue-500/20 dark:to-purple-600/20 text-gray-900 dark:text-white hover:from-blue-500/20 hover:to-purple-600/20 dark:hover:from-blue-500/30 dark:hover:to-purple-600/30 hover:scale-105",title:"View responses",children:[o.jsx(Ic,{className:"w-4 h-4"}),o.jsx("span",{children:"Responses"}),r>0&&o.jsx("span",{className:"px-2 py-0.5 text-xs rounded-full bg-blue-500 text-white font-semibold",children:r})]}),o.jsxs("select",{value:e.folder_id||"",onChange:g=>a(g.target.value||null),className:"px-3 py-2 text-sm font-medium rounded-xl transition-all duration-200 backdrop-blur-sm border border-gray-200 dark:border-white/20 bg-white/50 dark:bg-white/10 text-gray-900 dark:text-white hover:bg-white/70 dark:hover:bg-white/20 cursor-pointer focus:outline-none focus:ring-2 focus:ring-orange-500/20",title:"Move to folder",children:[o.jsx("option",{value:"",className:"bg-gray-100 dark:bg-gray-800",children:" Uncategorized"}),m.map(g=>o.jsxs("option",{value:g.id,className:"bg-gray-100 dark:bg-gray-800",children:[" ",g.name]},g.id))]}),o.jsx("button",{onClick:l,className:"p-3 text-gray-600 dark:text-white/60 hover:text-blue-600 dark:hover:text-blue-300 hover:bg-blue-50 dark:hover:bg-blue-500/20 rounded-xl transition-all duration-200 backdrop-blur-sm border border-transparent hover:border-blue-200 dark:hover:border-blue-400/30",title:"Copy embed code",children:o.jsx(hC,{className:"w-5 h-5"})}),o.jsxs("div",{className:"relative z-[110]",children:[o.jsx("button",{onClick:b,className:"p-3 text-gray-600 dark:text-white/60 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-white/20 rounded-xl transition-all duration-200 backdrop-blur-sm border border-transparent hover:border-gray-200 dark:hover:border-white/30",title:"More actions",children:o.jsx(jv,{className:"w-5 h-5"})}),y&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-[90]",onClick:b}),o.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 rounded-xl bg-white dark:bg-gray-800 border border-gray-200 dark:border-white/20 shadow-2xl overflow-hidden z-[120] animate-scale-in",children:[o.jsxs("button",{onClick:()=>{c(),b()},className:"w-full flex items-center space-x-3 px-4 py-3 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-white/10 transition-colors",children:[o.jsx(pn,{className:"w-4 h-4 text-green-500 dark:text-green-300"}),o.jsx("span",{children:"Preview"})]}),o.jsxs("button",{onClick:()=>{u(),b()},className:"w-full flex items-center space-x-3 px-4 py-3 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-white/10 transition-colors",children:[o.jsx(Sv,{className:"w-4 h-4 text-purple-500 dark:text-purple-300"}),o.jsx("span",{children:"Edit"})]}),o.jsxs("button",{onClick:()=>{d(),b()},className:"w-full flex items-center space-x-3 px-4 py-3 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-white/10 transition-colors",children:[o.jsx(xv,{className:"w-4 h-4 text-orange-500 dark:text-orange-300"}),o.jsx("span",{children:"Duplicate"})]}),o.jsx("div",{className:"h-px bg-gray-200 dark:bg-white/10 my-1"}),o.jsx("button",{onClick:()=>{h(),b()},className:"w-full flex items-center space-x-3 px-4 py-3 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-white/10 transition-colors",children:e.is_active?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-400"})}),o.jsx("span",{children:"Deactivate"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"w-4 h-4 flex items-center justify-center",children:o.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400"})}),o.jsx("span",{children:"Activate"})]})}),o.jsxs("button",{onClick:()=>{f(),b()},className:"w-full flex items-center space-x-3 px-4 py-3 text-sm text-red-600 dark:text-red-300 hover:bg-red-50 dark:hover:bg-red-500/20 transition-colors",children:[o.jsx(Oi,{className:"w-4 h-4"}),o.jsx("span",{children:"Delete"})]})]})]})]})]})]})})})},p3=({currentPage:e,totalPages:t,onPageChange:r,theme:n})=>{if(t<=1)return null;const s=()=>{const i=[];if(t>7){i.push(1),e>3&&i.push("...");for(let l=Math.max(2,e-1);l<=Math.min(t-1,e+1);l++)i.push(l);e<t-2&&i.push("..."),i.push(t)}else for(let l=1;l<=t;l++)i.push(l);return i};return o.jsxs("div",{className:"flex items-center justify-center space-x-2 mt-8",children:[o.jsx("button",{onClick:()=>r(e-1),disabled:e===1,className:`p-2 rounded-xl transition-all duration-200 ${e===1?"opacity-50 cursor-not-allowed":"hover:scale-110"} ${n==="light"?"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50":"bg-white/10 border border-white/20 text-white hover:bg-white/20"}`,title:"Previous page",children:o.jsx(dC,{className:"w-5 h-5"})}),s().map((i,a)=>{if(i==="...")return o.jsx("span",{className:`px-3 py-2 ${n==="light"?"text-gray-500":"text-white/60"}`,children:"..."},`ellipsis-${a}`);const l=i,c=l===e;return o.jsx("button",{onClick:()=>r(l),className:`px-4 py-2 rounded-xl font-medium transition-all duration-200 ${c?"bg-gradient-to-r from-orange-500 to-red-600 text-white shadow-lg shadow-orange-500/25":n==="light"?"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50 hover:scale-105":"bg-white/10 border border-white/20 text-white hover:bg-white/20 hover:scale-105"}`,children:l},l)}),o.jsx("button",{onClick:()=>r(e+1),disabled:e===t,className:`p-2 rounded-xl transition-all duration-200 ${e===t?"opacity-50 cursor-not-allowed":"hover:scale-110"} ${n==="light"?"bg-white border border-gray-200 text-gray-700 hover:bg-gray-50":"bg-white/10 border border-white/20 text-white hover:bg-white/20"}`,title:"Next page",children:o.jsx(em,{className:"w-5 h-5"})})]})};async function g3(e){try{const{data:t,error:r}=await z.from("form_folders").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(r)throw r;const{data:n,error:s}=await z.from("forms").select("folder_id").eq("user_id",e);if(s)throw s;const i=n==null?void 0:n.reduce((l,c)=>(c.folder_id&&(l[c.folder_id]=(l[c.folder_id]||0)+1),l),{});return{data:t==null?void 0:t.map(l=>({...l,form_count:(i==null?void 0:i[l.id])||0})),error:null}}catch(t){return console.error("Error fetching folders:",t),{data:null,error:t}}}async function x3(e,t){try{const{data:r,error:n}=await z.from("form_folders").insert({user_id:e,name:t.name,description:t.description||null,color:t.color||"#FF6B35"}).select().single();if(n)throw n;return{data:r,error:null}}catch(r){return console.error("Error creating folder:",r),{data:null,error:r}}}async function y3(e,t){try{const{data:r,error:n}=await z.from("form_folders").update(t).eq("id",e).select().single();if(n)throw n;return{data:r,error:null}}catch(r){return console.error("Error updating folder:",r),{data:null,error:r}}}async function b3(e){try{const{error:t}=await z.from("form_folders").delete().eq("id",e);if(t)throw t;return{error:null}}catch(t){return console.error("Error deleting folder:",t),{error:t}}}async function v3(e,t){try{const{error:r}=await z.from("forms").update({folder_id:t}).eq("id",e);if(r)throw r;return{error:null}}catch(r){return console.error("Error updating form folder:",r),{error:r}}}async function w3(e,t){try{const{error:r}=await z.from("forms").update({folder_id:t}).in("id",e);if(r)throw r;return{error:null}}catch(r){return console.error("Error moving forms to folder:",r),{error:r}}}async function _3(e){try{const{count:t,error:r}=await z.from("forms").select("*",{count:"exact",head:!0}).eq("user_id",e).is("folder_id",null);if(r)throw r;return{count:t||0,error:null}}catch(t){return console.error("Error getting uncategorized count:",t),{count:0,error:t}}}function j3(){const{user:e}=kr(),{theme:t}=Ue(),{push:r}=ts(),n=Zn(),[s,i]=p.useState([]),[a,l]=p.useState(!0),[c,u]=p.useState(""),[d,h]=p.useState(1),f=10,[m,v]=p.useState([]),[b,w]=p.useState(null),[y,x]=p.useState(0),[g,_]=p.useState(!1),[k,S]=p.useState(null),[N,E]=p.useState(!1),[O,D]=p.useState(new Set),[P,te]=p.useState({}),[B,he]=p.useState(null);p.useEffect(()=>{R(),e&&(Z(),ne())},[e]),p.useEffect(()=>{s.length>0&&fe()},[s.length]);const Z=async()=>{if(!e)return;const{data:Q,error:ee}=await g3(e.id);ee?console.error("Error fetching folders:",ee):v(Q||[])},ne=async()=>{if(!e)return;const{count:Q,error:ee}=await _3(e.id);ee?console.error("Error fetching uncategorized count:",ee):x(Q)},fe=async()=>{if(e)try{const{data:Q,error:ee}=await z.from("responses").select("form_id").in("form_id",s.map(lt=>lt.id));if(ee)throw ee;const ze={};Q==null||Q.forEach(lt=>{ze[lt.form_id]=(ze[lt.form_id]||0)+1}),te(ze)}catch(Q){console.error("Error fetching response counts:",Q)}},R=async()=>{if(e)try{const{data:Q,error:ee}=await z.from("forms").select(`
          *,
          internal_name,
          clients (
            name,
            primary_color
          ),
          form_folders (
            id,
            name,
            color
          )
        `).eq("user_id",e.id).order("created_at",{ascending:!1});if(ee)throw ee;i(Q||[])}catch(Q){console.error("Error fetching forms:",Q),r({type:"error",message:"Error loading forms"})}finally{l(!1)}},re=async(Q,ee)=>{try{const{error:ze}=await z.from("forms").update({is_active:!ee}).eq("id",Q);if(ze)throw ze;R(),r({type:"success",message:"Form status updated"})}catch(ze){console.error("Error updating form status:",ze),r({type:"error",message:"Error updating form"})}},ae=async Q=>{if(confirm("Are you sure you want to delete this form?"))try{const{error:ee}=await z.from("forms").delete().eq("id",Q);if(ee)throw ee;R(),r({type:"success",message:"Form deleted"})}catch(ee){console.error("Error deleting form:",ee),r({type:"error",message:"Error deleting form"})}},V=Q=>{const ee=window.location.origin,lt=window.location.hostname!=="noahung.github.io"?"":"/online-designer-beta",Et=`<div style="width:100%;"><iframe id="designerFormIframe" src="${ee}${lt}/form/${Q}" style="width:100%;border:none;min-height:400px;" allowfullscreen></iframe></div>
<script>
window.addEventListener("message", function(event) {
  if (event.data && event.data.type === "designerFormHeight" && event.data.height) {
    var iframe = document.getElementById("designerFormIframe");
    if (iframe) {
      var newHeight = Math.max(event.data.height, 200); // Ensure minimum height
      iframe.style.height = newHeight + "px";
      console.log('[Parent] Updated iframe height to:', newHeight);
    }
  }
}, false);

// Also listen for load events to ensure initial sizing
document.addEventListener("DOMContentLoaded", function() {
  var iframe = document.getElementById("designerFormIframe");
  if (iframe) {
    // Set a reasonable initial height
    iframe.style.height = "400px";
  }
});
<\/script>`;navigator.clipboard.writeText(Et),r({type:"success",message:"Embed code copied to clipboard"})},pe=async Q=>{n(`/forms/edit/${Q}`)},ye=async Q=>{try{const{data:ee,error:ze}=await z.from("forms").select("*").eq("id",Q).single();if(ze)throw ze;const{data:lt,error:Et}=await z.from("form_steps").select(`
          *,
          form_options (*)
        `).eq("form_id",Q).order("step_order");if(Et)throw Et;const{data:dt,error:ar}=await z.from("forms").insert({name:`${ee.name} (Copy)`,description:ee.description,form_data:ee.form_data,user_id:e==null?void 0:e.id,client_id:ee.client_id,is_active:!1,primary_color:ee.primary_color,secondary_color:ee.secondary_color,background_color:ee.background_color,welcome_message:ee.welcome_message,form_theme:ee.form_theme,primary_button_color:ee.primary_button_color,primary_button_text_color:ee.primary_button_text_color,secondary_button_color:ee.secondary_button_color,secondary_button_text_color:ee.secondary_button_text_color,internal_name:ee.internal_name}).select().single();if(ar)throw ar;for(const Ie of lt||[]){const{data:lr,error:Nr}=await z.from("form_steps").insert({form_id:dt.id,title:Ie.title,description:Ie.description||null,question_type:Ie.question_type,is_required:Ie.is_required,step_order:Ie.step_order,max_file_size:Ie.max_file_size,allowed_file_types:Ie.allowed_file_types,dimension_type:Ie.dimension_type,dimension_units:Ie.dimension_units,scale_type:Ie.scale_type,scale_min:Ie.scale_min,scale_max:Ie.scale_max,images_per_row:Ie.images_per_row,crop_images_to_square:Ie.crop_images_to_square??!0,frames_max_count:Ie.frames_max_count,frames_require_image:Ie.frames_require_image,frames_require_location:Ie.frames_require_location,frames_require_measurements:Ie.frames_require_measurements}).select().single();if(Nr)throw Nr;for(const zt of Ie.form_options||[]){const{error:cr}=await z.from("form_options").insert({step_id:lr.id,label:zt.label,image_url:zt.image_url,option_order:zt.option_order,jump_to_step:zt.jump_to_step});if(cr)throw cr}}R(),r({type:"success",message:"Form duplicated successfully!"})}catch(ee){console.error("Error duplicating form:",ee),r({type:"error",message:"Failed to duplicate form"})}},ve=async Q=>{if(!e)return;const{error:ee}=await x3(e.id,Q);ee?r({type:"error",message:"Failed to create folder"}):(r({type:"success",message:"Folder created successfully!"}),Z())},Se=async Q=>{if(!k)return;const{error:ee}=await y3(k.id,Q);ee?r({type:"error",message:"Failed to update folder"}):(r({type:"success",message:"Folder updated successfully!"}),Z(),R())},be=async Q=>{if(!confirm("Delete this folder? Forms inside will be moved to Uncategorized."))return;const{error:ee}=await b3(Q);ee?r({type:"error",message:"Failed to delete folder"}):(r({type:"success",message:"Folder deleted successfully!"}),b===Q&&w(null),Z(),R(),ne())},K=async(Q,ee)=>{const{error:ze}=await v3(Q,ee);ze?r({type:"error",message:"Failed to move form"}):(r({type:"success",message:"Form moved successfully!"}),R(),Z(),ne())},q=async Q=>{const ee=Array.from(O),{error:ze}=await w3(ee,Q);ze?r({type:"error",message:"Failed to move forms"}):(r({type:"success",message:`${ee.length} form(s) moved successfully!`}),D(new Set),R(),Z(),ne())},De=Q=>{const ee=new Set(O);ee.has(Q)?ee.delete(Q):ee.add(Q),D(ee)},me=s.filter(Q=>{var lt,Et,dt;const ee=c.toLowerCase();return Q.name.toLowerCase().includes(ee)||((lt=Q.internal_name)==null?void 0:lt.toLowerCase().includes(ee))||((Et=Q.description)==null?void 0:Et.toLowerCase().includes(ee))||((dt=Q.clients)==null?void 0:dt.name.toLowerCase().includes(ee))?b===null?!0:b==="uncategorized"?Q.folder_id===null:Q.folder_id===b:!1}),Ve=Math.ceil(me.length/f),Le=(d-1)*f,Ct=Le+f,it=me.slice(Le,Ct);return p.useEffect(()=>{h(1)},[c,b]),o.jsxs(o.Fragment,{children:[o.jsx(d3,{isOpen:g,onClose:()=>{_(!1),S(null)},onSave:k?Se:ve,initialData:k?{name:k.name,description:k.description||"",color:k.color}:void 0,mode:k?"edit":"create"}),o.jsx(f3,{selectedCount:O.size,folders:m,onMoveToFolder:q,onClearSelection:()=>D(new Set)}),o.jsxs("div",{className:"flex h-screen",children:[o.jsx(c3,{folders:m,selectedFolderId:b,uncategorizedCount:y,onSelectFolder:w,onCreateFolder:()=>_(!0),onEditFolder:Q=>{S(Q),_(!0)},onDeleteFolder:be,isCollapsed:N,onToggleCollapse:()=>E(!N)}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:o.jsxs("div",{className:"p-8 animate-fade-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{className:"animate-slide-up",children:[o.jsx("h1",{className:`text-4xl font-bold bg-gradient-to-r bg-clip-text text-transparent ${t==="light"?"from-gray-800 via-orange-600 to-red-600":"from-white via-orange-100 to-red-200"}`,children:"Forms"}),o.jsx("p",{className:`mt-2 text-lg ${t==="light"?"text-gray-600":"text-white/70"}`,children:"Create and manage your client forms"})]}),o.jsxs("button",{onClick:()=>n("/forms/new"),className:"group flex items-center px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white rounded-xl font-medium transition-all duration-200 shadow-lg shadow-orange-500/25 hover:shadow-orange-500/40 hover:scale-105 animate-slide-up",style:{animationDelay:"0.2s"},children:[o.jsx(Dr,{className:"w-5 h-5 mr-2 group-hover:rotate-90 transition-transform duration-200"}),"Create Form"]})]}),s.length>0&&o.jsxs("div",{className:"mb-6 animate-slide-up",style:{animationDelay:"0.3s"},children:[o.jsxs("div",{className:"relative",children:[o.jsx(Jo,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 ${t==="light"?"text-gray-400":"text-white/40"}`}),o.jsx("input",{type:"text",placeholder:"Search forms by name, internal name, description, or client...",value:c,onChange:Q=>u(Q.target.value),className:`w-full pl-12 pr-4 py-3 rounded-xl border transition-all duration-200 ${t==="light"?"bg-white border-gray-200 text-gray-900 placeholder-gray-400 focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20":"bg-white/10 backdrop-blur-xl border-white/20 text-white placeholder-white/40 focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20"} focus:outline-none`}),c&&o.jsx("button",{onClick:()=>u(""),className:`absolute right-4 top-1/2 transform -translate-y-1/2 text-sm font-medium transition-colors ${t==="light"?"text-gray-500 hover:text-gray-700":"text-white/60 hover:text-white"}`,children:"Clear"})]}),c&&o.jsxs("p",{className:`mt-2 text-sm ${t==="light"?"text-gray-600":"text-white/60"}`,children:["Found ",me.length," form",me.length!==1?"s":"",Ve>1&&`  Page ${d} of ${Ve}`]})]}),a?o.jsx("div",{className:"space-y-6",children:[...Array(5)].map((Q,ee)=>o.jsx("div",{className:`backdrop-blur-xl rounded-2xl border p-6 animate-pulse ${t==="light"?"bg-white/50 border-gray-200":"bg-white/10 border-white/20"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:`h-6 rounded-lg w-48 ${t==="light"?"bg-gray-200":"bg-white/20"}`}),o.jsx("div",{className:`h-4 rounded-lg w-32 ${t==="light"?"bg-gray-200":"bg-white/20"}`}),o.jsx("div",{className:`h-3 rounded-lg w-24 ${t==="light"?"bg-gray-200":"bg-white/20"}`})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsx("div",{className:`h-10 w-24 rounded-lg ${t==="light"?"bg-gray-200":"bg-white/20"}`}),o.jsx("div",{className:`h-10 w-10 rounded-lg ${t==="light"?"bg-gray-200":"bg-white/20"}`})]})]})},ee))}):s.length===0?o.jsxs("div",{className:"text-center py-16 animate-fade-in",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-blue-500/20 to-purple-600/20 backdrop-blur-xl rounded-2xl border border-blue-400/30 flex items-center justify-center mx-auto mb-6 animate-scale-in",children:o.jsx(sr,{className:"w-10 h-10 text-blue-300"})}),o.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"No forms yet"}),o.jsx("p",{className:"text-white/70 mb-8 text-lg max-w-md mx-auto",children:"Create your first form to start collecting responses from your clients"}),o.jsxs("button",{onClick:()=>n("/forms/new"),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl font-medium transition-all duration-200 shadow-lg shadow-blue-500/25 hover:shadow-blue-500/40 hover:scale-105",children:[o.jsx(Dr,{className:"w-5 h-5 mr-2"}),"Create Your First Form"]})]}):me.length===0?o.jsxs("div",{className:"text-center py-16 animate-fade-in",children:[o.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-orange-500/20 to-red-600/20 backdrop-blur-xl rounded-2xl border border-orange-400/30 flex items-center justify-center mx-auto mb-6 animate-scale-in",children:o.jsx(Jo,{className:"w-10 h-10 text-orange-300"})}),o.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"No forms found"}),o.jsx("p",{className:"text-white/70 mb-8 text-lg max-w-md mx-auto",children:"No forms match your search criteria. Try a different search term."}),o.jsx("button",{onClick:()=>u(""),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-orange-500 to-red-600 hover:from-orange-600 hover:to-red-700 text-white rounded-xl font-medium transition-all duration-200 shadow-lg shadow-orange-500/25 hover:shadow-orange-500/40 hover:scale-105",children:"Clear Search"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"space-y-6",children:it.map((Q,ee)=>o.jsx(m3,{form:Q,index:ee,responseCount:P[Q.id]||0,isSelected:O.has(Q.id),onToggleSelect:()=>De(Q.id),onViewResponses:()=>n(`/forms/${Q.id}/responses`),onMoveToFolder:ze=>K(Q.id,ze),onCopyEmbed:()=>V(Q.id),onPreview:()=>window.open(`/form/${Q.id}`,"_blank"),onEdit:()=>pe(Q.id),onDuplicate:()=>ye(Q.id),onToggleStatus:()=>re(Q.id,Q.is_active),onDelete:()=>ae(Q.id),folders:m,openMenuId:B,onToggleMenu:()=>he(B===Q.id?null:Q.id),theme:t,FolderBadge:h3},Q.id))}),o.jsx(p3,{currentPage:d,totalPages:Ve,onPageChange:h,theme:t})]})]})})]})]})}function k3(){const{user:e,userType:t,clientData:r}=kr(),n=Zn(),[s,i]=p.useState([]),[a,l]=p.useState(!0),[c,u]=p.useState(""),[d,h]=p.useState(""),[f,m]=p.useState(""),[v,b]=p.useState([]),[w,y]=p.useState([]),{push:x}=ts(),[g,_]=p.useState(""),[k,S]=p.useState(""),[N,E]=p.useState(10),[O,D]=p.useState(1),P=new Date,te=new Date(P.getFullYear(),P.getMonth(),P.getDate()),B=new Date(P);B.setDate(P.getDate()-7);const he=new Date(P);he.setDate(P.getDate()-30);const Z={total:s.length,today:s.filter(V=>new Date(V.submitted_at)>=te).length,thisWeek:s.filter(V=>new Date(V.submitted_at)>=B).length,thisMonth:s.filter(V=>new Date(V.submitted_at)>=he).length},ne=Math.ceil(s.length/N),fe=s.slice((O-1)*N,O*N);p.useEffect(()=>{R()},[e]);const R=async()=>{if(e)try{console.log("Fetching responses data for user:",e.id,"userType:",t);let V=[],pe=[],ye=[];if(t==="client"&&r){console.log("Client view - fetching for client:",r.id);const{data:ve,error:Se}=await z.from("forms").select("id, name, client_id").eq("client_id",r.id).order("name");if(console.log("Client forms data:",ve),console.log("Client forms error:",Se),Se)throw Se;if(V=ve||[],pe=[{name:r.name}],V.length>0){const{data:be,error:K}=await z.from("responses").select(`
              id,
              contact_name,
              contact_email,
              contact_phone,
              contact_postcode,
              preferred_contact,
              project_details,
              submitted_at,
              form_id
            `).in("form_id",V.map(q=>q.id)).order("submitted_at",{ascending:!1});if(console.log("Client responses data:",be),console.log("Client responses error:",K),K)throw K;if(be&&be.length>0){const q=await Promise.all(be.map(async De=>{const me=V.find(Ve=>Ve.id===De.form_id);return{...De,forms:me?[{id:me.id,name:me.name,clients:{name:r.name}}]:null}}));console.log("Enriched client responses:",q),ye=q}else ye=be||[]}}else{console.log("Admin view - fetching for admin user:",e.id);const{data:ve}=await z.from("forms").select("id, name").eq("user_id",e.id).order("name");console.log("Admin forms data:",ve),V=ve||[];const{data:Se}=await z.from("clients").select("name").eq("user_id",e.id).order("name");console.log("Admin clients data:",Se),pe=Se||[];const{data:be,error:K}=await z.from("responses").select(`
            id,
            contact_name,
            contact_email,
            contact_phone,
            contact_postcode,
            preferred_contact,
            project_details,
            submitted_at,
            form_id
          `).in("form_id",V.map(q=>q.id)).order("submitted_at",{ascending:!1});if(console.log("Simple admin responses:",{adminResponsesData:be,error:K}),K)throw K;if(be&&be.length>0){const q=await Promise.all(be.map(async De=>{const{data:me}=await z.from("forms").select(`
                  id,
                  name,
                  client_id,
                  clients (
                    name
                  )
                `).eq("id",De.form_id).single();return console.log("Form data for response:",De.id,me),{...De,forms:me?[me]:null}}));console.log("Enriched responses:",q),ye=q}else ye=be||[]}console.log("Final data:",{formsData:V.length,clientsData:pe.length,responsesData:ye.length}),console.log("Sample response data:",ye[0]),b(V),y(pe),i(ye)}catch(V){console.error("Error fetching responses:",V),x({type:"error",message:"Error loading responses"})}finally{l(!1)}},re=s.filter(V=>{var me,Ve,Le,Ct,it,Q,ee;const pe=c===""||((me=V.contact_name)==null?void 0:me.toLowerCase().includes(c.toLowerCase()))||((Ve=V.contact_email)==null?void 0:Ve.toLowerCase().includes(c.toLowerCase())),ye=(Ct=(Le=V.forms)==null?void 0:Le[0])==null?void 0:Ct.name,ve=d===""||ye===d,Se=(ee=(Q=(it=V.forms)==null?void 0:it[0])==null?void 0:Q.clients)==null?void 0:ee.name,be=f===""||Se===f,K=new Date(V.submitted_at),q=!g||K>=new Date(g),De=!k||K<=new Date(k+"T23:59:59");return pe&&ve&&be&&q&&De}),ae=()=>{const V=["Name","Email","Phone","Postcode","Form","Client","Submitted At"],pe=re.map(K=>{var q,De,me,Ve,Le;return[K.contact_name||"",K.contact_email||"",K.contact_phone||"",K.contact_postcode||"",((De=(q=K.forms)==null?void 0:q[0])==null?void 0:De.name)||"",((Le=(Ve=(me=K.forms)==null?void 0:me[0])==null?void 0:Ve.clients)==null?void 0:Le.name)||"",new Date(K.submitted_at).toLocaleDateString()]}),ye=[V,...pe].map(K=>K.map(q=>`"${q}"`).join(",")).join(`
`),ve=new Blob([ye],{type:"text/csv"}),Se=window.URL.createObjectURL(ve),be=document.createElement("a");be.href=Se,be.download=`responses-${new Date().toISOString().split("T")[0]}.csv`,be.click(),window.URL.revokeObjectURL(Se),x({type:"success",message:"CSV export ready"})};return p.useEffect(()=>{D(1)},[c,d,f,N]),o.jsxs("div",{className:"p-8 animate-fade-in",children:[o.jsxs("div",{className:"flex items-center justify-between mb-8",children:[o.jsxs("div",{className:"animate-slide-up",children:[o.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 via-orange-600 to-red-600 dark:from-white dark:via-orange-100 dark:to-red-200 bg-clip-text text-transparent",children:t==="client"?`${r==null?void 0:r.name} - Form Responses`:"Responses"}),o.jsx("p",{className:"text-gray-600 dark:text-white/70 mt-2 text-lg",children:t==="client"?"View and export your form submissions":"View and export form submissions"})]}),o.jsxs("button",{onClick:ae,className:"flex items-center px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl font-medium transition-all duration-200 shadow-lg shadow-green-500/25 hover:shadow-green-500/40 hover:scale-105 animate-slide-up",style:{animationDelay:"0.2s"},children:[o.jsx(Ln,{className:"w-5 h-5 mr-2"}),"Export CSV"]})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8 animate-fade-in",style:{animationDelay:"0.2s"},children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white shadow-lg shadow-blue-500/25 hover:shadow-blue-500/40 transition-all duration-200 hover:scale-105",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Total Responses"}),o.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:o.jsx(sr,{className:"w-5 h-5"})})]}),o.jsx("p",{className:"text-3xl font-bold",children:Z.total})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 text-white shadow-lg shadow-green-500/25 hover:shadow-green-500/40 transition-all duration-200 hover:scale-105",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-sm font-medium opacity-90",children:"Today"}),o.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:o.jsx(On,{className:"w-5 h-5"})})]}),o.jsx("p",{className:"text-3xl font-bold",children:Z.today})]}),o.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-6 text-white shadow-lg shadow-purple-500/25 hover:shadow-purple-500/40 transition-all duration-200 hover:scale-105",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-sm font-medium opacity-90",children:"This Week"}),o.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:o.jsx(On,{className:"w-5 h-5"})})]}),o.jsx("p",{className:"text-3xl font-bold",children:Z.thisWeek})]}),o.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-red-600 rounded-2xl p-6 text-white shadow-lg shadow-orange-500/25 hover:shadow-orange-500/40 transition-all duration-200 hover:scale-105",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("h3",{className:"text-sm font-medium opacity-90",children:"This Month"}),o.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:o.jsx(On,{className:"w-5 h-5"})})]}),o.jsx("p",{className:"text-3xl font-bold",children:Z.thisMonth})]})]}),o.jsxs("div",{className:"bg-white/80 dark:bg-white/10 backdrop-blur-xl rounded-2xl border border-gray-200 dark:border-white/20 p-6 mb-8 shadow-lg animate-fade-in",style:{animationDelay:"0.3s"},children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-white/90 mb-2",children:"Search"}),o.jsxs("div",{className:"relative",children:[o.jsx(Jo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-white/40 w-5 h-5"}),o.jsx("input",{type:"text",value:c,onChange:V=>u(V.target.value),className:"w-full pl-10 pr-4 py-3 bg-white/90 dark:bg-white/10 backdrop-blur-sm border border-gray-300 dark:border-white/20 rounded-xl text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-white/50 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white dark:hover:bg-white/15",placeholder:"Search by name or email..."})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-white/90 mb-2",children:"Form"}),o.jsxs("select",{value:d,onChange:V=>h(V.target.value),className:"w-full px-3 py-3 bg-white/90 dark:bg-white/10 backdrop-blur-sm border border-gray-300 dark:border-white/20 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white dark:hover:bg-white/15",children:[o.jsx("option",{value:"",className:"bg-white dark:bg-slate-800 text-gray-900 dark:text-white",children:"All Forms"}),v.map(V=>o.jsx("option",{value:V.name,className:"bg-white dark:bg-slate-800 text-gray-900 dark:text-white",children:V.name},V.id))]})]}),t==="admin"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-white/90 mb-2",children:"Client"}),o.jsxs("select",{value:f,onChange:V=>m(V.target.value),className:"w-full px-3 py-3 bg-white/90 dark:bg-white/10 backdrop-blur-sm border border-gray-300 dark:border-white/20 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white dark:hover:bg-white/15",children:[o.jsx("option",{value:"",className:"bg-white dark:bg-slate-800 text-gray-900 dark:text-white",children:"All Clients"}),w.map(V=>o.jsx("option",{value:V.name,className:"bg-white dark:bg-slate-800 text-gray-900 dark:text-white",children:V.name},V.name))]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-white/90 mb-2",children:"From Date"}),o.jsx("input",{type:"date",value:g,onChange:V=>_(V.target.value),className:"w-full px-3 py-3 bg-white/90 dark:bg-white/10 backdrop-blur-sm border border-gray-300 dark:border-white/20 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white dark:hover:bg-white/15"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-white/90 mb-2",children:"To Date"}),o.jsx("input",{type:"date",value:k,onChange:V=>S(V.target.value),className:"w-full px-3 py-3 bg-white/90 dark:bg-white/10 backdrop-blur-sm border border-gray-300 dark:border-white/20 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white dark:hover:bg-white/15"})]})]}),o.jsxs("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200 dark:border-white/10",children:[o.jsxs("span",{className:"text-sm text-gray-600 dark:text-white/60 px-3 py-2 bg-gray-100 dark:bg-white/5 rounded-xl border border-gray-200 dark:border-white/10",children:[re.length," of ",s.length," responses"]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("label",{className:"text-sm text-gray-700 dark:text-white/90",children:"Page size:"}),o.jsxs("select",{value:N,onChange:V=>E(Number(V.target.value)),className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-white/10 bg-white/60 dark:bg-white/10 backdrop-blur-md text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white dark:hover:bg-white/15 shadow-lg appearance-none",style:{minWidth:70},children:[o.jsx("option",{value:10,className:"bg-white dark:bg-slate-800 text-gray-900 dark:text-white",children:"10"}),o.jsx("option",{value:20,className:"bg-white dark:bg-slate-800 text-gray-900 dark:text-white",children:"20"}),o.jsx("option",{value:30,className:"bg-white dark:bg-slate-800 text-gray-900 dark:text-white",children:"30"})]})]})]})]}),a?o.jsx("div",{className:"bg-white/80 dark:bg-white/10 backdrop-blur-xl rounded-2xl border border-gray-200 dark:border-white/20 overflow-hidden shadow-lg animate-fade-in",style:{animationDelay:"0.4s"},children:o.jsx("div",{className:"p-8",children:o.jsx("div",{className:"space-y-4",children:[...Array(5)].map((V,pe)=>o.jsxs("div",{className:"flex items-center space-x-4 animate-pulse",children:[o.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-white/20 rounded-full"}),o.jsxs("div",{className:"flex-1 space-y-2",children:[o.jsx("div",{className:"h-4 bg-gray-200 dark:bg-white/20 rounded w-48"}),o.jsx("div",{className:"h-3 bg-gray-200 dark:bg-white/20 rounded w-32"})]}),o.jsx("div",{className:"h-3 bg-gray-200 dark:bg-white/20 rounded w-24"})]},pe))})})}):re.length===0?o.jsxs("div",{className:"bg-white/80 dark:bg-white/10 backdrop-blur-xl rounded-2xl border border-gray-200 dark:border-white/20 p-12 text-center shadow-lg animate-fade-in",style:{animationDelay:"0.4s"},children:[o.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4",children:o.jsx(Li,{className:"w-8 h-8 text-gray-500 dark:text-white/60"})}),o.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:"No responses yet"}),o.jsx("p",{className:"text-gray-600 dark:text-white/70",children:c||d?"No responses match your current filters":"Responses will appear here when users submit your forms"})]}):o.jsx("div",{className:"bg-white/80 dark:bg-white/10 backdrop-blur-xl rounded-2xl border border-gray-200 dark:border-white/20 overflow-hidden shadow-lg animate-fade-in",style:{animationDelay:"0.4s"},children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"min-w-full",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-white/5 border-b border-gray-200 dark:border-white/10",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900 dark:text-white/90",children:"Contact"}),o.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900 dark:text-white/90",children:"Form"}),o.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900 dark:text-white/90",children:"Client"}),o.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900 dark:text-white/90",children:"Submitted"}),o.jsx("th",{className:"relative px-6 py-4",children:o.jsx("span",{className:"sr-only",children:"Actions"})})]})}),o.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-white/10",children:fe.map((V,pe)=>{var ye,ve,Se,be,K;return o.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-white/5 transition-all duration-200 group animate-slide-up",style:{animationDelay:`${.1*pe}s`},children:[o.jsx("td",{className:"px-6 py-4",children:o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:V.contact_name||"Anonymous"}),o.jsx("div",{className:"text-sm text-gray-600 dark:text-white/70",children:V.contact_email}),V.contact_phone&&o.jsx("div",{className:"text-sm text-gray-500 dark:text-white/60",children:V.contact_phone})]})}),o.jsx("td",{className:"px-6 py-4",children:o.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-blue-100 to-cyan-100 dark:from-blue-500/20 dark:to-cyan-500/20 text-blue-800 dark:text-blue-200 border border-blue-200 dark:border-blue-400/30",children:(ve=(ye=V.forms)==null?void 0:ye[0])==null?void 0:ve.name})}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-700 dark:text-white/80",children:(K=(be=(Se=V.forms)==null?void 0:Se[0])==null?void 0:be.clients)==null?void 0:K.name}),o.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 dark:text-white/70",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx(On,{className:"w-4 h-4 mr-2 text-gray-400 dark:text-white/50"}),new Date(V.submitted_at).toLocaleDateString()]})}),o.jsx("td",{className:"px-6 py-4 text-right",children:o.jsxs("button",{onClick:()=>n(`/response/${V.id}`),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 text-white text-sm rounded-xl hover:from-purple-700 hover:to-pink-700 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-purple-500/25",children:[o.jsx(pn,{className:"w-4 h-4 mr-2"}),"View Details"]})})]},V.id)})})]})})}),o.jsxs("div",{className:"flex justify-end items-center mt-4 space-x-2",children:[o.jsx("button",{className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-white/10 bg-white/60 dark:bg-white/10 backdrop-blur-md text-gray-900 dark:text-white font-medium shadow-lg transition-all duration-200 hover:bg-white/80 dark:hover:bg-white/20 disabled:opacity-50",onClick:()=>D(V=>Math.max(1,V-1)),disabled:O===1,children:"Prev"}),o.jsxs("span",{className:"text-sm text-gray-700 dark:text-white/80",children:["Page ",O," of ",ne]}),o.jsx("button",{className:"px-4 py-2 rounded-xl border border-gray-200 dark:border-white/10 bg-white/60 dark:bg-white/10 backdrop-blur-md text-gray-900 dark:text-white font-medium shadow-lg transition-all duration-200 hover:bg-white/80 dark:hover:bg-white/20 disabled:opacity-50",onClick:()=>D(V=>Math.min(ne,V+1)),disabled:O===ne||ne===0,children:"Next"})]})]})}function N3(){const{user:e}=kr(),{push:t}=ts(),[r,n]=p.useState({webhook_url:"",zapier_enabled:!1,api_key:"",brevo_api_key:""}),[s,i]=p.useState(!0),[a,l]=p.useState(!1);p.useEffect(()=>{e&&c()},[e]);const c=async()=>{try{const{data:f,error:m}=await z.from("user_settings").select("webhook_url, zapier_enabled, api_key, brevo_api_key").eq("user_id",e==null?void 0:e.id).maybeSingle();if(m&&m.code!=="PGRST116")throw m;if(f)n({webhook_url:f.webhook_url||"",zapier_enabled:f.zapier_enabled||!1,api_key:f.api_key||"",brevo_api_key:f.brevo_api_key||""});else{const v=u();n(b=>({...b,api_key:v}))}}catch(f){console.error("Error loading settings:",f),t({type:"error",message:"Failed to load settings"})}finally{i(!1)}},u=()=>"dk_live_"+Array.from(crypto.getRandomValues(new Uint8Array(16))).map(f=>f.toString(16).padStart(2,"0")).join(""),d=async()=>{if(e){l(!0);try{const{error:f}=await z.from("user_settings").upsert({user_id:e.id,webhook_url:r.webhook_url,zapier_enabled:r.zapier_enabled,api_key:r.api_key,brevo_api_key:r.brevo_api_key},{onConflict:"user_id"});if(f)throw f;t({type:"success",message:"Webhook settings saved successfully!"})}catch(f){console.error("Error saving settings:",f),t({type:"error",message:"Failed to save webhook settings"})}finally{l(!1)}}},h=async()=>{try{l(!0);const{data:f,error:m}=await z.rpc("generate_new_api_key",{user_id_param:e==null?void 0:e.id});if(m)throw m;n(v=>({...v,api_key:f})),t({type:"success",message:"API key regenerated successfully!"})}catch(f){console.error("Error regenerating API key:",f),t({type:"error",message:"Failed to regenerate API key"})}finally{l(!1)}};return o.jsxs("div",{className:"p-8 animate-fade-in",children:[o.jsxs("div",{className:"mb-8 animate-slide-up",children:[o.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 via-orange-600 to-red-600 dark:from-white dark:via-orange-100 dark:to-red-200 bg-clip-text text-transparent",children:"Settings"}),o.jsx("p",{className:"text-gray-600 dark:text-white/70 mt-2 text-lg",children:"Manage your account and integration settings"})]}),o.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[o.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-600/50 p-6 shadow-sm hover:shadow-md transition-shadow duration-100 animate-fade-in",style:{animationDelay:"0.05s"},children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-100 to-cyan-100 dark:from-blue-500/20 dark:to-cyan-500/20 rounded-xl border border-blue-200 dark:border-blue-400/30 mr-3",children:o.jsx(Li,{className:"w-5 h-5 text-blue-600 dark:text-blue-200"})}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Account Settings"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-white/90 mb-2",children:"Email Address"}),o.jsx("input",{type:"email",value:(e==null?void 0:e.email)||"",disabled:!0,className:"w-full px-4 py-3 bg-gray-100 dark:bg-white/5 backdrop-blur-sm border border-gray-300 dark:border-white/20 rounded-xl text-gray-600 dark:text-white/80 cursor-not-allowed"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-white/90 mb-2",children:"Account Type"}),o.jsx("div",{className:"px-4 py-3 bg-gradient-to-r from-blue-100 to-cyan-100 dark:from-blue-500/20 dark:to-cyan-500/20 border border-blue-200 dark:border-blue-400/30 rounded-xl",children:o.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Agency Admin"})})]}),o.jsx("button",{className:"w-full px-4 py-3 bg-gradient-to-r from-gray-600 to-gray-700 dark:from-slate-600 dark:to-slate-700 hover:from-gray-700 hover:to-gray-800 dark:hover:from-slate-700 dark:hover:to-slate-800 text-white rounded-xl transition-colors duration-100 font-medium shadow-sm",children:"Change Password"})]})]}),!1,o.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-600/50 p-6 shadow-sm hover:shadow-md transition-shadow duration-100 animate-fade-in",style:{animationDelay:"0.13s"},children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-100 to-cyan-100 dark:from-blue-500/20 dark:to-cyan-500/20 rounded-xl border border-blue-200 dark:border-blue-400/30 mr-3",children:o.jsx(D0,{className:"w-5 h-5 text-blue-600 dark:text-blue-200"})}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Brevo Email API Key"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-white/70",children:"Enter your Brevo API key to enable email notifications for form responses."}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-white/90 mb-2",children:"Brevo API Key"}),o.jsx("input",{type:"text",value:r.brevo_api_key||"",onChange:f=>n(m=>({...m,brevo_api_key:f.target.value})),placeholder:"Enter Brevo API Key",className:"w-full px-4 py-3 bg-gray-100 dark:bg-white/5 border border-gray-300 dark:border-white/20 rounded-xl text-gray-700 dark:text-white/80 font-mono text-sm"}),o.jsx("p",{className:"text-xs text-gray-500 dark:text-white/60 mt-2",children:"You can find your API key in your Brevo dashboard under SMTP & API settings."})]}),o.jsx("button",{onClick:d,disabled:a,className:"w-full px-4 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 disabled:from-blue-800 disabled:to-cyan-800 text-white rounded-xl transition-colors duration-100 font-medium shadow-sm disabled:cursor-not-allowed",children:a?"Saving...":"Save Brevo API Key"})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-600/50 p-6 shadow-sm hover:shadow-md transition-shadow duration-100 animate-fade-in",style:{animationDelay:"0.15s"},children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"p-2 bg-gradient-to-r from-green-100 to-emerald-100 dark:from-green-500/20 dark:to-emerald-500/20 rounded-xl border border-green-200 dark:border-green-400/30 mr-3",children:o.jsx(D0,{className:"w-5 h-5 text-green-600 dark:text-green-200"})}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"API Access"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-white/70",children:"Generate API keys to access your forms and responses programmatically."}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-white/90 mb-2",children:"API Key"}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs("div",{className:"flex-1 relative",children:[o.jsx("input",{type:"text",value:s?"Loading...":r.api_key||"No API key generated",readOnly:!0,className:"w-full px-4 py-3 bg-gray-100 dark:bg-white/5 backdrop-blur-sm border border-gray-300 dark:border-white/20 rounded-xl text-gray-700 dark:text-white/80 font-mono text-sm pr-12 select-all",onClick:f=>f.target.select()}),r.api_key&&o.jsx("button",{onClick:()=>{navigator.clipboard.writeText(r.api_key),t({type:"success",message:"API key copied to clipboard!"})},className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-2 hover:bg-gray-200 dark:hover:bg-white/10 rounded-lg transition-colors",title:"Copy API key",children:o.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),o.jsx("button",{onClick:h,disabled:s,className:"px-4 py-3 bg-gradient-to-r from-slate-600 to-slate-700 hover:from-slate-700 hover:to-slate-800 disabled:from-slate-800 disabled:to-slate-900 text-white rounded-xl transition-all duration-200 font-medium disabled:cursor-not-allowed",children:s?"Loading...":"Regenerate"})]}),o.jsx("p",{className:"text-xs text-white/60 mt-2",children:"Use this key to access the API programmatically. Click the key to select all or use the copy button."})]}),o.jsx("div",{className:"bg-gradient-to-r from-amber-500/20 to-orange-500/20 border border-amber-400/30 rounded-xl p-4",children:o.jsxs("p",{className:"text-sm text-amber-200",children:[o.jsx("strong",{children:"Important:"})," Keep your API key secure. Don't share it in publicly accessible areas."]})})]})]}),o.jsxs("div",{className:"bg-white dark:bg-slate-800/50 rounded-xl border border-gray-200 dark:border-slate-600/50 p-6 shadow-sm hover:shadow-md transition-shadow duration-100 animate-fade-in",style:{animationDelay:"0.2s"},children:[o.jsxs("div",{className:"flex items-center mb-6",children:[o.jsx("div",{className:"p-2 bg-gradient-to-r from-cyan-100 to-blue-100 dark:from-cyan-500/20 dark:to-blue-500/20 rounded-xl border border-cyan-200 dark:border-cyan-400/30 mr-3",children:o.jsx(pC,{className:"w-5 h-5 text-cyan-600 dark:text-cyan-200"})}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Embed Settings"})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsx("p",{className:"text-sm text-gray-600 dark:text-white/70",children:"Configure default settings for embedded forms."}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-white/90 mb-2",children:"Default Form Height"}),o.jsxs("select",{className:"w-full px-4 py-3 bg-white dark:bg-white/10 backdrop-blur-sm border border-gray-300 dark:border-white/20 rounded-xl text-gray-900 dark:text-white focus:ring-2 focus:ring-cyan-400 focus:border-transparent transition-all duration-200 hover:bg-gray-50 dark:hover:bg-white/15",children:[o.jsx("option",{value:"600",className:"bg-white dark:bg-slate-800 text-gray-900 dark:text-white",children:"600px"}),o.jsx("option",{value:"800",className:"bg-white dark:bg-slate-800 text-gray-900 dark:text-white",children:"800px"}),o.jsx("option",{value:"1000",className:"bg-white dark:bg-slate-800 text-gray-900 dark:text-white",children:"1000px"}),o.jsx("option",{value:"auto",className:"bg-white dark:bg-slate-800 text-gray-900 dark:text-white",children:"Auto"})]})]}),o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",id:"responsive-embed",defaultChecked:!0,className:"w-4 h-4 text-cyan-600 bg-white dark:bg-white/10 border-gray-300 dark:border-white/30 rounded focus:ring-cyan-500 focus:ring-2"}),o.jsx("label",{htmlFor:"responsive-embed",className:"ml-3 text-sm text-gray-700 dark:text-white/80",children:"Enable responsive embeds"})]}),o.jsx("button",{className:"w-full px-4 py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl transition-colors duration-100 font-medium shadow-sm",children:"Update Embed Settings"})]})]})]})]})}const S3={sm:"h-9 px-3 text-sm",default:"h-10 px-4 py-2 text-sm",lg:"h-11 px-8 text-base",icon:"h-10 w-10"},vl=p.forwardRef(({className:e,variant:t="primary",size:r="default",isLoading:n,disabled:s,children:i,...a},l)=>{const{theme:c}=Ue(),u=(d,h)=>{switch(d){case"primary":return"px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-xl font-medium transition-all duration-200 shadow-lg hover:scale-105";case"secondary":return h==="light"?"px-6 py-3 bg-gray-100 text-gray-700 hover:bg-gray-200 rounded-xl font-medium transition-all duration-200":"px-6 py-3 bg-white/10 text-white/90 hover:bg-white/20 rounded-xl font-medium transition-all duration-200";case"danger":return"px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white rounded-xl font-medium transition-all duration-200 shadow-lg hover:scale-105";case"ghost":return h==="light"?"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-xl transition-all duration-200":"p-2 text-white/60 hover:text-white hover:bg-white/10 rounded-xl transition-all duration-200";default:return"px-6 py-3 bg-gray-500 text-white rounded-xl font-medium transition-all duration-200"}};return o.jsxs("button",{className:ec("inline-flex items-center justify-center whitespace-nowrap font-medium transition-all duration-200","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-blue-500 focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",u(t,c),S3[r],n&&"pointer-events-none",e),ref:l,disabled:s||n,...a,children:[n&&o.jsx("div",{className:"mr-2 w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),i]})});vl.displayName="Button";function C3({isOpen:e,onClose:t,formId:r,formName:n}){if(vt.useEffect(()=>{if(e&&r){const i=`${window.location.origin}/form/${r}`;window.open(i,"_blank","width=800,height=900,scrollbars=yes,resizable=yes"),t()}},[e,r,t]),!e)return null;const s=o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-full max-w-md p-6",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-900 dark:text-white",children:"Preview Form"}),r?o.jsxs("div",{className:"space-y-4",children:[o.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Opening "',n,'" in a new tab...']}),o.jsxs("div",{className:"flex justify-end space-x-3",children:[o.jsx(vl,{variant:"secondary",onClick:t,children:"Close"}),o.jsx(vl,{variant:"primary",onClick:()=>{const i=`${window.location.origin}/form/${r}`;window.open(i,"_blank","width=800,height=900,scrollbars=yes,resizable=yes")},children:"Open Preview"})]})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Please save the form first to enable preview."}),o.jsx("div",{className:"flex justify-end space-x-3",children:o.jsx(vl,{variant:"secondary",onClick:t,children:"Close"})})]})]})});return Hr.createPortal(s,document.body)}function E3({isOpen:e,onClose:t,step:r,stepNumber:n,primaryColor:s="#3B82F6",secondaryColor:i="#8B5CF6"}){const[a,l]=p.useState(new Set),[c,u]=p.useState("");if(!e)return null;const d=m=>{const v=new Set(a);v.has(m)?v.delete(m):v.add(m),l(v)},h=()=>{switch(r.question_type){case"image_selection":const m=r.images_per_row||2,v=r.crop_images_to_square!==!1;return o.jsx("div",{className:`grid gap-4 ${m===1?"grid-cols-1":m===3?"grid-cols-1 md:grid-cols-3":"grid-cols-1 md:grid-cols-2"}`,children:r.options.map((x,g)=>o.jsxs("button",{onClick:()=>d(x.id||`option-${g}`),className:`border rounded-xl p-4 text-left hover:shadow-lg transition-all duration-200 flex flex-col h-full ${a.has(x.id||`option-${g}`)?"ring-2 border-blue-500 shadow-lg":"border-gray-200 hover:border-gray-300"}`,style:a.has(x.id||`option-${g}`)?{borderColor:s,boxShadow:`0 0 0 2px ${s}40`}:{},children:[x.image_url&&o.jsx("div",{className:`${v?"aspect-square":"flex-grow flex items-start"} w-full mb-3 rounded-lg overflow-hidden`,children:o.jsx("img",{src:x.image_url,alt:x.label,className:`w-full ${v?"h-full object-cover":"object-contain"} transition-transform duration-200 hover:scale-105`})}),o.jsxs("div",{className:"flex-shrink-0",children:[o.jsx("div",{className:"font-medium text-gray-900",children:x.label}),x.description&&o.jsx("div",{className:"text-sm text-gray-600 mt-1",children:x.description})]})]},x.id||g))});case"multiple_choice":return o.jsx("div",{className:"space-y-3",children:r.options.map((x,g)=>o.jsxs("button",{onClick:()=>d(x.id||`option-${g}`),className:`w-full border rounded-xl p-4 text-left hover:shadow-md transition-all duration-200 ${a.has(x.id||`option-${g}`)?"ring-2 border-blue-500 shadow-md":"border-gray-200 hover:border-gray-300"}`,style:a.has(x.id||`option-${g}`)?{borderColor:s,boxShadow:`0 0 0 2px ${s}40`}:{},children:[o.jsx("div",{className:"font-medium text-gray-900",children:x.label}),x.description&&o.jsx("div",{className:"text-sm text-gray-600 mt-1",children:x.description})]},x.id||g))});case"text_input":return o.jsx("textarea",{value:c,onChange:x=>u(x.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none",rows:4,placeholder:"Enter your answer here..."});case"contact_fields":return o.jsxs("div",{className:"space-y-4",children:[o.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Name"}),o.jsx("input",{type:"email",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Email"}),o.jsx("input",{type:"tel",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Phone"})]});case"file_upload":return o.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-blue-400 transition-colors",children:[o.jsx(Ts,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),o.jsx("p",{className:"text-gray-600 mb-2",children:"Drag and drop files here, or click to browse"}),o.jsx("p",{className:"text-sm text-gray-500",children:r.max_file_size?`Max file size: ${r.max_file_size}MB`:"No size limit"})]});case"dimensions":return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsx("input",{type:"number",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Width (${r.dimension_units||"mm"})`}),o.jsx("input",{type:"number",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Height (${r.dimension_units||"mm"})`})]}),r.dimension_type==="3d"&&o.jsx("input",{type:"number",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:`Depth (${r.dimension_units||"mm"})`})]});case"opinion_scale":const b=r.scale_min||1,w=r.scale_max||(r.scale_type==="star"?5:10),y=Array.from({length:w-b+1},(x,g)=>b+g);return o.jsx("div",{className:"flex justify-center items-center space-x-2",children:y.map(x=>o.jsx("button",{onClick:()=>d(`scale-${x}`),className:`w-12 h-12 rounded-xl border-2 transition-all duration-200 font-semibold ${a.has(`scale-${x}`)?"border-blue-500 bg-blue-500 text-white shadow-lg scale-110":"border-gray-300 hover:border-gray-400 hover:scale-105"}`,style:a.has(`scale-${x}`)?{borderColor:s,backgroundColor:s}:void 0,children:r.scale_type==="star"?"":x},x))});case"frames_plan":return o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"text-center text-gray-600 mb-4",children:[o.jsx("p",{children:"Frame upload interface with location and measurements"}),o.jsxs("p",{className:"text-sm mt-2",children:["Max frames: ",r.frames_max_count||10]})]}),o.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center",children:[o.jsx(Ts,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),o.jsx("p",{className:"text-gray-600",children:"Upload frame images"})]})]});default:return o.jsx("div",{className:"text-gray-500",children:"Unsupported question type"})}},f=o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-[9999] p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden animate-scale-in",children:[o.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-purple-50",children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Preview Step"}),o.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Step ",n,"  ",r.question_type.replace("_"," ")]})]}),o.jsx("button",{onClick:t,className:"p-2 rounded-xl hover:bg-white/50 transition-colors text-gray-600 hover:text-gray-900",children:o.jsx(st,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"p-8 overflow-y-auto max-h-[calc(90vh-140px)]",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:[r.title||`Question ${n}`,r.is_required&&o.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),r.description&&o.jsx("p",{className:"text-gray-600",children:r.description})]}),h(),o.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-xl",children:o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("strong",{children:"Preview Mode:"})," This is how this question will appear to users. The actual form will include navigation buttons and progress indicators."]})})]}),o.jsx("div",{className:"flex items-center justify-end p-6 border-t border-gray-200 bg-gray-50",children:o.jsx("button",{onClick:t,className:"px-6 py-2 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl font-medium hover:from-blue-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Close Preview"})})]})});return Hr.createPortal(f,document.body)}function T3({isOpen:e,onClose:t,onSave:r,stepType:n}){const{theme:s}=Ue(),[i,a]=p.useState(""),[l,c]=p.useState(""),[u,d]=p.useState(!1);if(!e)return null;const h=async m=>{if(m.preventDefault(),!!i.trim()){d(!0);try{await r(i.trim(),l.trim()),a(""),c(""),t()}catch(v){console.error("Error saving template:",v)}finally{d(!1)}}},f=()=>{u||(a(""),c(""),t())};return o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:`w-full max-w-md rounded-2xl shadow-xl ${s==="light"?"bg-white text-gray-900":"bg-slate-800 text-white"}`,children:[o.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${s==="light"?"border-gray-200":"border-white/10"}`,children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Save Step as Template"}),o.jsx("button",{onClick:f,disabled:u,className:`p-2 rounded-lg transition-colors ${s==="light"?"hover:bg-gray-100 text-gray-600":"hover:bg-white/10 text-white/70"}`,children:o.jsx(st,{className:"w-5 h-5"})})]}),o.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:`block text-sm font-medium mb-2 ${s==="light"?"text-gray-700":"text-white/90"}`,children:["Template Name ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{type:"text",value:i,onChange:m=>a(m.target.value),placeholder:"e.g., Window Style Selection",className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 ${s==="light"?"bg-white border-gray-200 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20":"bg-white/10 border-white/20 text-white placeholder-white/50 focus:border-blue-400 focus:ring-2 focus:ring-blue-400/20"}`,required:!0,disabled:u})]}),o.jsxs("div",{children:[o.jsx("label",{className:`block text-sm font-medium mb-2 ${s==="light"?"text-gray-700":"text-white/90"}`,children:"Description (optional)"}),o.jsx("textarea",{value:l,onChange:m=>c(m.target.value),placeholder:"Describe what this template is for...",rows:3,className:`w-full px-4 py-3 rounded-xl border transition-all duration-200 resize-none ${s==="light"?"bg-white border-gray-200 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20":"bg-white/10 border-white/20 text-white placeholder-white/50 focus:border-blue-400 focus:ring-2 focus:ring-blue-400/20"}`,disabled:u})]}),o.jsxs("div",{className:`p-4 rounded-lg ${s==="light"?"bg-blue-50":"bg-blue-500/10"}`,children:[o.jsxs("p",{className:`text-sm ${s==="light"?"text-blue-900":"text-blue-200"}`,children:[o.jsx("strong",{children:"Step Type:"})," ",n.replace("_"," ").replace(/\b\w/g,m=>m.toUpperCase())]}),o.jsx("p",{className:`text-xs mt-1 ${s==="light"?"text-blue-700":"text-blue-300"}`,children:"This template will include all current step settings, options, and configurations."})]}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[o.jsx("button",{type:"button",onClick:f,disabled:u,className:`px-6 py-2.5 rounded-xl font-medium transition-all duration-200 ${s==="light"?"bg-gray-100 hover:bg-gray-200 text-gray-700":"bg-white/10 hover:bg-white/20 text-white"}`,children:"Cancel"}),o.jsxs("button",{type:"submit",disabled:u||!i.trim(),className:"inline-flex items-center px-6 py-2.5 rounded-xl font-medium transition-all duration-200 shadow-lg hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white",children:[o.jsx(fh,{className:"w-4 h-4 mr-2"}),u?"Saving...":"Save Template"]})]})]})]})})}const P3={image_selection:o.jsx(vv,{className:"w-5 h-5"}),multiple_choice:o.jsx(Ql,{className:"w-5 h-5"}),text_input:o.jsx(sr,{className:"w-5 h-5"}),contact_fields:o.jsx(Li,{className:"w-5 h-5"}),file_upload:o.jsx(Ts,{className:"w-5 h-5"}),dimensions:o.jsx(Nv,{className:"w-5 h-5"}),opinion_scale:o.jsx(rm,{className:"w-5 h-5"}),frames_plan:o.jsx(bv,{className:"w-5 h-5"})};function $3({isOpen:e,onClose:t,onSelect:r,filterType:n}){const{theme:s}=Ue(),{push:i}=ts(),[a,l]=p.useState([]),[c,u]=p.useState(!1),[d,h]=p.useState(""),[f,m]=p.useState(null),[v,b]=p.useState(null);p.useEffect(()=>{e&&w()},[e,n]);const w=async()=>{u(!0);try{let _=z.from("step_templates").select(`
          *,
          step_template_options (
            id,
            label,
            description,
            image_url,
            jump_to_step,
            option_order
          )
        `).order("created_at",{ascending:!1});n&&(_=_.eq("question_type",n));const{data:k,error:S}=await _;if(S)throw S;const N=(k||[]).map(E=>({...E,options:(E.step_template_options||[]).sort((O,D)=>O.option_order-D.option_order)}));l(N)}catch(_){console.error("Error loading templates:",_),i({type:"error",message:"Failed to load templates"})}finally{u(!1)}},y=async(_,k)=>{if(k.stopPropagation(),!!confirm("Are you sure you want to delete this template?")){b(_);try{const{error:S}=await z.from("step_templates").delete().eq("id",_);if(S)throw S;i({type:"success",message:"Template deleted successfully"}),w()}catch(S){console.error("Error deleting template:",S),i({type:"error",message:"Failed to delete template"})}finally{b(null)}}},x=async()=>{if(f)try{await r(f),t()}catch(_){console.error("Error applying template:",_),i({type:"error",message:"Failed to apply template"})}},g=a.filter(_=>{var k;return _.name.toLowerCase().includes(d.toLowerCase())||((k=_.description)==null?void 0:k.toLowerCase().includes(d.toLowerCase()))||_.question_type.toLowerCase().includes(d.toLowerCase())});return e?o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:`w-full max-w-4xl max-h-[90vh] rounded-2xl shadow-xl flex flex-col ${s==="light"?"bg-white text-gray-900":"bg-slate-800 text-white"}`,children:[o.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${s==="light"?"border-gray-200":"border-white/10"}`,children:[o.jsxs("div",{children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Load Step Template"}),o.jsx("p",{className:`text-sm mt-1 ${s==="light"?"text-gray-600":"text-white/70"}`,children:"Choose a saved template to quickly configure this step"})]}),o.jsx("button",{onClick:t,className:`p-2 rounded-lg transition-colors ${s==="light"?"hover:bg-gray-100 text-gray-600":"hover:bg-white/10 text-white/70"}`,children:o.jsx(st,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"p-6 space-y-4 flex-1 overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"relative",children:[o.jsx(Jo,{className:`absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 ${s==="light"?"text-gray-400":"text-white/40"}`}),o.jsx("input",{type:"text",value:d,onChange:_=>h(_.target.value),placeholder:"Search templates...",className:`w-full pl-10 pr-4 py-3 rounded-xl border transition-all duration-200 ${s==="light"?"bg-white border-gray-200 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20":"bg-white/10 border-white/20 text-white placeholder-white/50 focus:border-blue-400 focus:ring-2 focus:ring-blue-400/20"}`})]}),o.jsx("div",{className:"flex-1 overflow-y-auto space-y-3",children:c?o.jsx("div",{className:"flex items-center justify-center py-12",children:o.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):g.length===0?o.jsxs("div",{className:`text-center py-12 ${s==="light"?"text-gray-500":"text-white/50"}`,children:[o.jsx(sr,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),o.jsx("p",{className:"text-lg font-medium mb-2",children:d?"No templates found":"No templates yet"}),o.jsx("p",{className:"text-sm",children:d?"Try a different search term":"Save your first template to reuse step configurations"})]}):g.map(_=>o.jsx("button",{onClick:()=>m(_),className:`w-full text-left p-4 rounded-xl border-2 transition-all duration-200 ${(f==null?void 0:f.id)===_.id?s==="light"?"border-blue-500 bg-blue-50":"border-blue-400 bg-blue-500/10":s==="light"?"border-gray-200 hover:border-gray-300 bg-white":"border-white/10 hover:border-white/20 bg-white/5"}`,children:o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-start space-x-3 flex-1",children:[o.jsx("div",{className:`p-2 rounded-lg ${s==="light"?"bg-gray-100":"bg-white/10"}`,children:P3[_.question_type]||o.jsx(sr,{className:"w-5 h-5"})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-semibold mb-1",children:_.name}),_.description&&o.jsx("p",{className:`text-sm mb-2 ${s==="light"?"text-gray-600":"text-white/70"}`,children:_.description}),o.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[o.jsx("span",{className:`px-2 py-1 rounded-md ${s==="light"?"bg-gray-100 text-gray-700":"bg-white/10 text-white/80"}`,children:_.question_type.replace("_"," ")}),_.options&&_.options.length>0&&o.jsxs("span",{className:`px-2 py-1 rounded-md ${s==="light"?"bg-blue-100 text-blue-700":"bg-blue-500/20 text-blue-300"}`,children:[_.options.length," options"]})]})]})]}),o.jsx("button",{onClick:k=>y(_.id,k),disabled:v===_.id,className:`p-2 rounded-lg transition-colors ml-2 ${s==="light"?"hover:bg-red-100 text-red-600":"hover:bg-red-500/20 text-red-400"}`,title:"Delete template",children:o.jsx(Oi,{className:"w-4 h-4"})})]})},_.id))}),o.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-white/10",children:[o.jsx("button",{type:"button",onClick:t,className:`px-6 py-2.5 rounded-xl font-medium transition-all duration-200 ${s==="light"?"bg-gray-100 hover:bg-gray-200 text-gray-700":"bg-white/10 hover:bg-white/20 text-white"}`,children:"Cancel"}),o.jsx("button",{onClick:x,disabled:!f,className:"inline-flex items-center px-6 py-2.5 rounded-xl font-medium transition-all duration-200 shadow-lg hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white",children:"Apply Template"})]})]})]})}):null}function A3({currentStep:e,allSteps:t,stepLogic:r,onSave:n,onClose:s}){var _;const{theme:i}=Ue(),[a,l]=p.useState((r==null?void 0:r.rules)||[]),[c,u]=p.useState(r==null?void 0:r.default_action),d=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,h=()=>{var S,N;const k={id:d(),step_id:e.id||"",conditions:[{id:d(),field_type:e.question_type==="image_selection"||e.question_type==="multiple_choice"?"option":e.question_type==="opinion_scale"?"scale":"text",option_id:(S=e.options[0])==null?void 0:S.id}],action:{type:"go_to_step",target_step_order:(N=t.find(E=>E.step_order>e.step_order))==null?void 0:N.step_order},order:a.length};l([...a,k])},f=k=>{l(a.filter(S=>S.id!==k).map((S,N)=>({...S,order:N})))},m=(k,S,N)=>{l(a.map(E=>E.id===k?{...E,conditions:E.conditions.map(O=>O.id===S?{...O,...N}:O)}:E))},v=(k,S)=>{l(a.map(N=>N.id===k?{...N,action:{...N.action,...S}}:N))},b=k=>{l(a.map(S=>{var N;return S.id===k?{...S,conditions:[...S.conditions,{id:d(),field_type:"option",option_id:(N=e.options[0])==null?void 0:N.id}]}:S}))},w=(k,S)=>{l(a.map(N=>N.id===k?{...N,conditions:N.conditions.filter(E=>E.id!==S)}:N))},y=k=>{u({step_id:e.id||"",action:{...c==null?void 0:c.action,...k}})},x=()=>{const k={step_id:e.id||"",rules:a,default_action:c};n(k),s()},g=t.filter(k=>k.step_order>e.step_order);return o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:`w-full max-w-4xl max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl ${i==="light"?"bg-white border border-gray-200":"bg-gray-900 border border-white/10"}`,children:[o.jsxs("div",{className:`sticky top-0 z-10 border-b p-6 flex items-center justify-between backdrop-blur-sm ${i==="light"?"bg-white/90 border-gray-200":"bg-gray-900/90 border-white/10"}`,children:[o.jsxs("div",{children:[o.jsx("h2",{className:`text-2xl font-bold ${i==="light"?"text-gray-900":"text-white"}`,children:"Edit logic for"}),o.jsxs("p",{className:`mt-1 text-sm flex items-center gap-2 ${i==="light"?"text-gray-600":"text-gray-400"}`,children:[o.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 text-white text-xs font-bold",children:e.step_order}),e.title]})]}),o.jsx("button",{onClick:s,className:`p-2 rounded-lg transition-colors ${i==="light"?"hover:bg-gray-100 text-gray-600":"hover:bg-white/10 text-white/60"}`,children:o.jsx(st,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:`m-6 p-4 rounded-xl border flex items-start gap-3 ${i==="light"?"bg-blue-50 border-blue-200":"bg-blue-500/10 border-blue-400/30"}`,children:[o.jsx("div",{className:"flex-shrink-0 mt-0.5",children:o.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-purple-500 flex items-center justify-center",children:o.jsx(A0,{className:"w-4 h-4 text-white"})})}),o.jsxs("div",{children:[o.jsx("p",{className:`text-sm font-medium mb-1 ${i==="light"?"text-gray-900":"text-white"}`,children:"Segment respondents, customize flows and calculate scores"}),o.jsx("p",{className:`text-sm ${i==="light"?"text-gray-600":"text-gray-400"}`,children:"Assign your respondents to a specific segment based on their answers and customize their path accordingly. You can also calculate scores based on answers, segments and the source of respondents."})]})]}),o.jsxs("div",{className:"p-6 space-y-4",children:[a.map((k,S)=>o.jsxs("div",{className:`p-6 rounded-xl border-2 ${i==="light"?"bg-white border-gray-200":"bg-white/5 border-white/10"}`,children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:`px-4 py-2 rounded-lg text-sm font-semibold flex items-center gap-2 ${S===0?"bg-gradient-to-r from-blue-500 to-blue-600 text-white shadow-lg shadow-blue-500/25":"bg-gradient-to-r from-purple-500 to-purple-600 text-white shadow-lg shadow-purple-500/25"}`,children:[o.jsx(Cv,{className:"w-3.5 h-3.5"}),S===0?"If":`Else If ${S}`]}),k.conditions.length>1&&o.jsxs("div",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${i==="light"?"bg-gray-100 text-gray-600":"bg-white/10 text-white/70"}`,children:[k.conditions.length," conditions"]})]}),o.jsx("button",{onClick:()=>f(k.id),className:`p-2 rounded-lg transition-all hover:scale-110 ${i==="light"?"hover:bg-red-50 text-red-600":"hover:bg-red-500/20 text-red-400"}`,title:"Delete rule",children:o.jsx(Oi,{className:"w-4 h-4"})})]}),o.jsxs("div",{className:"space-y-3 mb-4",children:[k.conditions.map((N,E)=>o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:`flex-shrink-0 px-3 py-2 rounded-lg text-xs font-medium border flex items-center gap-2 ${i==="light"?"bg-gradient-to-r from-gray-50 to-gray-100 text-gray-700 border-gray-200":"bg-gradient-to-r from-white/5 to-white/10 text-white/90 border-white/10"}`,children:[o.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 text-white text-[10px] font-bold",children:e.step_order}),e.title]}),N.field_type==="option"&&o.jsxs(o.Fragment,{children:[o.jsx(em,{className:`w-4 h-4 flex-shrink-0 ${i==="light"?"text-gray-400":"text-white/40"}`}),o.jsx("select",{value:"is",className:`px-3 py-2 rounded-lg border text-sm font-medium ${i==="light"?"bg-white border-gray-300 text-gray-900 [&>option]:text-gray-900 [&>option]:bg-white":"bg-white/10 border-white/20 text-white [&>option]:text-white [&>option]:bg-gray-800"}`,children:o.jsx("option",{value:"is",children:"is"})}),o.jsx("select",{value:N.option_id||"",onChange:O=>m(k.id,N.id,{option_id:O.target.value}),className:`flex-1 px-3 py-2 rounded-lg border text-sm font-medium ${i==="light"?"bg-white border-gray-300 text-gray-900 [&>option]:text-gray-900 [&>option]:bg-white":"bg-white/10 border-white/20 text-white [&>option]:text-white [&>option]:bg-gray-800"}`,children:e.options.map(O=>o.jsx("option",{value:O.id,children:O.label},O.id))})]}),k.conditions.length>1&&o.jsx("button",{onClick:()=>w(k.id,N.id),className:`p-2 rounded-lg transition-all hover:scale-110 flex-shrink-0 ${i==="light"?"hover:bg-red-50 text-red-600":"hover:bg-red-500/20 text-red-400"}`,children:o.jsx(st,{className:"w-4 h-4"})})]}),E<k.conditions.length-1&&o.jsxs("div",{className:"flex items-center gap-2 py-2 pl-3",children:[o.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-bold ${i==="light"?"bg-blue-100 text-blue-700":"bg-blue-500/20 text-blue-300"}`,children:"AND"}),o.jsx("div",{className:`text-xs ${i==="light"?"text-gray-500":"text-gray-400"}`,children:"All conditions must be met"})]})]},N.id)),o.jsx("button",{onClick:()=>b(k.id),className:`text-sm px-3 py-1.5 rounded-lg transition-colors ${i==="light"?"text-blue-600 hover:bg-blue-50":"text-blue-400 hover:bg-blue-500/20"}`,children:"+ Add condition"})]}),o.jsx("div",{className:`pt-4 border-t ${i==="light"?"border-gray-200":"border-white/10"}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:"px-4 py-2 rounded-lg text-sm font-semibold flex items-center gap-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg shadow-green-500/25",children:[o.jsx(uC,{className:"w-3.5 h-3.5"}),"Then"]}),o.jsx(R0,{className:`w-4 h-4 flex-shrink-0 ${i==="light"?"text-gray-400":"text-white/40"}`}),o.jsxs("select",{value:k.action.type,onChange:N=>v(k.id,{type:N.target.value}),className:`px-3 py-2 rounded-lg border text-sm font-medium ${i==="light"?"bg-white border-gray-300 text-gray-900 [&>option]:text-gray-900 [&>option]:bg-white":"bg-white/10 border-white/20 text-white [&>option]:text-white [&>option]:bg-gray-800"}`,children:[o.jsx("option",{value:"go_to_step",children:"Go to"}),o.jsx("option",{value:"skip_to_step",children:"Skip to"})]}),o.jsxs("select",{value:k.action.target_step_order||"",onChange:N=>v(k.id,{target_step_order:Number(N.target.value)}),className:`flex-1 px-3 py-2 rounded-lg border text-sm font-medium ${i==="light"?"bg-white border-gray-300 text-gray-900 [&>option]:text-gray-900 [&>option]:bg-white":"bg-white/10 border-white/20 text-white [&>option]:text-white [&>option]:bg-gray-800"}`,children:[o.jsx("option",{value:"",children:"Select step..."}),g.map(N=>o.jsxs("option",{value:N.step_order,children:[N.step_order,". ",N.title]},N.id))]})]})})]},k.id)),o.jsxs("button",{onClick:h,className:`w-full py-3 px-4 rounded-xl border-2 border-dashed transition-all text-sm font-medium flex items-center justify-center gap-2 ${i==="light"?"border-gray-300 hover:border-blue-400 text-gray-600 hover:text-blue-600 hover:bg-blue-50":"border-white/20 hover:border-blue-400/50 text-white/60 hover:text-blue-400 hover:bg-blue-500/10"}`,children:[o.jsx(Dr,{className:"w-4 h-4"}),"Add rule"]}),o.jsx("div",{className:`p-6 rounded-xl border-2 ${i==="light"?"bg-gradient-to-br from-gray-50 to-white border-gray-300":"bg-gradient-to-br from-white/5 to-white/10 border-white/20"}`,children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsxs("div",{className:`px-4 py-2 rounded-lg text-sm font-semibold flex items-center gap-2 ${i==="light"?"bg-gradient-to-r from-gray-600 to-gray-700 text-white shadow-lg shadow-gray-500/25":"bg-gradient-to-r from-gray-500 to-gray-600 text-white shadow-lg shadow-gray-500/25"}`,children:[o.jsx(A0,{className:"w-3.5 h-3.5"}),"Else"]}),o.jsx(R0,{className:`w-4 h-4 flex-shrink-0 ${i==="light"?"text-gray-400":"text-white/40"}`}),o.jsx("span",{className:`text-sm font-medium ${i==="light"?"text-gray-700":"text-white/80"}`,children:"All other cases go to"}),o.jsxs("select",{value:((_=c==null?void 0:c.action)==null?void 0:_.target_step_order)||"",onChange:k=>y({type:"go_to_step",target_step_order:Number(k.target.value)}),className:`flex-1 px-3 py-2 rounded-lg border text-sm font-medium ${i==="light"?"bg-white border-gray-300 text-gray-900 [&>option]:text-gray-900 [&>option]:bg-white":"bg-white/10 border-white/20 text-white [&>option]:text-white [&>option]:bg-gray-800"}`,children:[o.jsx("option",{value:"",children:"Next step (default)"}),g.map(k=>o.jsxs("option",{value:k.step_order,children:[k.step_order,". ",k.title]},k.id))]})]})}),a.length===0&&o.jsx("div",{className:`p-4 rounded-xl text-center ${i==="light"?"bg-gray-50 text-gray-600":"bg-white/5 text-white/60"}`,children:o.jsx("p",{className:"text-sm",children:"No logic rules defined. Form will proceed to the next step by default."})})]}),o.jsxs("div",{className:`sticky bottom-0 border-t p-6 flex items-center justify-between backdrop-blur-sm ${i==="light"?"bg-white/90 border-gray-200":"bg-gray-900/90 border-white/10"}`,children:[o.jsx("button",{onClick:()=>l([]),className:`text-sm px-4 py-2 rounded-lg transition-colors ${i==="light"?"text-red-600 hover:bg-red-50":"text-red-400 hover:bg-red-500/20"}`,children:"Delete all rules"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:s,className:`px-6 py-2 rounded-xl transition-colors ${i==="light"?"bg-gray-100 hover:bg-gray-200 text-gray-700":"bg-white/10 hover:bg-white/20 text-white"}`,children:"Cancel"}),o.jsx("button",{onClick:x,className:"px-6 py-2 bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white rounded-xl transition-all shadow-lg hover:shadow-xl",children:"Save"})]})]})]})})}const Ih={generic:{name:"Generic",description:"Clean and professional form design",preview:{primaryColor:"bg-blue-500",secondaryColor:"bg-gray-300",accentColor:"bg-blue-600"},styles:{background:"bg-slate-50",container:"w-full px-4 py-8 flex justify-center",card:"bg-white p-8 rounded-lg shadow-md border w-full",input:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",button:{primary:"bg-blue-600 text-white px-6 py-3 rounded-md font-medium hover:bg-blue-700 transition-colors",secondary:"bg-gray-200 text-gray-800 px-6 py-3 rounded-md font-medium hover:bg-gray-300 transition-colors"},text:{heading:"text-2xl font-bold text-gray-900 mb-4",body:"text-gray-600 mb-6",label:"block text-sm font-medium text-gray-700 mb-2"},progress:"w-full bg-gray-200 rounded-full h-2 overflow-hidden"},fonts:["system-ui","sans-serif"]},"soft-ui":{name:"Soft UI",description:"Apple-inspired glassmorphism with refined transparency and depth",preview:{primaryColor:"bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500",secondaryColor:"bg-white/40",accentColor:"bg-blue-600"},styles:{background:"bg-gradient-to-br from-slate-100 via-blue-50 to-indigo-50 relative",container:"w-full px-4 py-8 relative z-10 flex justify-center",card:"apple-glass-card rounded-3xl shadow-2xl p-10 border border-white/30 w-full",input:"apple-input w-full px-5 py-4 rounded-2xl border border-white/20 transition-all duration-300 bg-white/60 focus:border-blue-400/60 focus:bg-white/80 backdrop-blur-xl",button:{primary:"apple-button text-white px-8 py-4 rounded-full font-medium inline-flex items-center gap-3 transition-all duration-300 shadow-lg hover:shadow-2xl backdrop-blur-sm",secondary:"apple-button-secondary bg-white/60 backdrop-blur-xl text-slate-700 px-8 py-4 rounded-full font-medium hover:bg-white/80 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center gap-3 border border-white/30"},text:{heading:"text-3xl font-bold bg-gradient-to-r from-slate-900 via-slate-700 to-slate-800 bg-clip-text text-transparent mb-4 tracking-tight",body:"text-slate-600/80 mb-8 text-lg leading-relaxed",label:"block text-slate-700/90 font-semibold mb-3 text-base tracking-wide"},progress:"w-full bg-white/40 backdrop-blur-sm rounded-full h-2 overflow-hidden apple-progress shadow-inner",decorations:`
        <div class="apple-decorations absolute inset-0 overflow-hidden pointer-events-none" style="height: fit-content;">
          <div class="absolute -top-16 -right-16 w-32 h-32 bg-gradient-to-br from-blue-400/10 to-purple-500/15 rounded-full blur-2xl animate-pulse"></div>
          <div class="absolute -bottom-16 -left-16 w-32 h-32 bg-gradient-to-tr from-indigo-400/10 to-pink-500/15 rounded-full blur-2xl animate-pulse" style="animation-delay: 1s;"></div>
          <div class="absolute top-1/4 left-1/4 w-48 h-48 bg-gradient-to-r from-cyan-300/5 to-blue-400/10 rounded-full blur-2xl animate-pulse" style="animation-delay: 2s;"></div>
        </div>
      `},fonts:["SF Pro Display","-apple-system","BlinkMacSystemFont","Inter","system-ui","sans-serif"]}};function R3(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p.useMemo(()=>n=>{t.forEach(s=>s(n))},t)}const qc=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Vi(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Im(e){return"nodeType"in e}function Xt(e){var t,r;return e?Vi(e)?e:Im(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function Bm(e){const{Document:t}=Xt(e);return e instanceof t}function _a(e){return Vi(e)?!1:e instanceof Xt(e).HTMLElement}function y_(e){return e instanceof Xt(e).SVGElement}function qi(e){return e?Vi(e)?e.document:Im(e)?Bm(e)?e:_a(e)||y_(e)?e.ownerDocument:document:document:document}const Xr=qc?p.useLayoutEffect:p.useEffect;function zm(e){const t=p.useRef(e);return Xr(()=>{t.current=e}),p.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.current==null?void 0:t.current(...n)},[])}function D3(){const e=p.useRef(null),t=p.useCallback((n,s)=>{e.current=setInterval(n,s)},[]),r=p.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function sa(e,t){t===void 0&&(t=[e]);const r=p.useRef(e);return Xr(()=>{r.current!==e&&(r.current=e)},t),r}function ja(e,t){const r=p.useRef();return p.useMemo(()=>{const n=e(r.current);return r.current=n,n},[...t])}function lc(e){const t=zm(e),r=p.useRef(null),n=p.useCallback(s=>{s!==r.current&&(t==null||t(s,r.current)),r.current=s},[]);return[r,n]}function Bh(e){const t=p.useRef();return p.useEffect(()=>{t.current=e},[e]),t.current}let Xu={};function ka(e,t){return p.useMemo(()=>{if(t)return t;const r=Xu[e]==null?0:Xu[e]+1;return Xu[e]=r,e+"-"+r},[e,t])}function b_(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return n.reduce((i,a)=>{const l=Object.entries(a);for(const[c,u]of l){const d=i[c];d!=null&&(i[c]=d+e*u)}return i},{...t})}}const xi=b_(1),ia=b_(-1);function M3(e){return"clientX"in e&&"clientY"in e}function Um(e){if(!e)return!1;const{KeyboardEvent:t}=Xt(e.target);return t&&e instanceof t}function O3(e){if(!e)return!1;const{TouchEvent:t}=Xt(e.target);return t&&e instanceof t}function zh(e){if(O3(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return M3(e)?{x:e.clientX,y:e.clientY}:null}const Ps=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[Ps.Translate.toString(e),Ps.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),tx="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function L3(e){return e.matches(tx)?e:e.querySelector(tx)}const F3={display:"none"};function I3(e){let{id:t,value:r}=e;return vt.createElement("div",{id:t,style:F3},r)}function B3(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return vt.createElement("div",{id:t,style:s,role:"status","aria-live":n,"aria-atomic":!0},r)}function z3(){const[e,t]=p.useState("");return{announce:p.useCallback(n=>{n!=null&&t(n)},[]),announcement:e}}const v_=p.createContext(null);function U3(e){const t=p.useContext(v_);p.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function V3(){const[e]=p.useState(()=>new Set),t=p.useCallback(n=>(e.add(n),()=>e.delete(n)),[e]);return[p.useCallback(n=>{let{type:s,event:i}=n;e.forEach(a=>{var l;return(l=a[s])==null?void 0:l.call(a,i)})},[e]),t]}const q3={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},W3={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function H3(e){let{announcements:t=W3,container:r,hiddenTextDescribedById:n,screenReaderInstructions:s=q3}=e;const{announce:i,announcement:a}=z3(),l=ka("DndLiveRegion"),[c,u]=p.useState(!1);if(p.useEffect(()=>{u(!0)},[]),U3(p.useMemo(()=>({onDragStart(h){let{active:f}=h;i(t.onDragStart({active:f}))},onDragMove(h){let{active:f,over:m}=h;t.onDragMove&&i(t.onDragMove({active:f,over:m}))},onDragOver(h){let{active:f,over:m}=h;i(t.onDragOver({active:f,over:m}))},onDragEnd(h){let{active:f,over:m}=h;i(t.onDragEnd({active:f,over:m}))},onDragCancel(h){let{active:f,over:m}=h;i(t.onDragCancel({active:f,over:m}))}}),[i,t])),!c)return null;const d=vt.createElement(vt.Fragment,null,vt.createElement(I3,{id:n,value:s.draggable}),vt.createElement(B3,{id:l,announcement:a}));return r?Hr.createPortal(d,r):d}var gt;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(gt||(gt={}));function cc(){}function rx(e,t){return p.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function K3(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return p.useMemo(()=>[...t].filter(n=>n!=null),[...t])}const Ir=Object.freeze({x:0,y:0});function w_(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function __(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function G3(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function nx(e){let{left:t,top:r,height:n,width:s}=e;return[{x:t,y:r},{x:t+s,y:r},{x:t,y:r+n},{x:t+s,y:r+n}]}function j_(e,t){if(!e||e.length===0)return null;const[r]=e;return r[t]}function sx(e,t,r){return t===void 0&&(t=e.left),r===void 0&&(r=e.top),{x:t+e.width*.5,y:r+e.height*.5}}const Qu=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=sx(t,t.left,t.top),i=[];for(const a of n){const{id:l}=a,c=r.get(l);if(c){const u=w_(sx(c),s);i.push({id:l,data:{droppableContainer:a,value:u}})}}return i.sort(__)},Y3=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=nx(t),i=[];for(const a of n){const{id:l}=a,c=r.get(l);if(c){const u=nx(c),d=s.reduce((f,m,v)=>f+w_(u[v],m),0),h=Number((d/4).toFixed(4));i.push({id:l,data:{droppableContainer:a,value:h}})}}return i.sort(__)};function J3(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),a=s-n,l=i-r;if(n<s&&r<i){const c=t.width*t.height,u=e.width*e.height,d=a*l,h=d/(c+u-d);return Number(h.toFixed(4))}return 0}const X3=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const s=[];for(const i of n){const{id:a}=i,l=r.get(a);if(l){const c=J3(l,t);c>0&&s.push({id:a,data:{droppableContainer:i,value:c}})}}return s.sort(G3)};function Q3(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function k_(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:Ir}function Z3(e){return function(r){for(var n=arguments.length,s=new Array(n>1?n-1:0),i=1;i<n;i++)s[i-1]=arguments[i];return s.reduce((a,l)=>({...a,top:a.top+e*l.y,bottom:a.bottom+e*l.y,left:a.left+e*l.x,right:a.right+e*l.x}),{...r})}}const e$=Z3(1);function t$(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function r$(e,t,r){const n=t$(t);if(!n)return e;const{scaleX:s,scaleY:i,x:a,y:l}=n,c=e.left-a-(1-s)*parseFloat(r),u=e.top-l-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),d=s?e.width/s:e.width,h=i?e.height/i:e.height;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c}}const n$={ignoreTransform:!1};function Wi(e,t){t===void 0&&(t=n$);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=Xt(e).getComputedStyle(e);u&&(r=r$(r,u,d))}const{top:n,left:s,width:i,height:a,bottom:l,right:c}=r;return{top:n,left:s,width:i,height:a,bottom:l,right:c}}function ix(e){return Wi(e,{ignoreTransform:!0})}function s$(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function i$(e,t){return t===void 0&&(t=Xt(e).getComputedStyle(e)),t.position==="fixed"}function o$(e,t){t===void 0&&(t=Xt(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const i=t[s];return typeof i=="string"?r.test(i):!1})}function Wc(e,t){const r=[];function n(s){if(t!=null&&r.length>=t||!s)return r;if(Bm(s)&&s.scrollingElement!=null&&!r.includes(s.scrollingElement))return r.push(s.scrollingElement),r;if(!_a(s)||y_(s)||r.includes(s))return r;const i=Xt(e).getComputedStyle(s);return s!==e&&o$(s,i)&&r.push(s),i$(s,i)?r:n(s.parentNode)}return e?n(e):r}function N_(e){const[t]=Wc(e,1);return t??null}function Zu(e){return!qc||!e?null:Vi(e)?e:Im(e)?Bm(e)||e===qi(e).scrollingElement?window:_a(e)?e:null:null}function S_(e){return Vi(e)?e.scrollX:e.scrollLeft}function C_(e){return Vi(e)?e.scrollY:e.scrollTop}function Uh(e){return{x:S_(e),y:C_(e)}}var bt;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(bt||(bt={}));function E_(e){return!qc||!e?!1:e===document.scrollingElement}function T_(e){const t={x:0,y:0},r=E_(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},s=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,a=e.scrollTop>=n.y,l=e.scrollLeft>=n.x;return{isTop:s,isLeft:i,isBottom:a,isRight:l,maxScroll:n,minScroll:t}}const a$={x:.2,y:.2};function l$(e,t,r,n,s){let{top:i,left:a,right:l,bottom:c}=r;n===void 0&&(n=10),s===void 0&&(s=a$);const{isTop:u,isBottom:d,isLeft:h,isRight:f}=T_(e),m={x:0,y:0},v={x:0,y:0},b={height:t.height*s.y,width:t.width*s.x};return!u&&i<=t.top+b.height?(m.y=bt.Backward,v.y=n*Math.abs((t.top+b.height-i)/b.height)):!d&&c>=t.bottom-b.height&&(m.y=bt.Forward,v.y=n*Math.abs((t.bottom-b.height-c)/b.height)),!f&&l>=t.right-b.width?(m.x=bt.Forward,v.x=n*Math.abs((t.right-b.width-l)/b.width)):!h&&a<=t.left+b.width&&(m.x=bt.Backward,v.x=n*Math.abs((t.left+b.width-a)/b.width)),{direction:m,speed:v}}function c$(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:a}=window;return{top:0,left:0,right:i,bottom:a,width:i,height:a}}const{top:t,left:r,right:n,bottom:s}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:s,width:e.clientWidth,height:e.clientHeight}}function P_(e){return e.reduce((t,r)=>xi(t,Uh(r)),Ir)}function u$(e){return e.reduce((t,r)=>t+S_(r),0)}function d$(e){return e.reduce((t,r)=>t+C_(r),0)}function h$(e,t){if(t===void 0&&(t=Wi),!e)return;const{top:r,left:n,bottom:s,right:i}=t(e);N_(e)&&(s<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const f$=[["x",["left","right"],u$],["y",["top","bottom"],d$]];class Vm{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=Wc(r),s=P_(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,a,l]of f$)for(const c of a)Object.defineProperty(this,c,{get:()=>{const u=l(n),d=s[i]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Eo{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var s;(s=this.target)==null||s.addEventListener(t,r,n),this.listeners.push([t,r,n])}}function m$(e){const{EventTarget:t}=Xt(e);return e instanceof t?e:qi(e)}function ed(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var fr;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(fr||(fr={}));function ox(e){e.preventDefault()}function p$(e){e.stopPropagation()}var Re;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(Re||(Re={}));const $_={start:[Re.Space,Re.Enter],cancel:[Re.Esc],end:[Re.Space,Re.Enter,Re.Tab]},g$=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case Re.Right:return{...r,x:r.x+25};case Re.Left:return{...r,x:r.x-25};case Re.Down:return{...r,y:r.y+25};case Re.Up:return{...r,y:r.y-25}}};class qm{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new Eo(qi(r)),this.windowListeners=new Eo(Xt(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(fr.Resize,this.handleCancel),this.windowListeners.add(fr.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(fr.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&h$(n),r(Ir)}handleKeyDown(t){if(Um(t)){const{active:r,context:n,options:s}=this.props,{keyboardCodes:i=$_,coordinateGetter:a=g$,scrollBehavior:l="smooth"}=s,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=n.current,d=u?{x:u.left,y:u.top}:Ir;this.referenceCoordinates||(this.referenceCoordinates=d);const h=a(t,{active:r,context:n.current,currentCoordinates:d});if(h){const f=ia(h,d),m={x:0,y:0},{scrollableAncestors:v}=n.current;for(const b of v){const w=t.code,{isTop:y,isRight:x,isLeft:g,isBottom:_,maxScroll:k,minScroll:S}=T_(b),N=c$(b),E={x:Math.min(w===Re.Right?N.right-N.width/2:N.right,Math.max(w===Re.Right?N.left:N.left+N.width/2,h.x)),y:Math.min(w===Re.Down?N.bottom-N.height/2:N.bottom,Math.max(w===Re.Down?N.top:N.top+N.height/2,h.y))},O=w===Re.Right&&!x||w===Re.Left&&!g,D=w===Re.Down&&!_||w===Re.Up&&!y;if(O&&E.x!==h.x){const P=b.scrollLeft+f.x,te=w===Re.Right&&P<=k.x||w===Re.Left&&P>=S.x;if(te&&!f.y){b.scrollTo({left:P,behavior:l});return}te?m.x=b.scrollLeft-P:m.x=w===Re.Right?b.scrollLeft-k.x:b.scrollLeft-S.x,m.x&&b.scrollBy({left:-m.x,behavior:l});break}else if(D&&E.y!==h.y){const P=b.scrollTop+f.y,te=w===Re.Down&&P<=k.y||w===Re.Up&&P>=S.y;if(te&&!f.x){b.scrollTo({top:P,behavior:l});return}te?m.y=b.scrollTop-P:m.y=w===Re.Down?b.scrollTop-k.y:b.scrollTop-S.y,m.y&&b.scrollBy({top:-m.y,behavior:l});break}}this.handleMove(t,xi(ia(h,this.referenceCoordinates),m))}}}handleMove(t,r){const{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}qm.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=$_,onActivation:s}=t,{active:i}=r;const{code:a}=e.nativeEvent;if(n.start.includes(a)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),s==null||s({event:e.nativeEvent}),!0)}return!1}}];function ax(e){return!!(e&&"distance"in e)}function lx(e){return!!(e&&"delay"in e)}class Wm{constructor(t,r,n){var s;n===void 0&&(n=m$(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:i}=t,{target:a}=i;this.props=t,this.events=r,this.document=qi(a),this.documentListeners=new Eo(this.document),this.listeners=new Eo(n),this.windowListeners=new Eo(Xt(a)),this.initialCoordinates=(s=zh(i))!=null?s:Ir,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(fr.Resize,this.handleCancel),this.windowListeners.add(fr.DragStart,ox),this.windowListeners.add(fr.VisibilityChange,this.handleCancel),this.windowListeners.add(fr.ContextMenu,ox),this.documentListeners.add(fr.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(lx(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(ax(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:n,onPending:s}=this.props;s(n,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(fr.Click,p$,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(fr.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:n,initialCoordinates:s,props:i}=this,{onMove:a,options:{activationConstraint:l}}=i;if(!s)return;const c=(r=zh(t))!=null?r:Ir,u=ia(s,c);if(!n&&l){if(ax(l)){if(l.tolerance!=null&&ed(u,l.tolerance))return this.handleCancel();if(ed(u,l.distance))return this.handleStart()}if(lx(l)&&ed(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),a(c)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===Re.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const x$={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Hm extends Wm{constructor(t){const{event:r}=t,n=qi(r.target);super(t,x$,n)}}Hm.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const y$={move:{name:"mousemove"},end:{name:"mouseup"}};var Vh;(function(e){e[e.RightClick=2]="RightClick"})(Vh||(Vh={}));class b$ extends Wm{constructor(t){super(t,y$,qi(t.event.target))}}b$.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===Vh.RightClick?!1:(n==null||n({event:r}),!0)}}];const td={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class v$ extends Wm{constructor(t){super(t,td)}static setup(){return window.addEventListener(td.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(td.move.name,t)};function t(){}}}v$.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:s}=r;return s.length>1?!1:(n==null||n({event:r}),!0)}}];var To;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(To||(To={}));var uc;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(uc||(uc={}));function w$(e){let{acceleration:t,activator:r=To.Pointer,canScroll:n,draggingRect:s,enabled:i,interval:a=5,order:l=uc.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:h,threshold:f}=e;const m=j$({delta:h,disabled:!i}),[v,b]=D3(),w=p.useRef({x:0,y:0}),y=p.useRef({x:0,y:0}),x=p.useMemo(()=>{switch(r){case To.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case To.DraggableRect:return s}},[r,s,c]),g=p.useRef(null),_=p.useCallback(()=>{const S=g.current;if(!S)return;const N=w.current.x*y.current.x,E=w.current.y*y.current.y;S.scrollBy(N,E)},[]),k=p.useMemo(()=>l===uc.TreeOrder?[...u].reverse():u,[l,u]);p.useEffect(()=>{if(!i||!u.length||!x){b();return}for(const S of k){if((n==null?void 0:n(S))===!1)continue;const N=u.indexOf(S),E=d[N];if(!E)continue;const{direction:O,speed:D}=l$(S,E,x,t,f);for(const P of["x","y"])m[P][O[P]]||(D[P]=0,O[P]=0);if(D.x>0||D.y>0){b(),g.current=S,v(_,a),w.current=D,y.current=O;return}}w.current={x:0,y:0},y.current={x:0,y:0},b()},[t,_,n,b,i,a,JSON.stringify(x),JSON.stringify(m),v,u,k,d,JSON.stringify(f)])}const _$={x:{[bt.Backward]:!1,[bt.Forward]:!1},y:{[bt.Backward]:!1,[bt.Forward]:!1}};function j$(e){let{delta:t,disabled:r}=e;const n=Bh(t);return ja(s=>{if(r||!n||!s)return _$;const i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[bt.Backward]:s.x[bt.Backward]||i.x===-1,[bt.Forward]:s.x[bt.Forward]||i.x===1},y:{[bt.Backward]:s.y[bt.Backward]||i.y===-1,[bt.Forward]:s.y[bt.Forward]||i.y===1}}},[r,t,n])}function k$(e,t){const r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return ja(s=>{var i;return t==null?null:(i=n??s)!=null?i:null},[n,t])}function N$(e,t){return p.useMemo(()=>e.reduce((r,n)=>{const{sensor:s}=n,i=s.activators.map(a=>({eventName:a.eventName,handler:t(a.handler,n)}));return[...r,...i]},[]),[e,t])}var oa;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(oa||(oa={}));var qh;(function(e){e.Optimized="optimized"})(qh||(qh={}));const cx=new Map;function S$(e,t){let{dragging:r,dependencies:n,config:s}=t;const[i,a]=p.useState(null),{frequency:l,measure:c,strategy:u}=s,d=p.useRef(e),h=w(),f=sa(h),m=p.useCallback(function(y){y===void 0&&(y=[]),!f.current&&a(x=>x===null?y:x.concat(y.filter(g=>!x.includes(g))))},[f]),v=p.useRef(null),b=ja(y=>{if(h&&!r)return cx;if(!y||y===cx||d.current!==e||i!=null){const x=new Map;for(let g of e){if(!g)continue;if(i&&i.length>0&&!i.includes(g.id)&&g.rect.current){x.set(g.id,g.rect.current);continue}const _=g.node.current,k=_?new Vm(c(_),_):null;g.rect.current=k,k&&x.set(g.id,k)}return x}return y},[e,i,r,h,c]);return p.useEffect(()=>{d.current=e},[e]),p.useEffect(()=>{h||m()},[r,h]),p.useEffect(()=>{i&&i.length>0&&a(null)},[JSON.stringify(i)]),p.useEffect(()=>{h||typeof l!="number"||v.current!==null||(v.current=setTimeout(()=>{m(),v.current=null},l))},[l,h,m,...n]),{droppableRects:b,measureDroppableContainers:m,measuringScheduled:i!=null};function w(){switch(u){case oa.Always:return!1;case oa.BeforeDragging:return r;default:return!r}}}function A_(e,t){return ja(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function C$(e,t){return A_(e,t)}function E$(e){let{callback:t,disabled:r}=e;const n=zm(t),s=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return p.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Hc(e){let{callback:t,disabled:r}=e;const n=zm(t),s=p.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return p.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function T$(e){return new Vm(Wi(e),e)}function ux(e,t,r){t===void 0&&(t=T$);const[n,s]=p.useState(null);function i(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??r)!=null?u:null}const d=t(e);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const a=E$({callback(c){if(e)for(const u of c){const{type:d,target:h}=u;if(d==="childList"&&h instanceof HTMLElement&&h.contains(e)){i();break}}}}),l=Hc({callback:i});return Xr(()=>{i(),e?(l==null||l.observe(e),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),a==null||a.disconnect())},[e]),n}function P$(e){const t=A_(e);return k_(e,t)}const dx=[];function $$(e){const t=p.useRef(e),r=ja(n=>e?n&&n!==dx&&e&&t.current&&e.parentNode===t.current.parentNode?n:Wc(e):dx,[e]);return p.useEffect(()=>{t.current=e},[e]),r}function A$(e){const[t,r]=p.useState(null),n=p.useRef(e),s=p.useCallback(i=>{const a=Zu(i.target);a&&r(l=>l?(l.set(a,Uh(a)),new Map(l)):null)},[]);return p.useEffect(()=>{const i=n.current;if(e!==i){a(i);const l=e.map(c=>{const u=Zu(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,Uh(u)]):null}).filter(c=>c!=null);r(l.length?new Map(l):null),n.current=e}return()=>{a(e),a(i)};function a(l){l.forEach(c=>{const u=Zu(c);u==null||u.removeEventListener("scroll",s)})}},[s,e]),p.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,a)=>xi(i,a),Ir):P_(e):Ir,[e,t])}function hx(e,t){t===void 0&&(t=[]);const r=p.useRef(null);return p.useEffect(()=>{r.current=null},t),p.useEffect(()=>{const n=e!==Ir;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?ia(e,r.current):Ir}function R$(e){p.useEffect(()=>{if(!qc)return;const t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function D$(e,t){return p.useMemo(()=>e.reduce((r,n)=>{let{eventName:s,handler:i}=n;return r[s]=a=>{i(a,t)},r},{}),[e,t])}function R_(e){return p.useMemo(()=>e?s$(e):null,[e])}const fx=[];function M$(e,t){t===void 0&&(t=Wi);const[r]=e,n=R_(r?Xt(r):null),[s,i]=p.useState(fx);function a(){i(()=>e.length?e.map(c=>E_(c)?n:new Vm(t(c),c)):fx)}const l=Hc({callback:a});return Xr(()=>{l==null||l.disconnect(),a(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),s}function O$(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return _a(t)?t:e}function L$(e){let{measure:t}=e;const[r,n]=p.useState(null),s=p.useCallback(u=>{for(const{target:d}of u)if(_a(d)){n(h=>{const f=t(d);return h?{...h,width:f.width,height:f.height}:f});break}},[t]),i=Hc({callback:s}),a=p.useCallback(u=>{const d=O$(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),n(d?t(d):null)},[t,i]),[l,c]=lc(a);return p.useMemo(()=>({nodeRef:l,rect:r,setRef:c}),[r,l,c])}const F$=[{sensor:Hm,options:{}},{sensor:qm,options:{}}],I$={current:{}},wl={draggable:{measure:ix},droppable:{measure:ix,strategy:oa.WhileDragging,frequency:qh.Optimized},dragOverlay:{measure:Wi}};class Po extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}}const B$={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Po,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:cc},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:wl,measureDroppableContainers:cc,windowRect:null,measuringScheduled:!1},z$={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:cc,draggableNodes:new Map,over:null,measureDroppableContainers:cc},Kc=p.createContext(z$),D_=p.createContext(B$);function U$(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Po}}}function V$(e,t){switch(t.type){case gt.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case gt.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case gt.DragEnd:case gt.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case gt.RegisterDroppable:{const{element:r}=t,{id:n}=r,s=new Po(e.droppable.containers);return s.set(n,r),{...e,droppable:{...e.droppable,containers:s}}}case gt.SetDroppableDisabled:{const{id:r,key:n,disabled:s}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;const a=new Po(e.droppable.containers);return a.set(r,{...i,disabled:s}),{...e,droppable:{...e.droppable,containers:a}}}case gt.UnregisterDroppable:{const{id:r,key:n}=t,s=e.droppable.containers.get(r);if(!s||n!==s.key)return e;const i=new Po(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function q$(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:s}=p.useContext(Kc),i=Bh(n),a=Bh(r==null?void 0:r.id);return p.useEffect(()=>{if(!t&&!n&&i&&a!=null){if(!Um(i)||document.activeElement===i.target)return;const l=s.get(a);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const h=L3(d);if(h){h.focus();break}}})}},[n,t,s,a,i]),null}function W$(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((s,i)=>i({transform:s,...n}),r):r}function H$(e){return p.useMemo(()=>({draggable:{...wl.draggable,...e==null?void 0:e.draggable},droppable:{...wl.droppable,...e==null?void 0:e.droppable},dragOverlay:{...wl.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function K$(e){let{activeNode:t,measure:r,initialRect:n,config:s=!0}=e;const i=p.useRef(!1),{x:a,y:l}=typeof s=="boolean"?{x:s,y:s}:s;Xr(()=>{if(!a&&!l||!t){i.current=!1;return}if(i.current||!n)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=r(u),h=k_(d,n);if(a||(h.x=0),l||(h.y=0),i.current=!0,Math.abs(h.x)>0||Math.abs(h.y)>0){const f=N_(u);f&&f.scrollBy({top:h.y,left:h.x})}},[t,a,l,n,r])}const M_=p.createContext({...Ir,scaleX:1,scaleY:1});var Pn;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Pn||(Pn={}));const rd=p.memo(function(t){var r,n,s,i;let{id:a,accessibility:l,autoScroll:c=!0,children:u,sensors:d=F$,collisionDetection:h=X3,measuring:f,modifiers:m,...v}=t;const b=p.useReducer(V$,void 0,U$),[w,y]=b,[x,g]=V3(),[_,k]=p.useState(Pn.Uninitialized),S=_===Pn.Initialized,{draggable:{active:N,nodes:E,translate:O},droppable:{containers:D}}=w,P=N!=null?E.get(N):null,te=p.useRef({initial:null,translated:null}),B=p.useMemo(()=>{var $;return N!=null?{id:N,data:($=P==null?void 0:P.data)!=null?$:I$,rect:te}:null},[N,P]),he=p.useRef(null),[Z,ne]=p.useState(null),[fe,R]=p.useState(null),re=sa(v,Object.values(v)),ae=ka("DndDescribedBy",a),V=p.useMemo(()=>D.getEnabled(),[D]),pe=H$(f),{droppableRects:ye,measureDroppableContainers:ve,measuringScheduled:Se}=S$(V,{dragging:S,dependencies:[O.x,O.y],config:pe.droppable}),be=k$(E,N),K=p.useMemo(()=>fe?zh(fe):null,[fe]),q=C(),De=C$(be,pe.draggable.measure);K$({activeNode:N!=null?E.get(N):null,config:q.layoutShiftCompensation,initialRect:De,measure:pe.draggable.measure});const me=ux(be,pe.draggable.measure,De),Ve=ux(be?be.parentElement:null),Le=p.useRef({activatorEvent:null,active:null,activeNode:be,collisionRect:null,collisions:null,droppableRects:ye,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:D,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ct=D.getNodeFor((r=Le.current.over)==null?void 0:r.id),it=L$({measure:pe.dragOverlay.measure}),Q=(n=it.nodeRef.current)!=null?n:be,ee=S?(s=it.rect)!=null?s:me:null,ze=!!(it.nodeRef.current&&it.rect),lt=P$(ze?null:me),Et=R_(Q?Xt(Q):null),dt=$$(S?Ct??be:null),ar=M$(dt),Ie=W$(m,{transform:{x:O.x-lt.x,y:O.y-lt.y,scaleX:1,scaleY:1},activatorEvent:fe,active:B,activeNodeRect:me,containerNodeRect:Ve,draggingNodeRect:ee,over:Le.current.over,overlayNodeRect:it.rect,scrollableAncestors:dt,scrollableAncestorRects:ar,windowRect:Et}),lr=K?xi(K,O):null,Nr=A$(dt),zt=hx(Nr),cr=hx(Nr,[me]),Qt=xi(Ie,zt),ur=ee?e$(ee,Ie):null,zr=B&&ur?h({active:B,collisionRect:ur,droppableRects:ye,droppableContainers:V,pointerCoordinates:lr}):null,ns=j_(zr,"id"),[Zt,Qr]=p.useState(null),Ds=ze?Ie:xi(Ie,cr),ss=Q3(Ds,(i=Zt==null?void 0:Zt.rect)!=null?i:null,me),vn=p.useRef(null),is=p.useCallback(($,A)=>{let{sensor:L,options:J}=A;if(he.current==null)return;const U=E.get(he.current);if(!U)return;const X=$.nativeEvent,ie=new L({active:he.current,activeNode:U,event:X,options:J,context:Le,onAbort(W){if(!E.get(W))return;const{onDragAbort:_e}=re.current,M={id:W};_e==null||_e(M),x({type:"onDragAbort",event:M})},onPending(W,ke,_e,M){if(!E.get(W))return;const{onDragPending:se}=re.current,Me={id:W,constraint:ke,initialCoordinates:_e,offset:M};se==null||se(Me),x({type:"onDragPending",event:Me})},onStart(W){const ke=he.current;if(ke==null)return;const _e=E.get(ke);if(!_e)return;const{onDragStart:M}=re.current,ge={activatorEvent:X,active:{id:ke,data:_e.data,rect:te}};Hr.unstable_batchedUpdates(()=>{M==null||M(ge),k(Pn.Initializing),y({type:gt.DragStart,initialCoordinates:W,active:ke}),x({type:"onDragStart",event:ge}),ne(vn.current),R(X)})},onMove(W){y({type:gt.DragMove,coordinates:W})},onEnd:F(gt.DragEnd),onCancel:F(gt.DragCancel)});vn.current=ie;function F(W){return async function(){const{active:_e,collisions:M,over:ge,scrollAdjustedTranslate:se}=Le.current;let Me=null;if(_e&&se){const{cancelDrop:Te}=re.current;Me={activatorEvent:X,active:_e,collisions:M,delta:se,over:ge},W===gt.DragEnd&&typeof Te=="function"&&await Promise.resolve(Te(Me))&&(W=gt.DragCancel)}he.current=null,Hr.unstable_batchedUpdates(()=>{y({type:W}),k(Pn.Uninitialized),Qr(null),ne(null),R(null),vn.current=null;const Te=W===gt.DragEnd?"onDragEnd":"onDragCancel";if(Me){const j=re.current[Te];j==null||j(Me),x({type:Te,event:Me})}})}}},[E]),wn=p.useCallback(($,A)=>(L,J)=>{const U=L.nativeEvent,X=E.get(J);if(he.current!==null||!X||U.dndKit||U.defaultPrevented)return;const ie={active:X};$(L,A.options,ie)===!0&&(U.dndKit={capturedBy:A.sensor},he.current=J,is(L,A))},[E,is]),Ae=N$(d,wn);R$(d),Xr(()=>{me&&_===Pn.Initializing&&k(Pn.Initialized)},[me,_]),p.useEffect(()=>{const{onDragMove:$}=re.current,{active:A,activatorEvent:L,collisions:J,over:U}=Le.current;if(!A||!L)return;const X={active:A,activatorEvent:L,collisions:J,delta:{x:Qt.x,y:Qt.y},over:U};Hr.unstable_batchedUpdates(()=>{$==null||$(X),x({type:"onDragMove",event:X})})},[Qt.x,Qt.y]),p.useEffect(()=>{const{active:$,activatorEvent:A,collisions:L,droppableContainers:J,scrollAdjustedTranslate:U}=Le.current;if(!$||he.current==null||!A||!U)return;const{onDragOver:X}=re.current,ie=J.get(ns),F=ie&&ie.rect.current?{id:ie.id,rect:ie.rect.current,data:ie.data,disabled:ie.disabled}:null,W={active:$,activatorEvent:A,collisions:L,delta:{x:U.x,y:U.y},over:F};Hr.unstable_batchedUpdates(()=>{Qr(F),X==null||X(W),x({type:"onDragOver",event:W})})},[ns]),Xr(()=>{Le.current={activatorEvent:fe,active:B,activeNode:be,collisionRect:ur,collisions:zr,droppableRects:ye,draggableNodes:E,draggingNode:Q,draggingNodeRect:ee,droppableContainers:D,over:Zt,scrollableAncestors:dt,scrollAdjustedTranslate:Qt},te.current={initial:ee,translated:ur}},[B,be,zr,ur,E,Q,ee,ye,D,Zt,dt,Qt]),w$({...q,delta:O,draggingRect:ur,pointerCoordinates:lr,scrollableAncestors:dt,scrollableAncestorRects:ar});const Ms=p.useMemo(()=>({active:B,activeNode:be,activeNodeRect:me,activatorEvent:fe,collisions:zr,containerNodeRect:Ve,dragOverlay:it,draggableNodes:E,droppableContainers:D,droppableRects:ye,over:Zt,measureDroppableContainers:ve,scrollableAncestors:dt,scrollableAncestorRects:ar,measuringConfiguration:pe,measuringScheduled:Se,windowRect:Et}),[B,be,me,fe,zr,Ve,it,E,D,ye,Zt,ve,dt,ar,pe,Se,Et]),Os=p.useMemo(()=>({activatorEvent:fe,activators:Ae,active:B,activeNodeRect:me,ariaDescribedById:{draggable:ae},dispatch:y,draggableNodes:E,over:Zt,measureDroppableContainers:ve}),[fe,Ae,B,me,y,ae,E,Zt,ve]);return vt.createElement(v_.Provider,{value:g},vt.createElement(Kc.Provider,{value:Os},vt.createElement(D_.Provider,{value:Ms},vt.createElement(M_.Provider,{value:ss},u)),vt.createElement(q$,{disabled:(l==null?void 0:l.restoreFocus)===!1})),vt.createElement(H3,{...l,hiddenTextDescribedById:ae}));function C(){const $=(Z==null?void 0:Z.autoScrollEnabled)===!1,A=typeof c=="object"?c.enabled===!1:c===!1,L=S&&!$&&!A;return typeof c=="object"?{...c,enabled:L}:{enabled:L}}}),G$=p.createContext(null),mx="button",Y$="Draggable";function J$(e){let{id:t,data:r,disabled:n=!1,attributes:s}=e;const i=ka(Y$),{activators:a,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:h,over:f}=p.useContext(Kc),{role:m=mx,roleDescription:v="draggable",tabIndex:b=0}=s??{},w=(c==null?void 0:c.id)===t,y=p.useContext(w?M_:G$),[x,g]=lc(),[_,k]=lc(),S=D$(a,t),N=sa(r);Xr(()=>(h.set(t,{id:t,key:i,node:x,activatorNode:_,data:N}),()=>{const O=h.get(t);O&&O.key===i&&h.delete(t)}),[h,t]);const E=p.useMemo(()=>({role:m,tabIndex:b,"aria-disabled":n,"aria-pressed":w&&m===mx?!0:void 0,"aria-roledescription":v,"aria-describedby":d.draggable}),[n,m,b,w,v,d.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:E,isDragging:w,listeners:n?void 0:S,node:x,over:f,setNodeRef:g,setActivatorNodeRef:k,transform:y}}function X$(){return p.useContext(D_)}const Q$="Droppable",Z$={timeout:25};function eA(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:s}=e;const i=ka(Q$),{active:a,dispatch:l,over:c,measureDroppableContainers:u}=p.useContext(Kc),d=p.useRef({disabled:r}),h=p.useRef(!1),f=p.useRef(null),m=p.useRef(null),{disabled:v,updateMeasurementsFor:b,timeout:w}={...Z$,...s},y=sa(b??n),x=p.useCallback(()=>{if(!h.current){h.current=!0;return}m.current!=null&&clearTimeout(m.current),m.current=setTimeout(()=>{u(Array.isArray(y.current)?y.current:[y.current]),m.current=null},w)},[w]),g=Hc({callback:x,disabled:v||!a}),_=p.useCallback((E,O)=>{g&&(O&&(g.unobserve(O),h.current=!1),E&&g.observe(E))},[g]),[k,S]=lc(_),N=sa(t);return p.useEffect(()=>{!g||!k.current||(g.disconnect(),h.current=!1,g.observe(k.current))},[k,g]),p.useEffect(()=>(l({type:gt.RegisterDroppable,element:{id:n,key:i,disabled:r,node:k,rect:f,data:N}}),()=>l({type:gt.UnregisterDroppable,key:i,id:n})),[n]),p.useEffect(()=>{r!==d.current.disabled&&(l({type:gt.SetDroppableDisabled,id:n,key:i,disabled:r}),d.current.disabled=r)},[n,i,r,l]),{active:a,rect:f,isOver:(c==null?void 0:c.id)===n,node:k,over:c,setNodeRef:S}}function dc(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function tA(e,t){return e.reduce((r,n,s)=>{const i=t.get(n);return i&&(r[s]=i),r},Array(e.length))}function el(e){return e!==null&&e>=0}function rA(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function nA(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const O_=e=>{let{rects:t,activeIndex:r,overIndex:n,index:s}=e;const i=dc(t,n,r),a=t[s],l=i[s];return!l||!a?null:{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}},tl={scaleX:1,scaleY:1},nd=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:s,rects:i,overIndex:a}=e;const l=(t=i[r])!=null?t:n;if(!l)return null;if(s===r){const u=i[a];return u?{x:0,y:r<a?u.top+u.height-(l.top+l.height):u.top-l.top,...tl}:null}const c=sA(i,s,r);return s>r&&s<=a?{x:0,y:-l.height-c,...tl}:s<r&&s>=a?{x:0,y:l.height+c,...tl}:{x:0,y:0,...tl}};function sA(e,t,r){const n=e[t],s=e[t-1],i=e[t+1];return n?r<t?s?n.top-(s.top+s.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):s?n.top-(s.top+s.height):0:0}const L_="Sortable",F_=vt.createContext({activeIndex:-1,containerId:L_,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:O_,disabled:{draggable:!1,droppable:!1}});function sd(e){let{children:t,id:r,items:n,strategy:s=O_,disabled:i=!1}=e;const{active:a,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:d}=X$(),h=ka(L_,r),f=l.rect!==null,m=p.useMemo(()=>n.map(S=>typeof S=="object"&&"id"in S?S.id:S),[n]),v=a!=null,b=a?m.indexOf(a.id):-1,w=u?m.indexOf(u.id):-1,y=p.useRef(m),x=!rA(m,y.current),g=w!==-1&&b===-1||x,_=nA(i);Xr(()=>{x&&v&&d(m)},[x,m,v,d]),p.useEffect(()=>{y.current=m},[m]);const k=p.useMemo(()=>({activeIndex:b,containerId:h,disabled:_,disableTransforms:g,items:m,overIndex:w,useDragOverlay:f,sortedRects:tA(m,c),strategy:s}),[b,h,_.draggable,_.droppable,g,m,w,c,f,s]);return vt.createElement(F_.Provider,{value:k},t)}const iA=e=>{let{id:t,items:r,activeIndex:n,overIndex:s}=e;return dc(r,n,s).indexOf(t)},oA=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:s,items:i,newIndex:a,previousItems:l,previousContainerId:c,transition:u}=e;return!u||!n||l!==i&&s===a?!1:r?!0:a!==s&&t===c},aA={duration:200,easing:"ease"},I_="transform",lA=Ps.Transition.toString({property:I_,duration:0,easing:"linear"}),cA={roleDescription:"sortable"};function uA(e){let{disabled:t,index:r,node:n,rect:s}=e;const[i,a]=p.useState(null),l=p.useRef(r);return Xr(()=>{if(!t&&r!==l.current&&n.current){const c=s.current;if(c){const u=Wi(n.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&a(d)}}r!==l.current&&(l.current=r)},[t,r,n,s]),p.useEffect(()=>{i&&a(null)},[i]),i}function Km(e){let{animateLayoutChanges:t=oA,attributes:r,disabled:n,data:s,getNewIndex:i=iA,id:a,strategy:l,resizeObserverConfig:c,transition:u=aA}=e;const{items:d,containerId:h,activeIndex:f,disabled:m,disableTransforms:v,sortedRects:b,overIndex:w,useDragOverlay:y,strategy:x}=p.useContext(F_),g=dA(n,m),_=d.indexOf(a),k=p.useMemo(()=>({sortable:{containerId:h,index:_,items:d},...s}),[h,s,_,d]),S=p.useMemo(()=>d.slice(d.indexOf(a)),[d,a]),{rect:N,node:E,isOver:O,setNodeRef:D}=eA({id:a,data:k,disabled:g.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:P,activatorEvent:te,activeNodeRect:B,attributes:he,setNodeRef:Z,listeners:ne,isDragging:fe,over:R,setActivatorNodeRef:re,transform:ae}=J$({id:a,data:k,attributes:{...cA,...r},disabled:g.draggable}),V=R3(D,Z),pe=!!P,ye=pe&&!v&&el(f)&&el(w),ve=!y&&fe,Se=ve&&ye?ae:null,K=ye?Se??(l??x)({rects:b,activeNodeRect:B,activeIndex:f,overIndex:w,index:_}):null,q=el(f)&&el(w)?i({id:a,items:d,activeIndex:f,overIndex:w}):_,De=P==null?void 0:P.id,me=p.useRef({activeId:De,items:d,newIndex:q,containerId:h}),Ve=d!==me.current.items,Le=t({active:P,containerId:h,isDragging:fe,isSorting:pe,id:a,index:_,items:d,newIndex:me.current.newIndex,previousItems:me.current.items,previousContainerId:me.current.containerId,transition:u,wasDragging:me.current.activeId!=null}),Ct=uA({disabled:!Le,index:_,node:E,rect:N});return p.useEffect(()=>{pe&&me.current.newIndex!==q&&(me.current.newIndex=q),h!==me.current.containerId&&(me.current.containerId=h),d!==me.current.items&&(me.current.items=d)},[pe,q,h,d]),p.useEffect(()=>{if(De===me.current.activeId)return;if(De!=null&&me.current.activeId==null){me.current.activeId=De;return}const Q=setTimeout(()=>{me.current.activeId=De},50);return()=>clearTimeout(Q)},[De]),{active:P,activeIndex:f,attributes:he,data:k,rect:N,index:_,newIndex:q,items:d,isOver:O,isSorting:pe,isDragging:fe,listeners:ne,node:E,overIndex:w,over:R,setNodeRef:V,setActivatorNodeRef:re,setDroppableNodeRef:D,setDraggableNodeRef:Z,transform:Ct??K,transition:it()};function it(){if(Ct||Ve&&me.current.newIndex===_)return lA;if(!(ve&&!Um(te)||!u)&&(pe||Le))return Ps.Transition.toString({...u,property:I_})}}function dA(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(n=e==null?void 0:e.droppable)!=null?n:t.droppable}}function hc(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const hA=[Re.Down,Re.Right,Re.Up,Re.Left],fA=(e,t)=>{let{context:{active:r,collisionRect:n,droppableRects:s,droppableContainers:i,over:a,scrollableAncestors:l}}=t;if(hA.includes(e.code)){if(e.preventDefault(),!r||!n)return;const c=[];i.getEnabled().forEach(h=>{if(!h||h!=null&&h.disabled)return;const f=s.get(h.id);if(f)switch(e.code){case Re.Down:n.top<f.top&&c.push(h);break;case Re.Up:n.top>f.top&&c.push(h);break;case Re.Left:n.left>f.left&&c.push(h);break;case Re.Right:n.left<f.left&&c.push(h);break}});const u=Y3({active:r,collisionRect:n,droppableRects:s,droppableContainers:c,pointerCoordinates:null});let d=j_(u,"id");if(d===(a==null?void 0:a.id)&&u.length>1&&(d=u[1].id),d!=null){const h=i.get(r.id),f=i.get(d),m=f?s.get(f.id):null,v=f==null?void 0:f.node.current;if(v&&m&&h&&f){const w=Wc(v).some((S,N)=>l[N]!==S),y=B_(h,f),x=mA(h,f),g=w||!y?{x:0,y:0}:{x:x?n.width-m.width:0,y:x?n.height-m.height:0},_={x:m.left,y:m.top};return g.x&&g.y?_:ia(_,g)}}}};function B_(e,t){return!hc(e)||!hc(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function mA(e,t){return!hc(e)||!hc(t)||!B_(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const id=[{type:"image_selection",title:"Card Selection",description:"Choose from image cards with descriptions",icon:o.jsx(vv,{className:"h-4 w-4"})},{type:"multiple_choice",title:"Multiple Choice",description:"Select from text-based options",icon:o.jsx(sr,{className:"h-4 w-4"})},{type:"text_input",title:"Text Input",description:"Single line or paragraph text input",icon:o.jsx(Ql,{className:"h-4 w-4"})},{type:"file_upload",title:"File Upload",description:"Allow users to upload files",icon:o.jsx(jC,{className:"h-4 w-4"})},{type:"dimensions",title:"Dimensions",description:"Collect 2D or 3D measurements",icon:o.jsx(Nv,{className:"h-4 w-4"})},{type:"opinion_scale",title:"Opinion Scale",description:"Rate using numbers (1-10) or stars (1-5)",icon:o.jsx(rm,{className:"h-4 w-4"})},{type:"contact_fields",title:"Contact Information",description:"Collect contact details from users",icon:o.jsx(Li,{className:"h-4 w-4"})},{type:"frames_plan",title:"Frames Plan",description:"Multiple frame upload with locations and measurements",icon:o.jsx(bv,{className:"h-4 w-4"})}];function pA({step:e,index:t,isSelected:r,onClick:n,onDelete:s,onDuplicate:i,onPreview:a,canDelete:l}){const{attributes:c,listeners:u,setNodeRef:d,transform:h,transition:f,isDragging:m}=Km({id:`step-${t}`}),v={transform:Ps.Transform.toString(h),transition:f,opacity:m?.5:1};return o.jsx("div",{ref:d,style:v,"data-step-index":t,className:`p-4 rounded-xl cursor-pointer transition-all duration-200 border backdrop-blur-sm ${r?"bg-gradient-to-r from-blue-500/20 to-purple-500/20 border-blue-400/30 shadow-lg shadow-blue-500/25":"bg-white/5 hover:bg-white/10 border-white/10 hover:border-white/20"} ${m?"rotate-2 scale-105":""}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[o.jsx("div",{...c,...u,className:"cursor-grab active:cursor-grabbing p-1 text-white/50 hover:text-white/80 transition-colors",title:"Drag to reorder",children:o.jsx(tm,{className:"h-4 w-4"})}),o.jsxs("div",{className:"flex-1",onClick:n,children:[o.jsx("p",{className:"font-medium text-sm text-white",children:e.title||`Step ${t+1}`}),o.jsx("p",{className:"text-xs text-white/60 capitalize mt-1",children:e.question_type.replace("_"," ")})]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:"text-xs text-white/50 bg-white/10 px-2 py-1 rounded-lg",children:t+1}),o.jsx("button",{onClick:b=>{b.stopPropagation(),a()},className:"p-1 text-white/40 hover:text-green-300 hover:bg-green-500/20 rounded-lg transition-all duration-200 hover:scale-110",title:"Preview this step",children:o.jsx(pn,{className:"h-4 w-4"})}),o.jsx("button",{onClick:b=>{b.stopPropagation(),i()},className:"p-1 text-white/40 hover:text-blue-300 hover:bg-blue-500/20 rounded-lg transition-all duration-200 hover:scale-110",title:"Duplicate step",children:o.jsx(xv,{className:"h-4 w-4"})}),l&&o.jsx("button",{onClick:b=>{b.stopPropagation(),s()},className:"p-1 text-white/40 hover:text-red-300 hover:bg-red-500/20 rounded-lg transition-all duration-200 hover:scale-110",children:o.jsx(st,{className:"h-4 w-4"})})]})]})})}function gA({option:e,stepIndex:t,optionIndex:r,onUpdate:n,onDelete:s,onFileChange:i,cropImagesToSquare:a=!0}){const{attributes:l,listeners:c,setNodeRef:u,transform:d,transition:h,isDragging:f}=Km({id:`step-${t}-option-${r}`}),m={transform:Ps.Transform.toString(d),transition:h,opacity:f?.5:1},[v,b]=vt.useState(!1),w=_=>{_.preventDefault(),_.stopPropagation(),b(!0)},y=_=>{_.preventDefault(),_.stopPropagation(),b(!1)},x=_=>{_.preventDefault(),_.stopPropagation(),b(!1);const S=Array.from(_.dataTransfer.files).find(N=>N.type.startsWith("image/"));S&&i(t,r,S)},g=()=>{const _=document.createElement("input");_.type="file",_.accept="image/*",_.onchange=k=>{var N;const S=((N=k.target.files)==null?void 0:N[0])||null;i(t,r,S)},_.click()};return o.jsxs("div",{ref:u,style:m,className:`group relative bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 hover:bg-white/10 transition-all duration-200 hover:scale-105 hover:shadow-xl flex flex-col ${f?"rotate-2 scale-105":""}`,children:[o.jsx("div",{...l,...c,className:"absolute top-2 left-2 z-10 cursor-grab active:cursor-grabbing p-1 bg-black/20 hover:bg-black/40 text-white/60 hover:text-white rounded-full transition-all duration-200 opacity-0 group-hover:opacity-100",title:"Drag to reorder",children:o.jsx(tm,{className:"h-3 w-3"})}),o.jsx("div",{className:`p-4 flex-grow flex ${a?"aspect-square":"items-start"}`,children:e.image_url?o.jsxs("div",{className:`relative ${a?"h-full w-full":"w-full"} group/image`,onDragOver:w,onDragLeave:y,onDrop:x,children:[o.jsx("img",{src:e.image_url,alt:"Option preview",className:`rounded-lg border border-white/20 shadow-lg ${a?"h-full w-full object-cover":"w-full object-contain"} ${v?"opacity-50":""}`}),v&&o.jsx("div",{className:"absolute inset-0 bg-blue-500/20 border-2 border-dashed border-blue-400 rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(Ts,{className:"h-8 w-8 text-blue-300 mx-auto mb-2"}),o.jsx("p",{className:"text-sm text-blue-200 font-medium",children:"Drop to replace image"})]})}),o.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover/image:bg-black/20 transition-all duration-200 rounded-lg flex items-center justify-center",children:o.jsxs("div",{className:"flex space-x-2 opacity-0 group-hover/image:opacity-100 transition-opacity duration-200",children:[o.jsx("button",{onClick:g,className:"p-2 bg-blue-500/80 hover:bg-blue-500 text-white rounded-full transition-all duration-200 hover:scale-110 shadow-lg",title:"Replace image",children:o.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),o.jsx("button",{onClick:()=>n(t,r,{...e,image_url:void 0,imageFile:null}),className:"p-2 bg-red-500/80 hover:bg-red-500 text-white rounded-full transition-all duration-200 hover:scale-110 shadow-lg",title:"Remove image",children:o.jsx(st,{className:"h-4 w-4"})})]})})]}):o.jsxs("button",{onClick:g,onDragOver:w,onDragLeave:y,onDrop:x,className:`h-full w-full border-2 border-dashed rounded-lg transition-all duration-200 flex flex-col items-center justify-center space-y-2 group-hover:scale-105 ${v?"border-blue-400 bg-blue-500/20 scale-105":"border-white/30 hover:border-cyan-400/50 hover:bg-cyan-500/10"}`,children:[o.jsx(Ts,{className:`h-8 w-8 transition-colors duration-200 ${v?"text-blue-300":"text-white/40 group-hover:text-cyan-300"}`}),o.jsx("span",{className:`text-xs transition-colors duration-200 ${v?"text-blue-200 font-medium":"text-white/50 group-hover:text-cyan-200"}`,children:v?"Drop image here":"Upload or drag image"})]})}),o.jsxs("div",{className:"p-4 space-y-3 flex-shrink-0",children:[o.jsx("input",{type:"text",value:e.label,onChange:_=>n(t,r,{...e,label:_.target.value}),placeholder:"Option label",className:"w-full px-3 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15 text-sm font-medium"}),o.jsx("textarea",{value:e.description||"",onChange:_=>n(t,r,{...e,description:_.target.value}),placeholder:"Description (optional)",rows:2,className:"w-full px-3 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15 text-xs resize-none"}),o.jsx("div",{className:"space-y-1",children:o.jsx("input",{type:"number",min:1,max:999,value:e.jump_to_step??"",onChange:_=>n(t,r,{...e,jump_to_step:_.target.value?Number(_.target.value):void 0}),placeholder:"Jump to step",className:"w-full px-3 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15 text-xs"})})]}),o.jsx("button",{onClick:()=>s(t,r),className:"absolute top-2 right-2 p-1 bg-red-500/20 hover:bg-red-500/30 text-red-300 rounded-full transition-all duration-200 hover:scale-110 shadow-lg opacity-0 group-hover:opacity-100",children:o.jsx(st,{className:"h-3 w-3"})})]})}function xA({option:e,stepIndex:t,optionIndex:r,onUpdate:n,onDelete:s}){const{attributes:i,listeners:a,setNodeRef:l,transform:c,transition:u,isDragging:d}=Km({id:`step-${t}-option-${r}`}),h={transform:Ps.Transform.toString(c),transition:u,opacity:d?.5:1};return o.jsx("div",{ref:l,style:h,className:`bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 p-4 hover:bg-white/10 transition-all duration-200 ${d?"rotate-1 scale-105":""}`,children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-start justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[o.jsx("div",{...i,...a,className:"cursor-grab active:cursor-grabbing p-1 text-white/50 hover:text-white/80 transition-colors",title:"Drag to reorder",children:o.jsx(tm,{className:"h-4 w-4"})}),o.jsxs("div",{className:"flex-1 space-y-3",children:[o.jsx("input",{type:"text",value:e.label,onChange:f=>n(t,r,{...e,label:f.target.value}),placeholder:"Option label",className:"w-full px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15 font-medium"}),o.jsx("textarea",{value:e.description||"",onChange:f=>n(t,r,{...e,description:f.target.value}),placeholder:"Option description",rows:2,className:"w-full px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15 text-sm resize-none"})]})]}),o.jsx("div",{className:"ml-4 space-y-3",children:o.jsx("button",{onClick:()=>s(t,r),className:"p-2 text-white/40 hover:text-red-300 hover:bg-red-500/20 rounded-xl transition-all duration-200 hover:scale-110",children:o.jsx(st,{className:"h-4 w-4"})})})]}),o.jsxs("div",{className:"space-y-2 mt-4",children:[o.jsx("label",{className:"block text-xs text-white/70",children:"Jump to step (optional)"}),o.jsx("input",{type:"number",min:1,max:999,value:e.jump_to_step??"",onChange:f=>n(t,r,{...e,jump_to_step:f.target.value?Number(f.target.value):void 0}),placeholder:"Step number",className:"w-24 px-3 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15 text-sm"})]})]})})}function yA({title:e,icon:t,isCollapsed:r,onToggle:n,animationDelay:s="0s",children:i}){const{theme:a}=Ue();return o.jsxs("div",{className:`backdrop-blur-xl rounded-2xl overflow-hidden transition-all duration-200 ${a==="light"?"bg-white/80 border border-gray-200 shadow-lg":"bg-white/10 border border-white/20"}`,style:{animationDelay:s},children:[o.jsxs("button",{onClick:n,className:`w-full px-6 py-4 flex items-center justify-between text-left transition-colors duration-200 ${a==="light"?"hover:bg-gray-50 text-gray-800":"hover:bg-white/5 text-white"}`,children:[o.jsxs("h3",{className:`text-lg font-semibold flex items-center ${a==="light"?"text-gray-800":"text-white"}`,children:[t,e]}),o.jsx("div",{className:"flex items-center",children:r?o.jsx(Zf,{className:`w-5 h-5 transition-transform duration-200 ${a==="light"?"text-gray-500":"text-white/60"}`}):o.jsx(gv,{className:`w-5 h-5 transition-transform duration-200 ${a==="light"?"text-gray-500":"text-white/60"}`})})]}),o.jsx("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${r?"max-h-0 opacity-0":"max-h-[5000px] opacity-100"}`,children:o.jsx("div",{className:"px-6 pb-6",children:i})})]})}function px(){var ge,se,Me,Te;const{user:e}=kr(),{push:t}=ts(),{theme:r}=Ue(),n=Zn(),{id:s}=Pc(),[i,a]=p.useState("Window & Door Designer Tool"),[l,c]=p.useState(""),[u,d]=p.useState("Interactive form to help customers design their perfect windows and doors"),[h,f]=p.useState("Welcome to our design tool! Let's create the perfect windows and doors for your home."),[m,v]=p.useState(null),[b,w]=p.useState([]),[y,x]=p.useState("generic"),[g,_]=p.useState("#3B82F6"),[k,S]=p.useState("#FFFFFF"),[N,E]=p.useState("#E5E7EB"),[O,D]=p.useState("#374151"),[P,te]=p.useState([]),[B,he]=p.useState(null),[Z,ne]=p.useState(!1),[fe,R]=p.useState(!1),[re,ae]=p.useState(!1),[V,pe]=p.useState(null),[ye,ve]=p.useState(!1),[Se,be]=p.useState(!1),[K,q]=p.useState(!1),[De,me]=p.useState(!1),[Ve,Le]=p.useState(!1),[Ct,it]=p.useState(!1),[Q,ee]=p.useState(!1),[ze,lt]=p.useState(!1),[Et,dt]=p.useState(!1),[ar,Ie]=p.useState(!1),[lr,Nr]=p.useState(new Map),[zt,cr]=p.useState({past:[],present:null,future:[]}),[Qt,ur]=p.useState(!0),[zr,ns]=p.useState({formSteps:!1}),Zt=j=>{ns(T=>({...T,[j]:!T[j]}))},Qr=K3(rx(Hm),rx(qm,{coordinateGetter:fA})),Ds=j=>{const{active:T,over:I}=j;if(I&&T.id!==I.id){const Y=parseInt(T.id.toString().replace("step-","")),de=parseInt(I.id.toString().replace("step-",""));if(Y!==de){const Ge=dc(P,Y,de).map((je,Fe)=>({...je,step_order:Fe+1}));te(Ge),B===Y?he(de):B===de&&he(Y),C()}}},ss=j=>{const{active:T,over:I}=j;if(I&&T.id!==I.id){const Y=T.id.toString(),de=I.id.toString(),Ce=Y.match(/step-(\d+)-option-(\d+)/),Ge=de.match(/step-(\d+)-option-(\d+)/);if(Ce&&Ge){const je=parseInt(Ce[1]),Fe=parseInt(Ce[2]),_t=parseInt(Ge[2]);if(Fe!==_t){const Zr=P[je],Sr=dc(Zr.options,Fe,_t);Ae(je,{...Zr,options:Sr})}}}};p.useEffect(()=>{e&&(vn(),s?is():setTimeout(()=>ur(!1),100))},[e,s]),p.useEffect(()=>{!Qt&&zt.present===null&&cr(j=>({...j,present:{steps:P,selectedStepIndex:B,name:i,internalName:l,description:u,welcomeMessage:h,clientId:m,formTheme:y,primaryButtonColor:g,primaryButtonTextColor:k,secondaryButtonColor:N,secondaryButtonTextColor:O}}))},[Qt,P,B,i,l,u,h,m,y,g,k,N,O,zt.present]);const vn=async()=>{if(!e)return;const{data:j,error:T}=await z.from("clients").select("id,name").eq("user_id",e.id);if(T){console.error(T),t({type:"error",message:"Error loading clients"});return}w(j||[]),(j||[]).length>0&&v((j||[])[0].id)},is=async()=>{if(!(!s||!e)){ve(!0);try{const{data:j,error:T}=await z.from("forms").select("*").eq("id",s).eq("user_id",e.id).single();if(T)throw T;const{data:I,error:Y}=await z.from("form_steps").select(`
          *,
          form_options (
            id,
            label,
            image_url,
            option_order,
            jump_to_step
          )
        `).eq("form_id",s).order("step_order");if(Y)throw Y;const{data:de,error:Ce}=await z.from("step_logic").select("*").eq("form_id",s);Ce&&Ce.code!=="PGRST116"&&console.error("Error loading step logic:",Ce),a(j.name),c(j.internal_name||""),d(j.description),f(j.welcome_message||""),v(j.client_id),x(j.form_theme||"generic"),_(j.primary_button_color||"#3B82F6"),S(j.primary_button_text_color||"#FFFFFF"),E(j.secondary_button_color||"#E5E7EB"),D(j.secondary_button_text_color||"#374151"),be(!0);const Ge=(I||[]).map(je=>({id:je.id,title:je.title,description:je.description||void 0,question_type:je.question_type,step_order:je.step_order,is_required:je.is_required,max_file_size:je.max_file_size,allowed_file_types:je.allowed_file_types,dimension_type:je.dimension_type,dimension_units:je.dimension_units,scale_type:je.scale_type,scale_min:je.scale_min,scale_max:je.scale_max,images_per_row:je.images_per_row,crop_images_to_square:je.crop_images_to_square??!0,frames_max_count:je.frames_max_count,frames_require_image:je.frames_require_image,frames_require_location:je.frames_require_location,frames_require_measurements:je.frames_require_measurements,options:(je.form_options||[]).sort((Fe,_t)=>(Fe.option_order||0)-(_t.option_order||0)).map(Fe=>({id:Fe.id,label:Fe.label,description:"",image_url:Fe.image_url,jump_to_step:Fe.jump_to_step}))}));if(te(Ge),de&&de.length>0){const je=new Map;de.forEach(Fe=>{je.set(Fe.step_id,{step_id:Fe.step_id,rules:Fe.rules||[],default_action:Fe.default_action||void 0})}),Nr(je)}t({type:"success",message:"Form loaded successfully"}),ur(!1)}catch(j){console.error("Error loading form:",j),t({type:"error",message:"Error loading form for editing"}),n("/forms")}finally{ve(!1)}}},wn=j=>{const T={title:`New ${j.replace("_"," ")} Step`,question_type:j,step_order:P.length+1,is_required:!0,options:j==="image_selection"||j==="multiple_choice"?[{label:"Option 1",description:""}]:[],max_file_size:j==="file_upload"?5:void 0,allowed_file_types:j==="file_upload"?["image/*","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]:void 0,dimension_type:j==="dimensions"?"2d":void 0,scale_type:j==="opinion_scale"?"number":void 0,scale_min:j==="opinion_scale"?1:void 0,scale_max:j==="opinion_scale"?10:void 0,images_per_row:j==="image_selection"?2:void 0,crop_images_to_square:j==="image_selection"?!0:void 0,frames_max_count:j==="frames_plan"?10:void 0,frames_require_image:j==="frames_plan"?!0:void 0,frames_require_location:j==="frames_plan"?!0:void 0,frames_require_measurements:j==="frames_plan"?!0:void 0},I=[...P,T];te(I),he(I.length-1),C(),setTimeout(()=>{const Y=document.querySelector(`[data-step-index="${I.length-1}"]`);Y&&Y.scrollIntoView({behavior:"smooth",block:"nearest"})},100)},Ae=(j,T)=>{const I=[...P];I[j]=T,te(I),C()},Ms=j=>{if(P.length<=1)return;const T=P.filter((I,Y)=>Y!==j);te(T.map((I,Y)=>({...I,step_order:Y+1}))),B===j&&he(Math.max(0,Math.min(j,T.length-1))),C()},Os=j=>{const T=P[j],I={...T,id:void 0,title:`${T.title} (Copy)`,step_order:j+2,options:T.options.map(de=>({...de,id:void 0}))},Y=[...P.slice(0,j+1),I,...P.slice(j+1)].map((de,Ce)=>({...de,step_order:Ce+1}));te(Y),he(j+1),C()},C=()=>{Qt||cr(j=>({past:j.present?[...j.past,j.present]:j.past,present:{steps:P,selectedStepIndex:B,name:i,internalName:l,description:u,welcomeMessage:h,clientId:m,formTheme:y,primaryButtonColor:g,primaryButtonTextColor:k,secondaryButtonColor:N,secondaryButtonTextColor:O},future:[]}))},$=()=>{cr(j=>{if(j.past.length===0)return j;const T=j.past[j.past.length-1];if(!T)return j;const I=j.past.slice(0,-1);return te(T.steps||[]),he(T.selectedStepIndex||null),a(T.name||""),c(T.internalName||""),d(T.description||""),f(T.welcomeMessage||""),v(T.clientId||null),x(T.formTheme||"generic"),_(T.primaryButtonColor||"#3B82F6"),S(T.primaryButtonTextColor||"#FFFFFF"),E(T.secondaryButtonColor||"#E5E7EB"),D(T.secondaryButtonTextColor||"#374151"),{past:I,present:T,future:j.present?[j.present,...j.future]:j.future}})},A=()=>{cr(j=>{if(j.future.length===0)return j;const T=j.future[0];if(!T)return j;const I=j.future.slice(1);return te(T.steps||[]),he(T.selectedStepIndex||null),a(T.name||""),c(T.internalName||""),d(T.description||""),f(T.welcomeMessage||""),v(T.clientId||null),x(T.formTheme||"generic"),_(T.primaryButtonColor||"#3B82F6"),S(T.primaryButtonTextColor||"#FFFFFF"),E(T.secondaryButtonColor||"#E5E7EB"),D(T.secondaryButtonTextColor||"#374151"),{past:j.present?[...j.past,j.present]:j.past,present:T,future:I}})},L=j=>{if(j<0||j>=P.length)return;const T=P[j],I={label:`Option ${T.options.length+1}`,description:"",imageFile:null},Y={...T,options:[...T.options,I]};Ae(j,Y)},J=(j,T,I)=>{if(j<0||j>=P.length)return;const Y=P[j],de=[...Y.options];de[T]=I,Ae(j,{...Y,options:de})},U=(j,T)=>{if(j<0||j>=P.length)return;const I=P[j];if(I.options.length<=1)return;const Y=I.options.filter((de,Ce)=>Ce!==T);Ae(j,{...I,options:Y})},X=async(j,T)=>{if(!e||B===null){t({type:"error",message:"Please select a step to save as template"});return}const I=P[B];if(I)try{const{data:Y,error:de}=await z.from("step_templates").insert({user_id:e.id,name:j,description:T||null,question_type:I.question_type,title:I.title,is_required:I.is_required??!0,max_file_size:I.max_file_size,allowed_file_types:I.allowed_file_types,dimension_type:I.dimension_type,dimension_units:I.dimension_units,scale_type:I.scale_type,scale_min:I.scale_min,scale_max:I.scale_max,images_per_row:I.images_per_row,crop_images_to_square:I.crop_images_to_square,frames_max_count:I.frames_max_count,frames_require_image:I.frames_require_image,frames_require_location:I.frames_require_location,frames_require_measurements:I.frames_require_measurements}).select().single();if(de)throw de;if(I.options&&I.options.length>0){const Ce=I.options.map((je,Fe)=>({template_id:Y.id,label:je.label,description:je.description||null,image_url:je.image_url||null,jump_to_step:je.jump_to_step||null,option_order:Fe+1})),{error:Ge}=await z.from("step_template_options").insert(Ce);if(Ge)throw Ge}t({type:"success",message:`Template "${j}" saved successfully!`})}catch(Y){throw console.error("Error saving template:",Y),t({type:"error",message:"Failed to save template"}),Y}},ie=async j=>{if(B===null){t({type:"error",message:"Please select a step first"});return}try{const I={...P[B],title:j.title,description:j.description||void 0,question_type:j.question_type,is_required:j.is_required??!0,max_file_size:j.max_file_size,allowed_file_types:j.allowed_file_types,dimension_type:j.dimension_type,dimension_units:j.dimension_units,scale_type:j.scale_type,scale_min:j.scale_min,scale_max:j.scale_max,images_per_row:j.images_per_row,crop_images_to_square:j.crop_images_to_square??!0,frames_max_count:j.frames_max_count,frames_require_image:j.frames_require_image,frames_require_location:j.frames_require_location,frames_require_measurements:j.frames_require_measurements,options:(j.options||[]).map(Y=>({label:Y.label,description:Y.description||"",image_url:Y.image_url||void 0,jump_to_step:Y.jump_to_step||void 0,imageFile:null}))};Ae(B,I),t({type:"success",message:`Template "${j.name}" applied successfully!`})}catch(T){throw console.error("Error loading template:",T),t({type:"error",message:"Failed to apply template"}),T}},F=async j=>{try{const T={title:j.title,description:j.description||void 0,question_type:j.question_type,is_required:j.is_required??!0,step_order:P.length+1,max_file_size:j.max_file_size,allowed_file_types:j.allowed_file_types,dimension_type:j.dimension_type,dimension_units:j.dimension_units,scale_type:j.scale_type,scale_min:j.scale_min,scale_max:j.scale_max,images_per_row:j.images_per_row,crop_images_to_square:j.crop_images_to_square??!0,frames_max_count:j.frames_max_count,frames_require_image:j.frames_require_image,frames_require_location:j.frames_require_location,frames_require_measurements:j.frames_require_measurements,options:(j.options||[]).map(Y=>({label:Y.label,description:Y.description||"",image_url:Y.image_url||void 0,jump_to_step:Y.jump_to_step||void 0,imageFile:null}))},I=[...P,T];te(I),he(I.length-1),C(),t({type:"success",message:`Step created from template "${j.name}"!`})}catch(T){throw console.error("Error creating step from template:",T),t({type:"error",message:"Failed to create step from template"}),T}},W=(j,T,I)=>{if(j<0||j>=P.length)return;const de=P[j].options[T];if(!de)return;const Ce=I?URL.createObjectURL(I):void 0;let Ge=de.label;I&&(!de.label||de.label.match(/^Option \d+$/))&&(Ge=I.name.replace(/\.[^/.]+$/,"").replace(/[-_]/g," ").replace(/\b\w/g,_t=>_t.toUpperCase()));const je={...de,imageFile:I,image_url:Ce??de.image_url,label:Ge};J(j,T,je)},ke=async()=>{if(!e)return t({type:"error",message:"You must be signed in"});if(!i||!m)return t({type:"error",message:"Please provide form name and client"});ne(!0);try{let j=s;if(Se&&s){const{error:T}=await z.from("forms").update({name:i,internal_name:l,description:u,client_id:m,welcome_message:h,form_theme:y,primary_button_color:g,primary_button_text_color:k,secondary_button_color:N,secondary_button_text_color:O}).eq("id",s).eq("user_id",e.id);if(T)throw T;const{error:I}=await z.from("form_steps").delete().eq("form_id",s);if(I)throw I}else{const{data:T,error:I}=await z.from("forms").insert([{name:i,internal_name:l,description:u,client_id:m,user_id:e.id,welcome_message:h,form_theme:y,primary_button_color:g,primary_button_text_color:k,secondary_button_color:N,secondary_button_text_color:O}]).select().single();if(I)throw I;j=T.id}for(const T of P){const{data:I,error:Y}=await z.from("form_steps").insert([{form_id:j,title:T.title,description:T.description||null,question_type:T.question_type,is_required:T.is_required??!0,step_order:T.step_order,max_file_size:T.max_file_size,allowed_file_types:T.allowed_file_types,dimension_type:T.dimension_type,dimension_units:T.dimension_units,scale_type:T.scale_type,scale_min:T.scale_min,scale_max:T.scale_max,images_per_row:T.images_per_row,crop_images_to_square:T.crop_images_to_square??!0,frames_max_count:T.frames_max_count,frames_require_image:T.frames_require_image,frames_require_location:T.frames_require_location,frames_require_measurements:T.frames_require_measurements}]).select().single();if(Y)throw Y;const de=I.id;for(const Ce of T.options){let Ge=Ce.image_url||null;if(Ce.imageFile){const Fe="form-assets",_t=`${e.id}/${j}/${de}/${Date.now()}-${Ce.imageFile.name}`;console.log("Attempting direct upload to:",Fe,_t);const{error:Zr}=await z.storage.from(Fe).upload(_t,Ce.imageFile);if(Zr)console.error("Upload error details:",Zr),t({type:"error",message:`Image upload failed: ${Zr.message}`}),Ge=`https://via.placeholder.com/300x200?text=${encodeURIComponent(Ce.label)}`;else{const{data:Sr}=await z.storage.from(Fe).getPublicUrl(_t);Ge=(Sr==null?void 0:Sr.publicUrl)||`https://via.placeholder.com/300x200?text=${encodeURIComponent(Ce.label)}`,console.log("Upload successful, URL:",Ge),t({type:"success",message:"Image uploaded successfully!"})}}const{error:je}=await z.from("form_options").insert([{step_id:de,label:Ce.label,image_url:Ge,jump_to_step:Ce.jump_to_step??null,option_order:T.options.indexOf(Ce)+1}]);if(je)throw je}}if(j){await z.from("step_logic").delete().eq("form_id",j);const T=[];for(const[I,Y]of lr.entries())(Y.rules.length>0||Y.default_action)&&T.push({step_id:I,form_id:j,rules:Y.rules,default_action:Y.default_action||null});if(T.length>0){const{error:I}=await z.from("step_logic").insert(T);I&&(console.error("Error saving step logic:",I),t({type:"warning",message:"Form saved but logic rules may not have been saved"}))}}t({type:"success",message:Se?"Form updated successfully":"Form created successfully"})}catch(j){console.error("Error saving form:",j),t({type:"error",message:"Error saving form"})}finally{ne(!1)}},_e=async j=>{if(!e){t({type:"error",message:"You must be signed in"});return}const T=P[j];if(T){if(!Se||!s){t({type:"info",message:"Saving entire form first..."}),await ke();return}ne(!0);try{let I=T.id;if(I){const{error:Y}=await z.from("form_steps").update({title:T.title,description:T.description||null,question_type:T.question_type,is_required:T.is_required??!0,step_order:T.step_order,max_file_size:T.max_file_size,allowed_file_types:T.allowed_file_types,scale_type:T.scale_type,scale_min:T.scale_min,scale_max:T.scale_max,dimension_type:T.dimension_type,dimension_units:T.dimension_units,images_per_row:T.images_per_row,crop_images_to_square:T.crop_images_to_square??!0,frames_max_count:T.frames_max_count,frames_require_image:T.frames_require_image,frames_require_location:T.frames_require_location,frames_require_measurements:T.frames_require_measurements}).eq("id",I).eq("form_id",s);if(Y)throw Y;const{error:de}=await z.from("form_options").delete().eq("step_id",I);if(de)throw de}else{const{data:Y,error:de}=await z.from("form_steps").insert([{form_id:s,title:T.title,description:T.description||null,question_type:T.question_type,is_required:T.is_required??!0,step_order:T.step_order,max_file_size:T.max_file_size,allowed_file_types:T.allowed_file_types,scale_type:T.scale_type,scale_min:T.scale_min,scale_max:T.scale_max,dimension_type:T.dimension_type,dimension_units:T.dimension_units,images_per_row:T.images_per_row,crop_images_to_square:T.crop_images_to_square??!0,frames_max_count:T.frames_max_count,frames_require_image:T.frames_require_image,frames_require_location:T.frames_require_location,frames_require_measurements:T.frames_require_measurements}]).select().single();if(de)throw de;I=Y.id;const Ce=[...P];Ce[j]={...T,id:I},te(Ce)}for(const Y of T.options){let de=Y.image_url||null;if(Y.imageFile){const Ge="form-assets",je=`${e.id}/${s}/${I}/${Date.now()}-${Y.imageFile.name}`;console.log("Attempting direct upload to:",Ge,je);const{error:Fe}=await z.storage.from(Ge).upload(je,Y.imageFile);if(Fe)console.error("Upload error details:",Fe),t({type:"error",message:`Image upload failed: ${Fe.message}`}),de=`https://via.placeholder.com/300x200?text=${encodeURIComponent(Y.label)}`;else{const{data:_t}=await z.storage.from(Ge).getPublicUrl(je);de=(_t==null?void 0:_t.publicUrl)||`https://via.placeholder.com/300x200?text=${encodeURIComponent(Y.label)}`,console.log("Upload successful, URL:",de),t({type:"success",message:"Image uploaded successfully!"})}}const{error:Ce}=await z.from("form_options").insert([{step_id:I,label:Y.label,image_url:de,jump_to_step:Y.jump_to_step??null,option_order:T.options.indexOf(Y)+1}]);if(Ce)throw Ce}t({type:"success",message:`Step "${T.title}" saved successfully`})}catch(I){console.error("Error saving step:",I),t({type:"error",message:"Error saving step"})}finally{ne(!1)}}},M=B!==null?P[B]:null;return ye?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#111111]",children:o.jsxs("div",{className:`backdrop-blur-xl rounded-2xl p-8 text-center animate-pulse ${r==="light"?"bg-white/80 border border-gray-200 shadow-lg":"bg-white/10 border border-white/20"}`,children:[o.jsx("div",{className:`animate-spin rounded-full h-12 w-12 border-2 mx-auto mb-4 ${r==="light"?"border-gray-300 border-t-blue-600":"border-white/30 border-t-white"}`}),o.jsx("p",{className:`font-medium ${r==="light"?"text-gray-700":"text-white/80"}`,children:"Loading form builder..."})]})}):o.jsxs("div",{className:"min-h-screen bg-[#111111]",children:[o.jsx("div",{className:`border-b backdrop-blur-xl px-6 py-4 ${r==="light"?"border-gray-200 bg-white/80":"border-white/10 bg-white/10"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("button",{onClick:()=>n("/forms"),className:`p-2 rounded-xl transition-all duration-200 hover:scale-110 ${r==="light"?"text-gray-600 hover:text-gray-900 hover:bg-gray-100":"text-white/60 hover:text-white hover:bg-white/10"}`,children:o.jsx(Qf,{className:"h-5 w-5"})}),o.jsxs("div",{children:[o.jsxs("h1",{className:`text-2xl font-bold bg-gradient-to-r bg-clip-text text-transparent ${r==="light"?"from-gray-800 via-blue-600 to-purple-600":"from-white via-orange-100 to-red-200"}`,children:[Se?"Edit Form: ":"Create Form: ",i||"Untitled Form"]}),m&&o.jsx("p",{className:`mt-1 ${r==="light"?"text-gray-600":"text-white/70"}`,children:(ge=b.find(j=>j.id===m))==null?void 0:ge.name})]})]}),o.jsxs("div",{className:"flex space-x-3",children:[o.jsxs("button",{onClick:()=>q(!0),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500/20 to-purple-500/20 hover:from-blue-500/30 hover:to-purple-500/30 border border-blue-400/30 text-blue-200 rounded-xl transition-all duration-200 hover:scale-105 shadow-lg",children:[o.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Add Step"]}),o.jsxs("button",{onClick:()=>ee(!0),className:`inline-flex items-center px-4 py-2 rounded-xl transition-all duration-200 hover:scale-105 shadow-lg ${r==="light"?"bg-gradient-to-r from-blue-50 to-blue-100 hover:from-blue-100 hover:to-blue-200 text-blue-700 border border-blue-200":"bg-gradient-to-r from-blue-500/20 to-blue-600/20 hover:from-blue-500/30 hover:to-blue-600/30 text-blue-200 border border-blue-400/30"}`,children:[o.jsx(sr,{className:"h-4 w-4 mr-2"}),"Form Settings"]}),o.jsxs("button",{onClick:()=>lt(!0),className:`inline-flex items-center px-4 py-2 rounded-xl transition-all duration-200 hover:scale-105 shadow-lg ${r==="light"?"bg-gradient-to-r from-purple-50 to-purple-100 hover:from-purple-100 hover:to-purple-200 text-purple-700 border border-purple-200":"bg-gradient-to-r from-purple-500/20 to-purple-600/20 hover:from-purple-500/30 hover:to-purple-600/30 text-purple-200 border border-purple-400/30"}`,children:[o.jsx(Zl,{className:"h-4 w-4 mr-2"}),"Form Theme"]}),o.jsxs("button",{onClick:()=>dt(!0),className:`inline-flex items-center px-4 py-2 rounded-xl transition-all duration-200 hover:scale-105 shadow-lg ${r==="light"?"bg-gradient-to-r from-yellow-50 to-yellow-100 hover:from-yellow-100 hover:to-yellow-200 text-yellow-700 border border-yellow-200":"bg-gradient-to-r from-yellow-500/20 to-yellow-600/20 hover:from-yellow-500/30 hover:to-yellow-600/30 text-yellow-200 border border-yellow-400/30"}`,children:[o.jsxs("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:[o.jsx("path",{fillRule:"evenodd",d:"M4 2a2 2 0 00-2 2v11a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H4zm0 2h12v11H4V4z",clipRule:"evenodd"}),o.jsx("path",{fillRule:"evenodd",d:"M8 6a2 2 0 11-4 0 2 2 0 014 0zM6 8a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})]}),"Button Colours"]}),o.jsx("button",{onClick:$,disabled:zt.past.length===0,className:`inline-flex items-center px-3 py-2 rounded-xl transition-all duration-200 hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed ${r==="light"?"bg-gradient-to-r from-gray-50 to-gray-100 hover:from-gray-100 hover:to-gray-200 text-gray-700 border border-gray-200 disabled:bg-gray-50":"bg-gradient-to-r from-gray-500/20 to-gray-600/20 hover:from-gray-500/30 hover:to-gray-600/30 text-gray-300 border border-gray-400/30 disabled:bg-gray-500/10"}`,title:"Undo last action",children:o.jsx(PC,{className:"h-4 w-4"})}),o.jsx("button",{onClick:A,disabled:zt.future.length===0,className:`inline-flex items-center px-3 py-2 rounded-xl transition-all duration-200 hover:scale-105 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed ${r==="light"?"bg-gradient-to-r from-gray-50 to-gray-100 hover:from-gray-100 hover:to-gray-200 text-gray-700 border border-gray-200 disabled:bg-gray-50":"bg-gradient-to-r from-gray-500/20 to-gray-600/20 hover:from-gray-500/30 hover:to-gray-600/30 text-gray-300 border border-gray-400/30 disabled:bg-gray-500/10"}`,title:"Redo last undone action",children:o.jsx(NC,{className:"h-4 w-4"})}),o.jsxs("button",{onClick:()=>R(!0),className:`inline-flex items-center px-4 py-2 rounded-xl transition-all duration-200 hover:scale-105 shadow-lg ${r==="light"?"bg-gradient-to-r from-purple-50 to-pink-50 hover:from-purple-100 hover:to-pink-100 text-purple-700 border border-purple-200":"bg-gradient-to-r from-purple-500/20 to-pink-500/20 hover:from-purple-500/30 hover:to-pink-500/30 text-purple-200 border border-purple-400/30"}`,children:[o.jsx(pn,{className:"mr-2 h-4 w-4"}),"Preview"]}),o.jsxs("button",{onClick:ke,disabled:Z,className:`inline-flex items-center px-6 py-2 rounded-xl font-medium transition-all duration-200 shadow-lg hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed ${r==="light"?"bg-gradient-to-r from-orange-500 to-red-500 hover:from-orange-600 hover:to-red-600 text-white shadow-orange-500/25 hover:shadow-orange-500/40":"bg-gradient-to-r from-orange-600 to-red-600 hover:from-orange-700 hover:to-red-700 text-white shadow-orange-500/25 hover:shadow-orange-500/40"}`,children:[o.jsx(fh,{className:"mr-2 h-4 w-4"}),Z?"Saving...":"Save Form"]})]})]})}),o.jsxs("div",{className:"flex h-[calc(100vh-80px)]",children:[o.jsx("div",{className:`w-[400px] border-r overflow-y-auto ${r==="light"?"border-gray-200 bg-white/60 backdrop-blur-sm":"border-white/10 bg-white/5 backdrop-blur-sm"}`,children:o.jsx("div",{className:"p-6 pb-24 space-y-6",children:o.jsx(yA,{title:"Form Steps",icon:o.jsx(Ql,{className:"w-5 h-5 mr-2 text-purple-400"}),isCollapsed:zr.formSteps,onToggle:()=>Zt("formSteps"),animationDelay:"0.1s",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx(rd,{sensors:Qr,collisionDetection:Qu,onDragEnd:Ds,children:o.jsxs("div",{className:"space-y-3",children:[o.jsx(sd,{items:P.map((j,T)=>`step-${T}`),strategy:nd,children:P.map((j,T)=>o.jsx(pA,{step:j,index:T,isSelected:B===T,onClick:()=>he(T),onDelete:()=>Ms(T),onDuplicate:()=>Os(T),onPreview:()=>{pe(T),ae(!0)},canDelete:P.length>1},`step-${T}`))}),P.length===0&&o.jsxs("div",{className:"text-center py-8",children:[o.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-white/20",children:o.jsx(Dr,{className:"w-6 h-6 text-white/60"})}),o.jsx("p",{className:"text-sm text-white/70 mb-6",children:"Create a step to start building your form"}),o.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:id.map(j=>o.jsxs("button",{onClick:()=>wn(j.type),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-500/20 to-purple-500/20 hover:from-blue-500/30 hover:to-purple-500/30 border border-blue-400/30 text-blue-200 rounded-xl transition-all duration-200 hover:scale-105 shadow-lg",children:[j.icon,o.jsx("span",{className:"ml-2 text-sm",children:j.title})]},j.type))})]})]})}),P.length>0&&o.jsxs("button",{onClick:()=>q(!0),className:"w-full inline-flex items-center justify-center px-4 py-3 bg-gradient-to-r from-blue-500/10 to-purple-500/10 hover:from-blue-500/20 hover:to-purple-500/20 border-2 border-dashed border-blue-400/30 hover:border-blue-400/50 text-blue-200 rounded-xl transition-all duration-200 hover:scale-[1.02] shadow-sm mt-3",children:[o.jsx(Dr,{className:"w-4 h-4 mr-2"}),"Add Step"]})]})})})}),o.jsx("div",{className:"flex-1 overflow-y-auto",children:o.jsx("div",{className:"p-6",children:M?o.jsxs("div",{className:`backdrop-blur-xl rounded-2xl p-6 ${r==="light"?"bg-white/90 border border-gray-200 shadow-lg":"bg-white/10 border border-white/20"}`,children:[o.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[o.jsxs("h2",{className:`text-xl font-semibold bg-gradient-to-r bg-clip-text text-transparent ${r==="light"?"from-gray-800 to-blue-600":"from-white to-blue-200"}`,children:["Step ",B+1," - ",M.question_type.replace("_"," ")]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("button",{onClick:()=>Le(!0),className:`inline-flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${r==="light"?"bg-blue-100 hover:bg-blue-200 text-blue-700":"bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 border border-blue-400/30"}`,title:"Load from template",children:[o.jsx(Au,{className:"w-4 h-4 mr-1.5"}),"Load Template"]}),o.jsxs("button",{onClick:()=>me(!0),className:`inline-flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${r==="light"?"bg-purple-100 hover:bg-purple-200 text-purple-700":"bg-purple-500/20 hover:bg-purple-500/30 text-purple-300 border border-purple-400/30"}`,title:"Save as template",children:[o.jsx(cC,{className:"w-4 h-4 mr-1.5"}),"Save Template"]}),M.question_type==="image_selection"&&o.jsxs("button",{onClick:()=>it(!0),className:`inline-flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${r==="light"?"bg-orange-100 hover:bg-orange-200 text-orange-700":"bg-orange-500/20 hover:bg-orange-500/30 text-orange-300 border border-orange-400/30"}`,title:"Layout settings",children:[o.jsx(mh,{className:"w-4 h-4 mr-1.5"}),"Layout Settings"]}),o.jsxs("button",{onClick:()=>Ie(!0),className:`inline-flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${r==="light"?"bg-gradient-to-r from-purple-100 to-pink-100 hover:from-purple-200 hover:to-pink-200 text-purple-700":"bg-gradient-to-r from-purple-500/20 to-pink-500/20 hover:from-purple-500/30 hover:to-pink-500/30 text-purple-300 border border-purple-400/30"}`,title:"Add conditional logic",children:[o.jsx("svg",{className:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Logic",(se=lr.get(M.id||""))!=null&&se.rules.length?o.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 bg-purple-600 text-white text-xs rounded-full",children:(Me=lr.get(M.id||""))==null?void 0:Me.rules.length}):null]})]})]}),o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-medium ${r==="light"?"text-gray-700":"text-white/90"}`,children:"Step Title"}),o.jsx("input",{type:"text",value:M.title,onChange:j=>Ae(B,{...M,title:j.target.value}),placeholder:"What are you looking for?",className:`w-full px-4 py-3 backdrop-blur-sm border rounded-xl transition-all duration-200 focus:ring-2 focus:border-transparent ${r==="light"?"bg-white/90 border-gray-200 text-gray-900 placeholder-gray-500 hover:bg-white focus:ring-blue-500 shadow-sm":"bg-white/10 border-white/20 text-white placeholder-white/50 hover:bg-white/15 focus:ring-blue-400"}`})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-medium ${r==="light"?"text-gray-700":"text-white/90"}`,children:"Description (Optional)"}),o.jsx("textarea",{value:M.description||"",onChange:j=>Ae(B,{...M,description:j.target.value}),placeholder:"Add a short description or helpful text...",rows:2,className:`w-full px-4 py-3 backdrop-blur-sm border rounded-xl transition-all duration-200 focus:ring-2 focus:border-transparent resize-none ${r==="light"?"bg-white/90 border-gray-200 text-gray-900 placeholder-gray-500 hover:bg-white focus:ring-blue-500 shadow-sm":"bg-white/10 border-white/20 text-white placeholder-white/50 hover:bg-white/15 focus:ring-blue-400"}`})]}),(M.question_type==="image_selection"||M.question_type==="multiple_choice")&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("label",{className:"text-sm font-medium text-white/90",children:"Options"}),o.jsxs("button",{onClick:()=>L(B),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white rounded-xl transition-all duration-200 shadow-lg shadow-green-500/25 hover:shadow-green-500/40 hover:scale-105",children:[o.jsx(Dr,{className:"mr-2 h-4 w-4"}),"Add Option"]})]}),M.question_type==="image_selection"?o.jsx(rd,{sensors:Qr,collisionDetection:Qu,onDragEnd:ss,children:o.jsx(sd,{items:M.options.map((j,T)=>`step-${B}-option-${T}`),strategy:nd,children:o.jsx("div",{className:`grid gap-4 grid-auto-rows-fr ${M.crop_images_to_square?"":"items-start"} ${M.images_per_row===1?"grid-cols-1":M.images_per_row===2?"grid-cols-1 sm:grid-cols-2":M.images_per_row===3?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":M.images_per_row===4?"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4":"grid-cols-1 sm:grid-cols-2"}`,children:M.options.map((j,T)=>o.jsx(gA,{option:j,stepIndex:B,optionIndex:T,onUpdate:J,onDelete:U,onFileChange:W,cropImagesToSquare:M.crop_images_to_square??!0},`step-${B}-option-${T}`))})})}):o.jsx(rd,{sensors:Qr,collisionDetection:Qu,onDragEnd:ss,children:o.jsx(sd,{items:M.options.map((j,T)=>`step-${B}-option-${T}`),strategy:nd,children:o.jsx("div",{className:"space-y-4",children:M.options.map((j,T)=>o.jsx(xA,{option:j,stepIndex:B,optionIndex:T,onUpdate:J,onDelete:U},`step-${B}-option-${T}`))})})})]}),M.question_type==="file_upload"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"File Upload Preview"}),o.jsx("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 p-6",children:o.jsx("div",{className:"border-2 border-dashed border-white/30 rounded-lg p-8 text-center hover:border-cyan-400/50 transition-colors cursor-pointer",children:o.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o.jsx("div",{className:"w-16 h-16 bg-cyan-500/20 rounded-full flex items-center justify-center",children:o.jsx("svg",{className:"w-8 h-8 text-cyan-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-lg font-medium text-white/90 mb-2",children:"Drop files here or click to browse"}),o.jsxs("p",{className:"text-sm text-white/60",children:["Maximum file size: ",M.max_file_size||5,"MB"]}),(M.allowed_file_types||[]).length>0&&o.jsxs("p",{className:"text-xs text-white/50 mt-1",children:["Allowed types: ",(M.allowed_file_types||[]).map(j=>{var T;return j==="image/*"?"Images":j==="application/pdf"?"PDF":j.includes("word")?"Word docs":j==="text/*"?"Text files":((T=j.split("/")[1])==null?void 0:T.toUpperCase())||j}).join(", ")]})]})]})})})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Maximum File Size (MB)"}),o.jsx("input",{type:"number",min:1,max:100,value:M.max_file_size||5,onChange:j=>Ae(B,{...M,max_file_size:Number(j.target.value)||5}),className:"w-full px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white placeholder-white/50 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Required"}),o.jsxs("select",{value:M.is_required?"true":"false",onChange:j=>Ae(B,{...M,is_required:j.target.value==="true"}),className:"w-full px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15",children:[o.jsx("option",{value:"true",className:"bg-slate-800",children:"Required"}),o.jsx("option",{value:"false",className:"bg-slate-800",children:"Optional"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Allowed File Types"}),o.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[o.jsxs("label",{className:"flex items-center space-x-2 text-sm text-white/90",children:[o.jsx("input",{type:"checkbox",checked:(M.allowed_file_types||[]).includes("image/*"),onChange:j=>{const T=M.allowed_file_types||[],I=j.target.checked?[...T.filter(Y=>Y!=="image/*"),"image/*"]:T.filter(Y=>Y!=="image/*");Ae(B,{...M,allowed_file_types:I})},className:"rounded border-white/20 bg-white/10"}),o.jsx("span",{children:"Images"})]}),o.jsxs("label",{className:"flex items-center space-x-2 text-sm text-white/90",children:[o.jsx("input",{type:"checkbox",checked:(M.allowed_file_types||[]).includes("application/pdf"),onChange:j=>{const T=M.allowed_file_types||[],I=j.target.checked?[...T.filter(Y=>Y!=="application/pdf"),"application/pdf"]:T.filter(Y=>Y!=="application/pdf");Ae(B,{...M,allowed_file_types:I})},className:"rounded border-white/20 bg-white/10"}),o.jsx("span",{children:"PDF Documents"})]}),o.jsxs("label",{className:"flex items-center space-x-2 text-sm text-white/90",children:[o.jsx("input",{type:"checkbox",checked:(M.allowed_file_types||[]).some(j=>j.includes("word")),onChange:j=>{const T=M.allowed_file_types||[],I=["application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],Y=j.target.checked?[...T.filter(de=>!I.includes(de)),...I]:T.filter(de=>!I.includes(de));Ae(B,{...M,allowed_file_types:Y})},className:"rounded border-white/20 bg-white/10"}),o.jsx("span",{children:"Word Documents"})]}),o.jsxs("label",{className:"flex items-center space-x-2 text-sm text-white/90",children:[o.jsx("input",{type:"checkbox",checked:(M.allowed_file_types||[]).includes("text/*"),onChange:j=>{const T=M.allowed_file_types||[],I=j.target.checked?[...T.filter(Y=>Y!=="text/*"),"text/*"]:T.filter(Y=>Y!=="text/*");Ae(B,{...M,allowed_file_types:I})},className:"rounded border-white/20 bg-white/10"}),o.jsx("span",{children:"Text Files"})]})]})]})]}),M.question_type==="text_input"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Text Input Preview"}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 p-4",children:[o.jsx("div",{className:"text-sm text-white/70 mb-3",children:"Enter your response"}),o.jsx("textarea",{placeholder:"Enter your answer here...",rows:4,className:"w-full px-4 py-3 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 resize-none",readOnly:!0}),M.is_required&&o.jsx("p",{className:"text-xs text-white/60 mt-2",children:"* This field is required"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Required"}),o.jsxs("select",{value:M.is_required?"true":"false",onChange:j=>Ae(B,{...M,is_required:j.target.value==="true"}),className:"w-full px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15",children:[o.jsx("option",{value:"true",className:"bg-slate-800",children:"Required"}),o.jsx("option",{value:"false",className:"bg-slate-800",children:"Optional"})]})]})]}),M.question_type==="dimensions"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Dimensions Preview"}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 p-4",children:[o.jsx("div",{className:"text-sm text-white/70 mb-4",children:"Enter measurements"}),o.jsx("div",{className:"space-y-3 mb-4",children:o.jsxs("div",{className:"flex items-center space-x-6",children:[o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"radio",name:"dimensionTypePreview",value:"2d",checked:M.dimension_type==="2d"||!M.dimension_type,className:"text-cyan-400 focus:ring-cyan-400 bg-white/10 border-white/20",readOnly:!0}),o.jsx("span",{className:"text-white/70",children:"2D (Width  Height)"})]}),o.jsxs("label",{className:"flex items-center space-x-2",children:[o.jsx("input",{type:"radio",name:"dimensionTypePreview",value:"3d",checked:M.dimension_type==="3d",className:"text-cyan-400 focus:ring-cyan-400 bg-white/10 border-white/20",readOnly:!0}),o.jsx("span",{className:"text-white/70",children:"3D (Width  Height  Depth)"})]})]})}),o.jsxs("div",{className:"space-y-2 mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-white/70",children:"Units"}),o.jsxs("select",{value:"mm",className:"px-3 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white focus:ring-2 focus:ring-cyan-400 focus:border-transparent",disabled:!0,children:[o.jsx("option",{value:"mm",children:"Millimeters (mm)"}),o.jsx("option",{value:"cm",children:"Centimeters (cm)"}),o.jsx("option",{value:"m",children:"Meters (m)"}),o.jsx("option",{value:"in",children:"Inches (in)"}),o.jsx("option",{value:"ft",children:"Feet (ft)"})]})]}),o.jsxs("div",{className:`grid gap-4 ${M.dimension_type==="3d"?"grid-cols-1 md:grid-cols-3":"grid-cols-1 md:grid-cols-2"}`,children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-white/70 mb-1",children:"Width"}),o.jsx("input",{type:"number",placeholder:"0",className:"w-full px-3 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-cyan-400 focus:border-transparent",readOnly:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-white/70 mb-1",children:"Height"}),o.jsx("input",{type:"number",placeholder:"0",className:"w-full px-3 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-cyan-400 focus:border-transparent",readOnly:!0})]}),M.dimension_type==="3d"&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-white/70 mb-1",children:"Depth"}),o.jsx("input",{type:"number",placeholder:"0",className:"w-full px-3 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-cyan-400 focus:border-transparent",readOnly:!0})]})]}),M.is_required&&o.jsx("p",{className:"text-xs text-white/60 mt-2",children:"* These fields are required"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Dimension Type"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("label",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"radio",name:"dimensionType",value:"2d",checked:M.dimension_type==="2d",onChange:j=>Ae(B,{...M,dimension_type:j.target.value}),className:"text-blue-600 focus:ring-blue-500 bg-white/10 border-white/20"}),o.jsx("span",{className:"text-white/90",children:"2D (Width  Height)"})]}),o.jsxs("label",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"radio",name:"dimensionType",value:"3d",checked:M.dimension_type==="3d",onChange:j=>Ae(B,{...M,dimension_type:j.target.value}),className:"text-blue-600 focus:ring-blue-500 bg-white/10 border-white/20"}),o.jsx("span",{className:"text-white/90",children:"3D (Width  Height  Depth)"})]})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Default Units"}),o.jsxs("select",{value:M.dimension_units||"mm",onChange:j=>Ae(B,{...M,dimension_units:j.target.value}),className:"w-full px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15",children:[o.jsx("option",{value:"mm",className:"bg-slate-800",children:"Millimeters (mm)"}),o.jsx("option",{value:"cm",className:"bg-slate-800",children:"Centimeters (cm)"}),o.jsx("option",{value:"m",className:"bg-slate-800",children:"Meters (m)"}),o.jsx("option",{value:"in",className:"bg-slate-800",children:"Inches (in)"}),o.jsx("option",{value:"ft",className:"bg-slate-800",children:"Feet (ft)"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Required"}),o.jsxs("select",{value:M.is_required?"true":"false",onChange:j=>Ae(B,{...M,is_required:j.target.value==="true"}),className:"w-full px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15",children:[o.jsx("option",{value:"true",className:"bg-slate-800",children:"Required"}),o.jsx("option",{value:"false",className:"bg-slate-800",children:"Optional"})]})]})]}),M.question_type==="opinion_scale"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Scale Preview"}),o.jsx("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 p-6",children:o.jsx("div",{className:"text-center",children:M.scale_type==="star"?o.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(j=>o.jsx("button",{type:"button",className:"text-4xl text-white/40 hover:text-cyan-300 transition-colors",disabled:!0,children:""},j))}):o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 min-w-max px-4",children:Array.from({length:(M.scale_max||10)-(M.scale_min||1)+1},(j,T)=>(M.scale_min||1)+T).map(j=>o.jsx("button",{type:"button",className:"w-10 h-10 sm:w-12 sm:h-12 rounded-lg border-2 bg-white/10 border-white/20 text-white/70 font-semibold text-sm sm:text-base transition-all flex-shrink-0 hover:bg-white/20 hover:border-cyan-400/50",disabled:!0,children:j},j))})})})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Scale Type"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("label",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"radio",name:"scaleType",value:"number",checked:M.scale_type==="number",onChange:j=>Ae(B,{...M,scale_type:j.target.value,scale_min:1,scale_max:j.target.value==="number"?10:5}),className:"text-blue-600 focus:ring-blue-500 bg-white/10 border-white/20"}),o.jsx("span",{className:"text-white/90",children:"Number Scale (1-10)"})]}),o.jsxs("label",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"radio",name:"scaleType",value:"star",checked:M.scale_type==="star",onChange:j=>Ae(B,{...M,scale_type:j.target.value,scale_min:1,scale_max:j.target.value==="number"?10:5}),className:"text-blue-600 focus:ring-blue-500 bg-white/10 border-white/20"}),o.jsx("span",{className:"text-white/90",children:"Star Rating (1-5)"})]})]})]}),M.scale_type==="number"&&o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Minimum Value"}),o.jsx("input",{type:"number",min:1,max:9,value:M.scale_min||1,onChange:j=>Ae(B,{...M,scale_min:Number(j.target.value)||1}),className:"w-full px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15"})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Maximum Value"}),o.jsx("input",{type:"number",min:2,max:10,value:M.scale_max||10,onChange:j=>Ae(B,{...M,scale_max:Number(j.target.value)||10}),className:"w-full px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Required"}),o.jsxs("select",{value:M.is_required?"true":"false",onChange:j=>Ae(B,{...M,is_required:j.target.value==="true"}),className:"w-full px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15",children:[o.jsx("option",{value:"true",className:"bg-slate-800",children:"Required"}),o.jsx("option",{value:"false",className:"bg-slate-800",children:"Optional"})]})]})]}),M.question_type==="frames_plan"&&o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Frames Plan Preview"}),o.jsx("div",{className:"bg-white/5 backdrop-blur-sm rounded-xl border border-white/10 p-4",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/70",children:"How many frames do you want?"}),o.jsx("select",{value:1,className:"w-32 px-3 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white focus:ring-2 focus:ring-cyan-400 focus:border-transparent",disabled:!0,children:Array.from({length:M.frames_max_count||10},(j,T)=>T+1).map(j=>o.jsxs("option",{value:j,children:[j," ",j===1?"frame":"frames"]},j))})]}),o.jsxs("div",{className:"border border-white/20 rounded-lg p-4 bg-white/5",children:[o.jsx("h4",{className:"text-lg font-medium text-white/90 mb-4",children:"Frame 1"}),o.jsxs("div",{className:"space-y-4",children:[M.frames_require_image!==!1&&o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-white/70 mb-2",children:["Image",M.frames_require_image?" *":""]}),o.jsx("div",{className:"border-2 border-dashed border-white/30 rounded-lg p-6 text-center",children:o.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[o.jsx("div",{className:"w-12 h-12 bg-cyan-500/20 rounded-full flex items-center justify-center",children:o.jsx("svg",{className:"w-6 h-6 text-cyan-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm font-medium text-white/70",children:"Choose file"}),o.jsx("p",{className:"text-xs text-white/50",children:"PNG, JPG up to 10MB"})]})]})})]}),M.frames_require_location!==!1&&o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-white/70 mb-2",children:["Room Location (e.g., bedroom)",M.frames_require_location?" *":""]}),o.jsx("input",{type:"text",placeholder:"e.g., bedroom",className:"w-full px-3 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-cyan-400 focus:border-transparent",readOnly:!0})]}),M.frames_require_measurements!==!1&&o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-white/70 mb-2",children:["Measurements (optional) - width  height in mm",M.frames_require_measurements?" *":""]}),o.jsx("input",{type:"text",placeholder:"e.g., 1200  800",className:"w-full px-3 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-lg text-white placeholder-white/50 focus:ring-2 focus:ring-cyan-400 focus:border-transparent",readOnly:!0})]})]})]})]})})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Maximum Number of Frames"}),o.jsx("input",{type:"number",min:1,max:50,value:M.frames_max_count||10,onChange:j=>Ae(B,{...M,frames_max_count:Number(j.target.value)||10}),className:"w-full px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15"}),o.jsx("p",{className:"text-xs text-white/60",children:"Users can select up to this many frames"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("p",{className:"text-sm font-medium text-white/90",children:"Required Fields for Each Frame"}),o.jsxs("label",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",checked:M.frames_require_image!==!1,onChange:j=>Ae(B,{...M,frames_require_image:j.target.checked}),className:"text-blue-600 focus:ring-blue-500 bg-white/10 border-white/20 rounded"}),o.jsx("span",{className:"text-white/90",children:"Image Upload"})]}),o.jsxs("label",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",checked:M.frames_require_location!==!1,onChange:j=>Ae(B,{...M,frames_require_location:j.target.checked}),className:"text-blue-600 focus:ring-blue-500 bg-white/10 border-white/20 rounded"}),o.jsx("span",{className:"text-white/90",children:"Location (e.g., bedroom)"})]}),o.jsxs("label",{className:"flex items-center space-x-3",children:[o.jsx("input",{type:"checkbox",checked:M.frames_require_measurements!==!1,onChange:j=>Ae(B,{...M,frames_require_measurements:j.target.checked}),className:"text-blue-600 focus:ring-blue-500 bg-white/10 border-white/20 rounded"}),o.jsx("span",{className:"text-white/90",children:"Measurements"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-white/90",children:"Required"}),o.jsxs("select",{value:M.is_required?"true":"false",onChange:j=>Ae(B,{...M,is_required:j.target.value==="true"}),className:"w-full px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-white focus:ring-2 focus:ring-blue-400 focus:border-transparent transition-all duration-200 hover:bg-white/15",children:[o.jsx("option",{value:"true",className:"bg-slate-800",children:"Required"}),o.jsx("option",{value:"false",className:"bg-slate-800",children:"Optional"})]})]})]}),o.jsx("div",{className:"flex justify-end pt-6 mt-6 border-t border-white/20",children:o.jsxs("button",{onClick:()=>_e(B),disabled:Z,className:`inline-flex items-center px-6 py-3 rounded-xl font-medium transition-all duration-200 shadow-lg hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed ${Se&&s?"bg-gradient-to-r from-blue-500/20 to-purple-500/20 hover:from-blue-500/30 hover:to-purple-500/30 text-blue-200 border border-blue-400/30 shadow-blue-500/25":"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white shadow-green-500/25 hover:shadow-green-500/40"}`,children:[o.jsx(fh,{className:"mr-2 h-4 w-4"}),Z?"Saving...":Se&&s?"Save Step":"Save Form & Step"]})})]})]}):o.jsxs("div",{className:`backdrop-blur-xl rounded-2xl p-12 text-center ${r==="light"?"bg-white/90 border border-gray-200 shadow-lg":"bg-white/10 border border-white/20"}`,children:[o.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-6 border ${r==="light"?"bg-gray-50 border-gray-200":"bg-white/10 border-white/20"}`,children:o.jsx(Ql,{className:`w-8 h-8 ${r==="light"?"text-gray-500":"text-white/60"}`})}),o.jsx("h3",{className:`text-xl font-semibold mb-3 ${r==="light"?"text-gray-900":"text-white"}`,children:"No step selected"}),o.jsx("p",{className:`mb-8 text-lg ${r==="light"?"text-gray-600":"text-white/70"}`,children:"Create a step to start building your form"}),o.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-6",children:id.map(j=>o.jsxs("button",{onClick:()=>wn(j.type),className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500/20 to-purple-500/20 hover:from-blue-500/30 hover:to-purple-500/30 border border-blue-400/30 text-blue-200 rounded-xl transition-all duration-200 hover:scale-105 shadow-lg",children:[j.icon,o.jsx("span",{className:"ml-3",children:j.title})]},j.type))}),o.jsx("div",{className:"flex justify-center",children:o.jsxs("button",{onClick:()=>Le(!0),className:`inline-flex items-center px-6 py-3 rounded-xl font-medium transition-all duration-200 shadow-lg hover:scale-105 ${r==="light"?"bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white":"bg-gradient-to-r from-purple-500/20 to-pink-500/20 hover:from-purple-500/30 hover:to-pink-500/30 text-purple-200 border border-purple-400/30"}`,children:[o.jsx(Au,{className:"w-5 h-5 mr-2"}),"Create from Template"]})})]})})})]}),K&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:`w-full max-w-3xl max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl ${r==="light"?"bg-white border border-gray-200":"bg-slate-800 border border-white/20"}`,children:[o.jsx("div",{className:`sticky top-0 px-6 py-4 border-b backdrop-blur-xl ${r==="light"?"bg-white/95 border-gray-200":"bg-slate-800/95 border-white/20"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("h2",{className:`text-xl font-semibold ${r==="light"?"text-gray-900":"text-white"}`,children:"Choose Step Type"}),o.jsx("button",{onClick:()=>q(!1),className:`p-2 rounded-xl transition-all duration-200 hover:scale-110 ${r==="light"?"text-gray-600 hover:text-gray-900 hover:bg-gray-100":"text-white/60 hover:text-white hover:bg-white/10"}`,children:o.jsx(st,{className:"h-5 w-5"})})]})}),o.jsx("div",{className:"p-6",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[id.map(j=>o.jsxs("button",{onClick:()=>{wn(j.type),q(!1)},className:`flex items-start p-4 rounded-xl border-2 transition-all duration-200 text-left hover:scale-105 ${r==="light"?"bg-white hover:bg-gray-50 border-gray-200 hover:border-blue-300 hover:shadow-md":"bg-white/5 hover:bg-white/10 border-white/20 hover:border-blue-400/50"}`,children:[o.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-xl mr-4 flex-shrink-0 ${r==="light"?"bg-blue-50":"bg-blue-500/20"}`,children:o.jsx("div",{className:r==="light"?"text-blue-600":"text-blue-300",children:j.icon})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:`font-semibold text-base mb-1 ${r==="light"?"text-gray-900":"text-white"}`,children:j.title}),o.jsx("p",{className:`text-sm ${r==="light"?"text-gray-600":"text-white/70"}`,children:j.description})]})]},j.type)),o.jsxs("button",{onClick:()=>{q(!1),Le(!0)},className:`flex items-start p-4 rounded-xl border-2 transition-all duration-200 text-left hover:scale-105 ${r==="light"?"bg-purple-50 hover:bg-purple-100 border-purple-200 hover:border-purple-300 hover:shadow-md":"bg-purple-500/10 hover:bg-purple-500/20 border-purple-400/30 hover:border-purple-400/50"}`,children:[o.jsx("div",{className:`flex items-center justify-center w-12 h-12 rounded-xl mr-4 flex-shrink-0 ${r==="light"?"bg-purple-100":"bg-purple-500/20"}`,children:o.jsx(Au,{className:`w-6 h-6 ${r==="light"?"text-purple-600":"text-purple-300"}`})}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("p",{className:`font-semibold text-base mb-1 ${r==="light"?"text-gray-900":"text-white"}`,children:"Create from Template"}),o.jsx("p",{className:`text-sm ${r==="light"?"text-gray-600":"text-white/70"}`,children:"Use a saved template to create a new step"})]})]})]})})]})}),o.jsx(C3,{isOpen:fe,onClose:()=>R(!1),formId:s,formName:i}),V!==null&&o.jsx(E3,{isOpen:re,onClose:()=>{ae(!1),pe(null)},step:P[V],stepNumber:V+1,primaryColor:g,secondaryColor:N}),o.jsx(T3,{isOpen:De,onClose:()=>me(!1),onSave:X,stepType:(M==null?void 0:M.question_type)||""}),o.jsx($3,{isOpen:Ve,onClose:()=>Le(!1),onSelect:B!==null?ie:F}),Q&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:`w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl ${r==="light"?"bg-white border border-gray-200":"bg-slate-800 border border-white/20"}`,children:[o.jsx("div",{className:`sticky top-0 px-6 py-4 border-b backdrop-blur-xl ${r==="light"?"bg-white/95 border-gray-200":"bg-slate-800/95 border-white/20"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h2",{className:`text-xl font-semibold flex items-center ${r==="light"?"text-gray-900":"text-white"}`,children:[o.jsx(sr,{className:`w-5 h-5 mr-2 ${r==="light"?"text-blue-600":"text-blue-400"}`}),"Form Settings"]}),o.jsx("button",{onClick:()=>ee(!1),className:`p-2 rounded-xl transition-all duration-200 hover:scale-110 ${r==="light"?"text-gray-600 hover:text-gray-900 hover:bg-gray-100":"text-white/60 hover:text-white hover:bg-white/10"}`,children:o.jsx(st,{className:"h-5 w-5"})})]})}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-medium ${r==="light"?"text-gray-700":"text-white/90"}`,children:"Form Title"}),o.jsx("input",{type:"text",value:i,onChange:j=>a(j.target.value),placeholder:"Enter form title",className:`w-full px-4 py-3 backdrop-blur-sm border rounded-xl transition-all duration-200 focus:ring-2 focus:border-transparent ${r==="light"?"bg-white border-gray-200 text-gray-900 placeholder-gray-500 hover:bg-gray-50 focus:ring-blue-500 shadow-sm":"bg-white/10 border-white/20 text-white placeholder-white/50 hover:bg-white/15 focus:ring-blue-400"}`})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-medium ${r==="light"?"text-gray-700":"text-white/90"}`,children:"Internal Name (Admin Only)"}),o.jsx("input",{type:"text",value:l,onChange:j=>c(j.target.value),placeholder:"Internal name for admin use only",className:`w-full px-4 py-3 backdrop-blur-sm border rounded-xl transition-all duration-200 focus:ring-2 focus:border-transparent ${r==="light"?"bg-white border-gray-200 text-gray-900 placeholder-gray-500 hover:bg-gray-50 focus:ring-orange-500 shadow-sm":"bg-white/10 border-white/20 text-white placeholder-white/50 hover:bg-white/15 focus:ring-orange-400"}`})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-medium ${r==="light"?"text-gray-700":"text-white/90"}`,children:"Description"}),o.jsx("textarea",{value:u,onChange:j=>d(j.target.value),placeholder:"Brief description of your form",rows:3,className:`w-full px-4 py-3 backdrop-blur-sm border rounded-xl transition-all duration-200 focus:ring-2 focus:border-transparent resize-none ${r==="light"?"bg-white border-gray-200 text-gray-900 placeholder-gray-500 hover:bg-gray-50 focus:ring-blue-500 shadow-sm":"bg-white/10 border-white/20 text-white placeholder-white/50 hover:bg-white/15 focus:ring-blue-400"}`})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-medium ${r==="light"?"text-gray-700":"text-white/90"}`,children:"Welcome Message"}),o.jsx("textarea",{value:h,onChange:j=>f(j.target.value),placeholder:"Welcome message for form users",rows:3,className:`w-full px-4 py-3 backdrop-blur-sm border rounded-xl transition-all duration-200 focus:ring-2 focus:border-transparent resize-none ${r==="light"?"bg-white border-gray-200 text-gray-900 placeholder-gray-500 hover:bg-gray-50 focus:ring-blue-500 shadow-sm":"bg-white/10 border-white/20 text-white placeholder-white/50 hover:bg-white/15 focus:ring-blue-400"}`})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-medium ${r==="light"?"text-gray-700":"text-white/90"}`,children:"Client"}),o.jsxs("select",{value:m??"",onChange:j=>v(j.target.value),className:`w-full px-4 py-3 backdrop-blur-sm border rounded-xl transition-all duration-200 focus:ring-2 focus:border-transparent ${r==="light"?"bg-white border-gray-200 text-gray-900 hover:bg-gray-50 focus:ring-blue-500 shadow-sm":"bg-white/10 border-white/20 text-white hover:bg-white/15 focus:ring-blue-400"}`,children:[o.jsx("option",{value:"",className:r==="light"?"bg-white text-gray-900":"bg-slate-800 text-white",children:"Select client"}),b.map(j=>o.jsx("option",{value:j.id,className:r==="light"?"bg-white text-gray-900":"bg-slate-800 text-white",children:j.name},j.id))]})]})]})]})}),ze&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:`w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl ${r==="light"?"bg-white border border-gray-200":"bg-slate-800 border border-white/20"}`,children:[o.jsx("div",{className:`sticky top-0 px-6 py-4 border-b backdrop-blur-xl ${r==="light"?"bg-white/95 border-gray-200":"bg-slate-800/95 border-white/20"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h2",{className:`text-xl font-semibold flex items-center ${r==="light"?"text-gray-900":"text-white"}`,children:[o.jsx(Zl,{className:`w-5 h-5 mr-2 ${r==="light"?"text-purple-600":"text-purple-400"}`}),"Form Theme"]}),o.jsx("button",{onClick:()=>lt(!1),className:`p-2 rounded-xl transition-all duration-200 hover:scale-110 ${r==="light"?"text-gray-600 hover:text-gray-900 hover:bg-gray-100":"text-white/60 hover:text-white hover:bg-white/10"}`,children:o.jsx(st,{className:"h-5 w-5"})})]})}),o.jsxs("div",{className:"p-6 space-y-4",children:[o.jsx("p",{className:`text-sm mb-4 ${r==="light"?"text-gray-600":"text-white/70"}`,children:"Choose how your form appears to users"}),o.jsx("div",{className:"grid grid-cols-1 gap-3",children:Object.entries(Ih).map(([j,T])=>o.jsxs("button",{onClick:()=>x(j),className:`relative p-4 rounded-xl border-2 transition-all duration-200 text-left overflow-hidden ${y===j?r==="light"?"border-purple-500 bg-purple-50":"border-purple-400 bg-purple-400/20":r==="light"?"border-gray-200 bg-gray-50 hover:bg-gray-100 hover:border-gray-300":"border-white/20 bg-white/5 hover:bg-white/10 hover:border-white/30"}`,children:[j==="soft-ui"&&o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-50/10 to-purple-100/10 pointer-events-none"}),o.jsxs("div",{className:"relative flex items-start justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsx("h4",{className:`font-semibold mb-1 ${r==="light"?"text-gray-900":"text-white"}`,children:T.name}),o.jsx("p",{className:`text-sm mb-4 ${r==="light"?"text-gray-600":"text-white/70"}`,children:T.description}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:`p-3 ${j==="soft-ui"?"bg-white/30 backdrop-blur-sm rounded-2xl border border-white/20":"bg-white/90 rounded-lg border border-gray-200"}`,children:[o.jsx("div",{className:`h-3 mb-2 ${j==="soft-ui"?"bg-white/60 backdrop-blur-sm rounded-xl border border-white/30":"bg-gray-100 border border-gray-300 rounded-md"}`}),o.jsxs("div",{className:"flex gap-2 mt-3",children:[o.jsx("div",{className:`h-2.5 w-16 ${j==="soft-ui"?"bg-white/70 backdrop-blur-sm rounded-full border border-white/40":"bg-gray-300 rounded-md"}`}),o.jsx("div",{className:`h-2.5 w-12 ${j==="soft-ui"?"bg-gradient-to-r from-blue-400/80 to-purple-500/80 rounded-full shadow-sm":T.preview.primaryColor+" rounded-md"}`})]})]}),o.jsxs("div",{className:"space-y-1",children:[o.jsx("div",{className:`h-2 rounded ${j==="soft-ui"?"bg-gradient-to-r from-slate-700/40 to-slate-500/40":"bg-gray-700/60"}`,style:{width:"70%"}}),o.jsx("div",{className:`h-1.5 rounded ${j==="soft-ui"?"bg-slate-400/40":"bg-gray-500/60"}`,style:{width:"50%"}})]})]})]}),y===j&&o.jsx("div",{className:"flex-shrink-0 ml-4",children:o.jsx("div",{className:`w-6 h-6 rounded-full flex items-center justify-center ${r==="light"?"bg-purple-600":"bg-purple-400"}`,children:o.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]})]},j))})]})]})}),Et&&o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:`w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-2xl shadow-2xl ${r==="light"?"bg-white border border-gray-200":"bg-slate-800 border border-white/20"}`,children:[o.jsx("div",{className:`sticky top-0 px-6 py-4 border-b backdrop-blur-xl ${r==="light"?"bg-white/95 border-gray-200":"bg-slate-800/95 border-white/20"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("h2",{className:`text-xl font-semibold flex items-center ${r==="light"?"text-gray-900":"text-white"}`,children:[o.jsxs("svg",{className:`w-5 h-5 mr-2 ${r==="light"?"text-yellow-600":"text-yellow-400"}`,fill:"currentColor",viewBox:"0 0 20 20",children:[o.jsx("path",{fillRule:"evenodd",d:"M4 2a2 2 0 00-2 2v11a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H4zm0 2h12v11H4V4z",clipRule:"evenodd"}),o.jsx("path",{fillRule:"evenodd",d:"M8 6a2 2 0 11-4 0 2 2 0 014 0zM6 8a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})]}),"Button Colours"]}),o.jsx("button",{onClick:()=>dt(!1),className:`p-2 rounded-xl transition-all duration-200 hover:scale-110 ${r==="light"?"text-gray-600 hover:text-gray-900 hover:bg-gray-100":"text-white/60 hover:text-white hover:bg-white/10"}`,children:o.jsx(st,{className:"h-5 w-5"})})]})}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:`text-sm font-medium ${r==="light"?"text-gray-700":"text-white/80"}`,children:"Next Button"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-xs font-medium ${r==="light"?"text-gray-600":"text-white/70"}`,children:"Background Color"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"color",value:g,onChange:j=>_(j.target.value),className:`w-10 h-10 rounded border cursor-pointer flex-shrink-0 ${r==="light"?"border-gray-300":"border-white/20"}`}),o.jsx("input",{type:"text",value:g,onChange:j=>_(j.target.value),className:`flex-1 px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:border-transparent ${r==="light"?"bg-white border-gray-200 text-gray-900 focus:ring-blue-500":"bg-white/10 border-white/20 text-white focus:ring-blue-400"}`,placeholder:"#3B82F6"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-xs font-medium ${r==="light"?"text-gray-600":"text-white/70"}`,children:"Text Color"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"color",value:k,onChange:j=>S(j.target.value),className:`w-10 h-10 rounded border cursor-pointer flex-shrink-0 ${r==="light"?"border-gray-300":"border-white/20"}`}),o.jsx("input",{type:"text",value:k,onChange:j=>S(j.target.value),className:`flex-1 px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:border-transparent ${r==="light"?"bg-white border-gray-200 text-gray-900 focus:ring-blue-500":"bg-white/10 border-white/20 text-white focus:ring-blue-400"}`,placeholder:"#FFFFFF"})]})]})]})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:`text-sm font-medium ${r==="light"?"text-gray-700":"text-white/80"}`,children:"Previous Button"}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-xs font-medium ${r==="light"?"text-gray-600":"text-white/70"}`,children:"Background Color"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"color",value:N,onChange:j=>E(j.target.value),className:`w-10 h-10 rounded border cursor-pointer flex-shrink-0 ${r==="light"?"border-gray-300":"border-white/20"}`}),o.jsx("input",{type:"text",value:N,onChange:j=>E(j.target.value),className:`flex-1 px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:border-transparent ${r==="light"?"bg-white border-gray-200 text-gray-900 focus:ring-blue-500":"bg-white/10 border-white/20 text-white focus:ring-blue-400"}`,placeholder:"#E5E7EB"})]})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-xs font-medium ${r==="light"?"text-gray-600":"text-white/70"}`,children:"Text Color"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("input",{type:"color",value:O,onChange:j=>D(j.target.value),className:`w-10 h-10 rounded border cursor-pointer flex-shrink-0 ${r==="light"?"border-gray-300":"border-white/20"}`}),o.jsx("input",{type:"text",value:O,onChange:j=>D(j.target.value),className:`flex-1 px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:border-transparent ${r==="light"?"bg-white border-gray-200 text-gray-900 focus:ring-blue-500":"bg-white/10 border-white/20 text-white focus:ring-blue-400"}`,placeholder:"#374151"})]})]})]})]}),o.jsxs("div",{className:`p-4 rounded-lg border ${r==="light"?"bg-gray-50 border-gray-200":"bg-white/5 border-white/10"}`,children:[o.jsx("div",{className:`text-xs mb-3 ${r==="light"?"text-gray-600":"text-white/70"}`,children:"Button Preview:"}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{type:"button",style:{backgroundColor:N,color:O},className:`px-4 py-2 text-sm font-medium transition-colors duration-200 ${y==="soft-ui"?"rounded-full":"rounded"}`,children:"Previous"}),o.jsx("button",{type:"button",style:{backgroundColor:g,color:k},className:`px-4 py-2 text-sm font-medium transition-colors duration-200 ${y==="soft-ui"?"rounded-full":"rounded"}`,children:"Next"})]})]})]})]})}),Ct&&B!==null&&((Te=P[B])==null?void 0:Te.question_type)==="image_selection"&&o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:o.jsxs("div",{className:`relative w-full max-w-lg rounded-2xl shadow-2xl overflow-hidden ${r==="light"?"bg-white":"bg-gradient-to-br from-gray-900 to-gray-800 border border-white/10"}`,children:[o.jsxs("div",{className:`flex items-center justify-between px-6 py-4 border-b ${r==="light"?"border-gray-200 bg-gray-50":"border-white/10 bg-white/5"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`p-2 rounded-lg ${r==="light"?"bg-orange-100":"bg-orange-500/20"}`,children:o.jsx(mh,{className:`w-5 h-5 ${r==="light"?"text-orange-600":"text-orange-400"}`})}),o.jsx("h2",{className:`text-xl font-semibold ${r==="light"?"text-gray-900":"text-white"}`,children:"Layout Settings"})]}),o.jsx("button",{onClick:()=>it(!1),className:`p-2 rounded-lg transition-colors ${r==="light"?"hover:bg-gray-200 text-gray-500":"hover:bg-white/10 text-white/70"}`,children:o.jsx(st,{className:"w-5 h-5"})})]}),o.jsxs("div",{className:"p-6 space-y-6",children:[o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-medium ${r==="light"?"text-gray-700":"text-white/90"}`,children:"Images per row"}),o.jsxs("select",{value:P[B].images_per_row||2,onChange:j=>Ae(B,{...P[B],images_per_row:parseInt(j.target.value)}),className:`w-full px-4 py-3 border rounded-xl text-sm focus:ring-2 focus:border-transparent transition-all duration-200 ${r==="light"?"bg-white border-gray-200 text-gray-900 focus:ring-blue-500":"bg-white/10 border-white/20 text-white focus:ring-blue-400"}`,children:[o.jsx("option",{value:1,className:r==="light"?"bg-white":"bg-gray-800",children:"1 (Full width)"}),o.jsx("option",{value:2,className:r==="light"?"bg-white":"bg-gray-800",children:"2 (Default)"}),o.jsx("option",{value:3,className:r==="light"?"bg-white":"bg-gray-800",children:"3 (Compact)"}),o.jsx("option",{value:4,className:r==="light"?"bg-white":"bg-gray-800",children:"4 (Grid)"})]}),o.jsx("p",{className:`text-xs ${r==="light"?"text-gray-500":"text-white/60"}`,children:"Controls how many image cards display per row. Use fewer for larger cards on mobile."})]}),o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:`block text-sm font-medium ${r==="light"?"text-gray-700":"text-white/90"}`,children:"Crop images to square"}),o.jsxs("select",{value:P[B].crop_images_to_square?"true":"false",onChange:j=>Ae(B,{...P[B],crop_images_to_square:j.target.value==="true"}),className:`w-full px-4 py-3 border rounded-xl text-sm focus:ring-2 focus:border-transparent transition-all duration-200 ${r==="light"?"bg-white border-gray-200 text-gray-900 focus:ring-blue-500":"bg-white/10 border-white/20 text-white focus:ring-blue-400"}`,children:[o.jsx("option",{value:"true",className:r==="light"?"bg-white":"bg-gray-800",children:"Yes (Default)"}),o.jsx("option",{value:"false",className:r==="light"?"bg-white":"bg-gray-800",children:"No - Show full image ratio"})]}),o.jsx("p",{className:`text-xs ${r==="light"?"text-gray-500":"text-white/60"}`,children:'When "No", images display in their original aspect ratio with top alignment.'})]})]}),o.jsx("div",{className:`flex justify-end gap-3 pt-4 border-t \${\r
                theme === 'light' ? 'border-gray-200' : 'border-white/10'\r
              }`,children:o.jsx("button",{onClick:()=>it(!1),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="light"?"bg-gray-100 hover:bg-gray-200 text-gray-700":"bg-white/10 hover:bg-white/20 text-white"}`,children:"Done"})})]})]})}),ar&&M&&o.jsx(A3,{currentStep:M,allSteps:P,stepLogic:lr.get(M.id||"")||null,onSave:j=>{Nr(T=>{const I=new Map(T);return I.set(M.id||"",j),I}),t({type:"success",message:"Logic rules saved successfully"})},onClose:()=>Ie(!1)})]})}function bA(e){if(!e||typeof e!="string"||(e=e.trim(),!/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)))return!1;const[r,n]=e.split("@");if(!r||r.length===0||r.length>80||r.startsWith(".")||r.endsWith(".")||r.includes("..")||!n||n.length===0||n.length>253||n.startsWith(".")||n.endsWith(".")||n.includes("..")||!n.includes("."))return!1;const s=n.split(".");for(const i of s)if(i.length===0||i.length>63||i.startsWith("-")||i.endsWith("-")||!/^[a-zA-Z0-9-]+$/.test(i))return!1;return!(e.includes("..")||e.startsWith(".")||e.endsWith(".")||r.includes("..")||n.includes(".."))}function vA(){var me,Ve,Le,Ct,it,Q,ee,ze,lt,Et,dt,ar,Ie,lr,Nr,zt,cr,Qt,ur,zr,ns,Zt,Qr,Ds,ss,vn,is,wn,Ae,Ms,Os;p.useEffect(()=>{if(window.self!==window.top){const C="odf-embed-min-h-fix";if(!document.getElementById(C)){const $=document.createElement("style");$.id=C,$.innerHTML=".min-h-screen { min-height: auto !important; }",document.head.appendChild($)}}},[]);const e=p.useRef(null),t=({option:C,isSelected:$,onClick:A,isAnimating:L,animationDirection:J,index:U,cropImagesToSquare:X=!0})=>o.jsxs("button",{onClick:A,className:`
          border rounded-lg p-4 text-left hover:shadow-md transition-all duration-200 ease-out flex flex-col h-full
          ${$?"ring-2 ring-blue-500 border-blue-500":"border-gray-200 hover:border-gray-300"}
        `,children:[C.image_url&&o.jsx("div",{className:`
            ${X?"aspect-square":"flex-grow flex items-start"} w-full mb-3 rounded-lg overflow-hidden 
            transition-all duration-200 ease-out
          `,children:o.jsx("img",{src:C.image_url,alt:C.label,className:`w-full ${X?"h-full object-cover":"object-contain"} transition-transform duration-200 hover:scale-105`})}),o.jsxs("div",{className:"flex-shrink-0",children:[o.jsx("div",{className:`
            font-medium text-gray-900 transition-all duration-200
          `,children:C.label}),C.description&&o.jsx("div",{className:`
              text-sm text-gray-500 mt-1 transition-all duration-200
            `,children:C.description})]})]});p.useEffect(()=>{const C=new MutationObserver(()=>{clearTimeout(window.heightUpdateTimeout),window.heightUpdateTimeout=setTimeout(()=>{ne()},100)});C.observe(document.body,{childList:!0,subtree:!0,attributes:!0});const $=()=>ne(),A=document.querySelectorAll("img");return A.forEach(L=>{L.complete||(L.addEventListener("load",$),L.addEventListener("error",$))}),()=>{C.disconnect(),clearTimeout(window.heightUpdateTimeout),A.forEach(L=>{L.removeEventListener("load",$),L.removeEventListener("error",$)})}},[]),kr();const{id:r}=Pc(),[n,s]=p.useState([]),[i,a]=p.useState(""),[l,c]=p.useState(""),[u,d]=p.useState(null),[h,f]=p.useState({primaryButtonColor:"#3B82F6",primaryButtonTextColor:"#FFFFFF",secondaryButtonColor:"#E5E7EB",secondaryButtonTextColor:"#374151"}),[m,v]=p.useState(0),[b,w]=p.useState([0]),[y,x]=p.useState(!0),[g,_]=p.useState(null),[k,S]=p.useState(!1),[,N]=p.useState(null),[E,O]=p.useState("forward"),[D,P]=p.useState({}),[te,B]=p.useState(new Map),[he,Z]=p.useState("generic"),ne=()=>{requestAnimationFrame(()=>{let C=0;if(e.current){C=e.current.offsetHeight;const A=e.current.scrollHeight;C=Math.max(C,A)}else C=document.body.scrollHeight;C=Math.max(C,200);const $=window.innerWidth-document.documentElement.clientWidth;$>0&&(C+=20),C+=20,console.log("[FormEmbed] Sending designerFormHeight:",C,"Scrollbar detected:",$>0),window.parent.postMessage({type:"designerFormHeight",height:C},"*")})};p.useEffect(()=>{ne(),window.addEventListener("resize",ne);const C=setTimeout(()=>{ne()},500),$=()=>ne();window.addEventListener("load",$);let A=0;const L=setInterval(()=>{A<5?(ne(),A++):clearInterval(L)},2e3);return()=>{window.removeEventListener("resize",ne),window.removeEventListener("load",$),clearTimeout(C),clearInterval(L)}},[]),p.useEffect(()=>{const C=setTimeout(()=>{ne();const $=setTimeout(()=>{ne()},300);return()=>clearTimeout($)},200);return()=>clearTimeout(C)},[m,n,D]),p.useEffect(()=>{var $;const C=n[m];(C==null?void 0:C.question_type)==="frames_plan"&&!(($=D[m])!=null&&$.frames_count)&&P(A=>({...A,[m]:{...A[m]||{},frames_count:1,frames:Array(1).fill(null).map((L,J)=>({frame_number:J+1,image_url:"",location_text:"",measurements_text:""}))}}))},[m,n]),p.useEffect(()=>{r&&fe(r)},[r]);const fe=async C=>{try{x(!0),_(null),console.log("Loading form:",C);const{data:$,error:A}=await z.from("forms").select(`
          id,
          name,
          description,
          user_id,
          client_id,
          form_theme,
          primary_button_color,
          primary_button_text_color,
          secondary_button_color,
          secondary_button_text_color,
          clients (
            id,
            name,
            logo_url,
            primary_color,
            client_email,
            email_notifications_enabled
          )
        `).eq("id",C).maybeSingle();if(console.log("Form query result:",{form:$,formError:A}),A){console.error("Form query error:",A),_(`Failed to load form: ${A.message}`);return}if(!$){console.log("No form found with ID:",C),_("Form not found");return}a($.name),c($.description),d($),f({primaryButtonColor:$.primary_button_color||"#3B82F6",primaryButtonTextColor:$.primary_button_text_color||"#FFFFFF",secondaryButtonColor:$.secondary_button_color||"#E5E7EB",secondaryButtonTextColor:$.secondary_button_text_color||"#374151"}),Z($.form_theme||"generic");const{data:L,error:J}=await z.from("form_steps").select(`
          *,
          frames_max_count,
          frames_require_image,
          frames_require_location,
          frames_require_measurements,
          form_options(*)
        `).eq("form_id",C).order("step_order",{ascending:!0});console.log("Steps query result:",{s:L,stepsError:J});const U=L==null?void 0:L.find(W=>W.question_type==="frames_plan");if(U&&(console.log("Frames plan step data:",U),console.log("Frames config:",{frames_max_count:U.frames_max_count,frames_require_image:U.frames_require_image,frames_require_location:U.frames_require_location,frames_require_measurements:U.frames_require_measurements})),J){console.error("Steps query error:",J),_(`Failed to load form steps: ${J.message}`);return}if(!L||L.length===0){console.log("No steps found for form:",C),_("This form has no steps configured");return}const X=L.map(W=>{const ke=(W.form_options||[]).map(_e=>{let M=_e.image_url;return{id:_e.id,label:_e.label,description:_e.description,image_url:M,jump_to_step:_e.jump_to_step,option_order:_e.option_order}}).sort((_e,M)=>_e.option_order-M.option_order);return{id:W.id,title:W.title,description:W.description,question_type:W.question_type,is_required:W.is_required,step_order:W.step_order,max_file_size:W.max_file_size,allowed_file_types:W.allowed_file_types,dimension_type:W.dimension_type,dimension_units:W.dimension_units,scale_type:W.scale_type,scale_min:W.scale_min,scale_max:W.scale_max,images_per_row:W.images_per_row,crop_images_to_square:W.crop_images_to_square??!0,frames_max_count:W.frames_max_count??10,frames_require_image:W.frames_require_image??!0,frames_require_location:W.frames_require_location??!0,frames_require_measurements:W.frames_require_measurements??!1,options:ke}});console.log("Mapped steps:",X),s(X);const{data:ie,error:F}=await z.from("step_logic").select("*").eq("form_id",C);if(F&&F.code!=="PGRST116"&&console.error("Error loading step logic:",F),ie&&ie.length>0){const W=new Map;ie.forEach(ke=>{W.set(ke.step_id,{step_id:ke.step_id,rules:ke.rules||[],default_action:ke.default_action||void 0})}),B(W),console.log("Loaded step logic:",W)}}catch($){console.error("Unexpected error loading form:",$),_("An unexpected error occurred while loading the form")}finally{x(!1)}},R=(C,$)=>{var L;const A=te.get(C);if(!A||A.rules.length===0)return null;for(const J of A.rules){let U=!0;for(const X of J.conditions)if(X.field_type==="option"&&X.option_id!==$.id){U=!1;break}if(U&&J.action.target_step_order){const X=n.findIndex(ie=>ie.step_order===J.action.target_step_order);return X>=0?X:null}}if((L=A.default_action)!=null&&L.action.target_step_order){const J=n.findIndex(U=>U.step_order===A.default_action.action.target_step_order);return J>=0?J:null}return null},re=C=>{P($=>({...$,[m]:{...$[m]||{},option_id:C.id}})),setTimeout(()=>{const $=n[m];if($.id){const A=R($.id,C);if(A!==null){const L=n[A];($==null?void 0:$.question_type)==="image_selection"&&(L==null?void 0:L.question_type)==="image_selection"?(N(m),O("forward"),S(!0),setTimeout(()=>{w(J=>[...J,m]),v(A),setTimeout(()=>S(!1),300)},150)):(w(J=>[...J,m]),v(A));return}}if(C.jump_to_step){const A=n.findIndex(L=>L.step_order===C.jump_to_step);if(A>=0){const L=n[A];($==null?void 0:$.question_type)==="image_selection"&&(L==null?void 0:L.question_type)==="image_selection"?(N(m),O("forward"),S(!0),setTimeout(()=>{w(J=>[...J,m]),v(A),setTimeout(()=>S(!1),300)},150)):(w(J=>[...J,m]),v(A))}return}if(m<n.length-1){w(J=>[...J,m]);const A=n[m],L=n[m+1];(A==null?void 0:A.question_type)==="image_selection"&&(L==null?void 0:L.question_type)==="image_selection"?(N(m),O("forward"),S(!0),setTimeout(()=>{v(m+1),setTimeout(()=>S(!1),300)},150)):v(m+1)}},300)},ae=C=>{const $=n[m];if(!$)return;const A=($.max_file_size||5)*1024*1024;if(C.size>A){alert(`File size must be less than ${$.max_file_size||5}MB`);return}if($.allowed_file_types&&$.allowed_file_types.length>0&&!$.allowed_file_types.some(J=>J==="image/*"?C.type.startsWith("image/"):J==="text/*"?C.type.startsWith("text/"):C.type===J)){alert("File type not allowed");return}P(L=>({...L,[m]:{...L[m]||{},file:C,answer_text:C.name}}))},V=async(C,$,A)=>{var L,J,U;console.log(" [WEBHOOK] Starting webhook send process..."),console.log(" [WEBHOOK] Response ID:",C),console.log(" [WEBHOOK] Answers count:",$.length),console.log(" [WEBHOOK] Contact data:",A);try{if(!u){console.log(" [WEBHOOK] No form data available for webhook");return}console.log(" [WEBHOOK] Form data found:",{formId:u.id,formName:u.name,clientId:u.client_id}),console.log(" [WEBHOOK] Fetching client webhook URL...");const{data:X,error:ie}=await z.from("clients").select("webhook_url").eq("id",u.client_id).maybeSingle();if(console.log(" [WEBHOOK] Client query result:",{client:X,clientError:ie}),ie||!X||!X.webhook_url){console.log(" [WEBHOOK] Client webhook not configured:",{error:ie==null?void 0:ie.message,hasClient:!!X,webhookUrl:X==null?void 0:X.webhook_url});return}console.log(" [WEBHOOK] Client webhook URL found:",X.webhook_url),console.log(" [WEBHOOK] Preparing structured answers...");const F=$.map(G=>{var Jm;const xe=n.find(Ls=>Ls.id===G.step_id),Tt={question:(xe==null?void 0:xe.title)||"Unknown",question_type:(xe==null?void 0:xe.question_type)||"unknown",step_order:(xe==null?void 0:xe.step_order)||0,is_required:(xe==null?void 0:xe.is_required)||!1};if(G.answer_text&&(Tt.answer_text=G.answer_text),G.selected_option_id){Tt.selected_option=G.selected_option_id;const Ls=(Jm=xe==null?void 0:xe.options)==null?void 0:Jm.find(U_=>U_.id===G.selected_option_id);Ls&&(Tt.selected_option_label=Ls.label,Ls.image_url&&(Tt.selected_option_image=Ls.image_url))}return G.file_url&&(Tt.file_url=G.file_url,Tt.file_name=G.file_name,Tt.file_size=G.file_size),G.scale_rating&&(Tt.rating=G.scale_rating,Tt.scale_type=(xe==null?void 0:xe.scale_type)||"number",Tt.scale_min=(xe==null?void 0:xe.scale_min)||1,Tt.scale_max=(xe==null?void 0:xe.scale_max)||10),(G.width||G.height||G.depth)&&(Tt.dimensions={width:G.width,height:G.height,depth:G.depth,units:G.units,dimension_type:(xe==null?void 0:xe.dimension_type)||"2d"}),(xe==null?void 0:xe.question_type)==="frames_plan"&&G.frames_count&&(Tt.frames_count=G.frames_count),Tt}),{data:W,error:ke}=await z.from("response_frames").select("*").eq("response_id",C).order("frame_number",{ascending:!0});ke&&console.error(" [WEBHOOK] Error fetching frames data:",ke),console.log(" [WEBHOOK] Frames data:",(W==null?void 0:W.length)||0,"frames found");const{data:_e,error:M}=await z.from("responses").select("contact_name, contact_email, contact_phone, contact_postcode, submitted_at").eq("id",C).single();M?console.error(" [WEBHOOK] Error fetching response details:",M):(console.log(" [WEBHOOK] Response details fetched:",_e),Object.assign(A,_e));const ge=(W||[]).map(G=>{const xe=n.find(Tt=>Tt.id===G.step_id);return{question:(xe==null?void 0:xe.title)||"Frame Question",question_type:"frames_plan",step_order:(xe==null?void 0:xe.step_order)||0,is_required:(xe==null?void 0:xe.is_required)||!1,frame_number:G.frame_number,frame_data:{image_url:G.image_url,location_text:G.location_text,measurements_text:G.measurements_text}}}),se=[...F,...ge];console.log(" [WEBHOOK] Total structured answers:",se.length);const Me=F.filter(G=>G.question_type==="text_input"&&G.answer_text).map(G=>G.answer_text),Te=F.filter(G=>G.question_type==="multiple_choice"&&G.selected_option_label).map(G=>`${G.question}  ${G.selected_option_label}`),j=F.filter(G=>G.question_type==="image_selection"&&G.selected_option_label).map(G=>({question:G.question,selection:G.selected_option_label,image_url:G.selected_option_image})),T=F.filter(G=>G.question_type==="file_upload"&&G.file_url).map(G=>G.file_size!==void 0?`${G.file_name} (${(G.file_size/1024/1024).toFixed(1)} MB) - ${G.file_url}`:`${G.file_name} - ${G.file_url}`),I=F.filter(G=>G.question_type==="dimensions"&&G.dimensions).map(G=>{const xe=G.dimensions;return xe?xe.dimension_type==="3d"?`${G.question}: ${xe.width??""}${xe.units??""}  ${xe.height??""}${xe.units??""}  ${xe.depth??""}${xe.units??""}`:`${G.question}: ${xe.width??""}${xe.units??""}  ${xe.height??""}${xe.units??""}`:""}),Y=F.filter(G=>G.question_type==="opinion_scale"&&G.rating).map(G=>`${G.question}: ${G.rating}/${G.scale_max} ${G.scale_type}`),de=F.filter(G=>G.file_url).map(G=>G.file_url),Ce=F.filter(G=>G.file_name).map(G=>G.file_name),Ge=ge.map(G=>({question:G.question,frame_number:G.frame_number,image_url:G.frame_data.image_url,location_text:G.frame_data.location_text,measurements_text:G.frame_data.measurements_text})),je=n.length,Fe=F.length,_t=Math.round(Fe/je*100);console.log(" [WEBHOOK] Completion metrics:",{totalQuestions:je,answeredQuestions:Fe,completionPercentage:`${_t}%`});const Zr={response_id:C,form_id:u.id,form_name:u.name,internal_name:u.internal_name||null,client_id:((L=u.clients)==null?void 0:L.id)||null,client_name:((J=u.clients)==null?void 0:J.name)||null,submitted_at:new Date().toISOString(),contact__name:A.contact_name||null,contact__email:A.contact_email||null,contact__phone:A.contact_phone||null,contact__postcode:A.contact_postcode||null,contact__preferred_contact:A.preferred_contact||null,contact__project_details:A.project_details||null,answers:JSON.stringify(se),answers__text_responses:Me,answers__multiple_choice:Te,answers__image_selections:j.map(G=>`${G.question}  ${G.selection}`),answers__file_uploads:T,answers__dimensions:I,answers__opinion_ratings:Y,answers__frames:Ge,file_attachments:de,file_names:Ce,total_questions_answered:Fe,completion_percentage:_t};console.log(" [WEBHOOK] Webhook payload prepared:",{responseId:C,formId:u.id,clientName:(U=u.clients)==null?void 0:U.name,answersCount:se.length,framesCount:Ge.length,hasFiles:de.length>0,contactData:{name:A.contact_name,email:A.contact_email,phone:A.contact_phone,postcode:A.contact_postcode,preferred_contact:A.preferred_contact,project_details:A.project_details}}),console.log(" [WEBHOOK] Full webhook payload being sent:",JSON.stringify(Zr,null,2)),console.log(" [WEBHOOK] Sending webhook via Supabase Edge Function..."),console.log(" [WEBHOOK] Target URL:",X.webhook_url);const Sr=await fetch("https://bahloynyhjgmdndqabhu.supabase.co/functions/v1/send-webhook",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJhaGxveW55aGpnbWRuZHFhYmh1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU3NjM0ODAsImV4cCI6MjA3MTMzOTQ4MH0.SYTUzUkXfjHO-odCTKVDHiBH6AqQmJLf2qoiiD8ecZ0"},body:JSON.stringify({webhook_url:X.webhook_url,payload:Zr})});if(console.log(" [WEBHOOK] Edge Function response status:",Sr.status),!Sr.ok){const G=await Sr.text();throw console.error(" [WEBHOOK] Edge Function error response:",G),new Error(`Webhook failed with status: ${Sr.status}`)}const z_=await Sr.json();console.log(" [WEBHOOK] Edge Function success response:",z_),console.log(" [WEBHOOK] Updating database to mark webhook as sent...");const{error:Gm}=await z.from("responses").update({webhook_sent:!0}).eq("id",C);Gm?console.error(" [WEBHOOK] Database update error:",Gm):console.log(" [WEBHOOK] Database updated successfully"),console.log(" [WEBHOOK] Webhook process completed successfully!"),console.log(" [WEBHOOK] Updating database to mark webhook as sent...");const{error:Ym}=await z.from("responses").update({webhook_sent:!0}).eq("id",C);Ym?console.error(" [WEBHOOK] Database update error:",Ym):console.log(" [WEBHOOK] Database updated successfully"),console.log(" [WEBHOOK] Webhook process completed successfully!")}catch(X){throw console.error(" [WEBHOOK] Webhook error:",X),X}},pe=async C=>{var $;console.log(" [EMAIL] Starting email notification for response:",C.id);try{if(!u||!u.clients){console.log(" [EMAIL] No form data or client info available");return}if(console.log(" [EMAIL] Client info:",{clientName:u.clients.name,clientEmail:u.clients.client_email,emailNotificationsEnabled:u.clients.email_notifications_enabled}),!u.clients.email_notifications_enabled){console.log(" [EMAIL] Client has email notifications disabled");return}if(!u.clients.client_email){console.log(" [EMAIL] Client does not have email configured");return}console.log(" [EMAIL] Fetching Brevo API key from user settings...");let A=null;try{console.log(" [EMAIL] Querying user_settings for Brevo API key...");const{data:se,error:Me}=await z.from("user_settings").select("brevo_api_key").eq("user_id",u.user_id).maybeSingle();console.log(" [EMAIL] Brevo API key query result:",{found:!!se,error:Me==null?void 0:Me.message,hasApiKey:!!(se!=null&&se.brevo_api_key)}),Me&&console.warn(" [EMAIL] Could not fetch Brevo API key:",Me.message),A=(se==null?void 0:se.brevo_api_key)||null,console.log(" [EMAIL] Brevo API key status:",A?"Found":"Not found")}catch(se){console.error(" [EMAIL] Error fetching Brevo API key:",se)}if(A||(console.warn("Brevo API key not configured in user settings, trying environment variable as fallback"),A=void 0),!A){console.warn("Brevo API key not configured in user settings or environment, skipping email notification");return}console.log("Sending email notification to:",u.clients.client_email);let L=[];try{const{data:se}=await z.from("clients").select("additional_emails").eq("id",u.clients.id).single();se!=null&&se.additional_emails&&Array.isArray(se.additional_emails)&&(L=se.additional_emails.filter(Me=>Me&&Me.trim()&&Me!==u.clients.client_email&&bA(Me.trim()))),console.log("Additional emails found:",L)}catch(se){console.warn("Could not fetch additional emails:",se)}const J={...C,answers:[],frames_data:[]};J.form_name=u.name,J.client_name=($=u.clients)==null?void 0:$.name,console.log(" [EMAIL] Building email data for response:",C.id);const{data:U,error:X}=await z.from("response_answers").select(`
          answer_text,
          selected_option_id,
          file_url,
          file_name,
          file_size,
          width,
          height,
          depth,
          units,
          scale_rating,
          frames_count,
          step_id
        `).eq("response_id",C.id);if(X)console.error("Error fetching answers for email:",X),J.answers=[];else{const se=(U||[]).map(Me=>{const Te=n.find(T=>T.id===Me.step_id),j={...Me,question_title:(Te==null?void 0:Te.title)||"Unknown Question",question_type:(Te==null?void 0:Te.question_type)||"unknown",step_order:(Te==null?void 0:Te.step_order)||0,options:(Te==null?void 0:Te.options)||[]};if(Me.selected_option_id&&(Te!=null&&Te.options)){const T=Te.options.find(I=>I.id===Me.selected_option_id);T&&(j.selected_option_label=T.label,j.selected_option_image=T.image_url)}return j}).sort((Me,Te)=>Me.step_order-Te.step_order);J.answers=se,console.log(" [EMAIL] Enriched answers prepared:",se.length,"answers")}const{data:ie,error:F}=await z.from("response_frames").select("*").eq("response_id",C.id).order("frame_number",{ascending:!0});F?(console.error("Error fetching frames for email:",F),J.frames_data=[]):(J.frames_data=ie||[],console.log(" [EMAIL] Frames data prepared:",(ie==null?void 0:ie.length)||0,"frames"));const W=ye(J),ke=ve(J),_e=[];u.clients.client_email&&_e.push({email:u.clients.client_email,name:u.clients.name||"Client"}),L.forEach(se=>{se&&se.trim()&&_e.push({email:se.trim(),name:u.clients.name||"Client"})}),console.log(" [EMAIL] Recipients list:",_e);const M={sender:{name:"Online Designer - Advertomedia",email:"designer@advertomedia.co.uk"},to:_e,subject:`New Response Received - ${i}`,htmlContent:W,textContent:ke};console.log(" [EMAIL] Email payload prepared:",{subject:M.subject,recipientCount:_e.length,hasHtmlContent:!!W,hasTextContent:!!ke}),console.log(" [EMAIL] Sending email via Brevo API...");const ge=await fetch("https://api.brevo.com/v3/smtp/email",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","api-key":A},body:JSON.stringify(M)});if(console.log(" [EMAIL] Brevo API response status:",ge.status),ge.ok)console.log(` [EMAIL] Client email notification sent successfully to ${_e.length} recipient${_e.length>1?"s":""}`);else{const se=await ge.text();console.error(" [EMAIL] Brevo API error:",ge.status,se)}}catch(A){throw console.error("Email notification error:",A),A}},ye=C=>{var ie;const $=F=>new Date(F).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),A=F=>{var ke,_e;let W="";switch(F.question_type){case"text_input":case"text_area":W=F.answer_text||"No response";break;case"multiple_choice":if(F.selected_option_label)W=F.selected_option_label;else{const ge=(ke=F.options)==null?void 0:ke.find(se=>se.id===F.selected_option_id);W=(ge==null?void 0:ge.label)||F.answer_text||"No selection"}break;case"image_selection":if(F.selected_option_label)W=`
              <div style="margin: 10px 0;">
                ${F.selected_option_image?`<img src="${F.selected_option_image}" alt="${F.selected_option_label}" style="max-width: 200px; max-height: 150px; border-radius: 8px; border: 2px solid #e5e7eb;">`:""}
                <p style="margin: 5px 0; font-weight: 600;">${F.selected_option_label}</p>
              </div>
            `;else{const ge=(_e=F.options)==null?void 0:_e.find(se=>se.id===F.selected_option_id);ge?W=`
                <div style="margin: 10px 0;">
                  <img src="${ge.image_url}" alt="${ge.label}" style="max-width: 200px; max-height: 150px; border-radius: 8px; border: 2px solid #e5e7eb;">
                  <p style="margin: 5px 0; font-weight: 600;">${ge.label}</p>
                </div>
              `:W="No image selected"}break;case"file_upload":if(F.file_url&&F.file_name){const ge=F.file_size?Math.round(F.file_size/1024):"Unknown size";W=`
              <div style="display: inline-block; padding: 10px 15px; background-color: #f3f4f6; border-radius: 8px; border-left: 4px solid #3b82f6;">
                <a href="${F.file_url}" style="color: #3b82f6; text-decoration: none; font-weight: 600;">
                   ${F.file_name}
                </a>
                <p style="margin: 5px 0 0 0; font-size: 12px; color: #6b7280;">${ge} KB</p>
              </div>
            `}else W="No file uploaded";break;case"dimensions":const M=[];F.width&&M.push(`Width: ${F.width}${F.units||""}`),F.height&&M.push(`Height: ${F.height}${F.units||""}`),F.depth&&M.push(`Depth: ${F.depth}${F.units||""}`),W=M.length>0?M.join("  "):"No dimensions provided";break;case"opinion_scale":if(F.scale_rating!==null){const ge=Math.max(0,Math.min(5,F.scale_rating));W=`${"".repeat(ge)+"".repeat(5-ge)} (${F.scale_rating}/5)`}else W="No rating provided";break;case"frames_plan":F.frames_count?W=`Requested ${F.frames_count} frame${F.frames_count===1?"":"s"}`:W="No frame count specified";break;default:W=F.answer_text||"No response"}return W},L=C.answers.map((F,W)=>`
      <div style="margin-bottom: 25px; padding: 20px; background-color: #f9fafb; border-radius: 10px; border-left: 4px solid #3b82f6;">
        <h3 style="margin: 0 0 15px 0; color: #1f2937; font-size: 16px; font-weight: 600;">
          ${W+1}. ${F.question_title}
        </h3>
        <div style="color: #374151;">
          ${A(F)}
        </div>
      </div>
    `).join(""),J=[];C.contact_name&&J.push(`<strong>Name:</strong> ${C.contact_name}`),C.contact_email&&J.push(`<strong>Email:</strong> <a href="mailto:${C.contact_email}" style="color: #3b82f6;">${C.contact_email}</a>`),C.contact_phone&&J.push(`<strong>Phone:</strong> <a href="tel:${C.contact_phone}" style="color: #3b82f6;">${C.contact_phone}</a>`),C.contact_postcode&&J.push(`<strong>Postcode:</strong> ${C.contact_postcode}`),C.preferred_contact&&J.push(`<strong>Preferred Contact:</strong> ${C.preferred_contact}`),C.project_details&&J.push(`<strong>Project Details:</strong> ${C.project_details}`);const U=J.length>0?`
      <div style="margin: 30px 0; padding: 20px; background-color: #ecfdf5; border-radius: 10px; border-left: 4px solid #10b981;">
        <h2 style="margin: 0 0 15px 0; color: #065f46; font-size: 18px;"> Contact Information</h2>
        <div style="color: #047857; line-height: 1.6;">
          ${J.join("<br>")}
        </div>
      </div>
    `:"";console.log(" [EMAIL] Generating frames HTML:",{hasFramesData:!!C.frames_data,framesDataLength:((ie=C.frames_data)==null?void 0:ie.length)||0,framesData:C.frames_data}),C.frames_data&&C.frames_data.length>0&&C.frames_data.forEach((F,W)=>{console.log(` [EMAIL] Frame ${W+1} data:`,{frame_number:F.frame_number,image_url:F.image_url,location_text:F.location_text,measurements_text:F.measurements_text,hasImageUrl:!!F.image_url})});const X=C.frames_data&&C.frames_data.length>0?`
      <div style="margin: 30px 0; padding: 20px; background-color: #fef3c7; border-radius: 10px; border-left: 4px solid #f59e0b;">
        <h2 style="margin: 0 0 15px 0; color: #92400e; font-size: 18px;"> Frame Data</h2>
        ${C.frames_data.map(F=>`
          <div style="margin-bottom: 15px; padding: 15px; background-color: white; border-radius: 8px;">
            <h4 style="margin: 0 0 10px 0; color: #92400e;">Frame ${F.frame_number}</h4>
            ${F.image_url?`<img src="${F.image_url}" alt="Frame ${F.frame_number}" style="max-width: 200px; max-height: 150px; border-radius: 6px; margin-bottom: 10px;">`:'<p style="color: #ef4444;">No image uploaded</p>'}
            ${F.location_text?`<p><strong>Location:</strong> ${F.location_text}</p>`:""}
            ${F.measurements_text?`<p><strong>Measurements:</strong> ${F.measurements_text}</p>`:""}
          </div>
        `).join("")}
      </div>
    `:"";return`
      <!DOCTYPE html>
      <html>
      <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>New Form Response - ${C.form_name}</title>
      </head>
      <body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; line-height: 1.6; color: #333;">
        <div style="max-width: 600px; margin: 0 auto; padding: 20px; background-color: #ffffff;">
          
          <!-- Header -->
          <div style="text-align: center; margin-bottom: 30px; padding: 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 15px; color: white;">
            <h1 style="margin: 0 0 10px 0; font-size: 24px; font-weight: 700;"> New Form Response!</h1>
            <p style="margin: 0; font-size: 16px; opacity: 0.9;">You've received a new submission</p>
          </div>

          <!-- Form Details -->
          <div style="margin-bottom: 30px; padding: 20px; background-color: #f8fafc; border-radius: 10px; border-left: 4px solid #6366f1;">
            <h2 style="margin: 0 0 15px 0; color: #4338ca; font-size: 18px;"> Form Details</h2>
            <p style="margin: 5px 0; color: #1f2937;"><strong>Form Name:</strong> ${C.form_name}</p>
            <p style="margin: 5px 0; color: #1f2937;"><strong>Client:</strong> ${C.client_name}</p>
            <p style="margin: 5px 0; color: #1f2937;"><strong>Submitted:</strong> ${$(C.submitted_at)}</p>
          </div>

          <!-- Contact Information -->
          ${U}

          <!-- Responses -->
          <div style="margin-bottom: 30px;">
            <h2 style="margin: 0 0 20px 0; color: #1f2937; font-size: 20px; border-bottom: 2px solid #e5e7eb; padding-bottom: 10px;">
               Form Responses
            </h2>
            ${L}
          </div>

          <!-- Frames Data -->
          ${X}

          <!-- View All Responses Button -->
          <div style="text-align: center; margin: 30px 0;">
            <a href="https://designer.advertomedia.co.uk/responses" 
               style="display: inline-block; padding: 15px 30px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; text-decoration: none; border-radius: 25px; font-weight: 600; font-size: 16px; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);">
               View All Responses
            </a>
          </div>

          <!-- Footer -->
          <div style="margin-top: 40px; padding: 20px; background-color: #f3f4f6; border-radius: 10px; text-align: center; color: #6b7280; font-size: 14px;">
            <p style="margin: 0 0 10px 0;">This email was sent automatically by Online Designer</p>
            <p style="margin: 0;">
              <a href="https://designer.advertomedia.co.uk" style="color: #3b82f6; text-decoration: none;">designer.advertomedia.co.uk</a> | 
              <a href="mailto:designer@advertomedia.co.uk" style="color: #3b82f6; text-decoration: none;">designer@advertomedia.co.uk</a>
            </p>
          </div>
          
        </div>
      </body>
      </html>
    `},ve=C=>{const $=L=>new Date(L).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});let A=`NEW FORM RESPONSE RECEIVED!

`;return A+=`Form: ${C.form_name}
`,A+=`Client: ${C.client_name}
`,A+=`Submitted: ${$(C.submitted_at)}

`,(C.contact_name||C.contact_email||C.contact_phone||C.contact_postcode||C.preferred_contact||C.project_details)&&(A+=`CONTACT INFORMATION:
`,C.contact_name&&(A+=`Name: ${C.contact_name}
`),C.contact_email&&(A+=`Email: ${C.contact_email}
`),C.contact_phone&&(A+=`Phone: ${C.contact_phone}
`),C.contact_postcode&&(A+=`Postcode: ${C.contact_postcode}
`),C.preferred_contact&&(A+=`Preferred Contact Method: ${C.preferred_contact}
`),C.project_details&&(A+=`Project Details: ${C.project_details}
`),A+=`
`),A+=`RESPONSES:
`,C.answers.forEach((L,J)=>{var X;A+=`${J+1}. ${L.question_title}
`;let U="";switch(L.question_type){case"text_input":case"text_area":U=L.answer_text||"No response";break;case"multiple_choice":if(L.selected_option_label)U=L.selected_option_label;else{const F=(X=L.options)==null?void 0:X.find(W=>W.id===L.selected_option_id);U=(F==null?void 0:F.label)||L.answer_text||"No selection"}break;case"file_upload":L.file_url&&L.file_name?U=`File: ${L.file_name} (${L.file_url})`:U="No file uploaded";break;case"dimensions":const ie=[];L.width&&ie.push(`Width: ${L.width}${L.units||""}`),L.height&&ie.push(`Height: ${L.height}${L.units||""}`),L.depth&&ie.push(`Depth: ${L.depth}${L.units||""}`),U=ie.length>0?ie.join("  "):"No dimensions provided";break;case"opinion_scale":U=L.scale_rating!==null?`Rating: ${L.scale_rating}/5`:"No rating provided";break;default:U=L.answer_text||"No response"}A+=`   ${U}

`}),C.frames_data&&C.frames_data.length>0&&(A+=`FRAME DATA:
`,C.frames_data.forEach(L=>{A+=`Frame ${L.frame_number}:
`,L.location_text&&(A+=`  Location: ${L.location_text}
`),L.measurements_text&&(A+=`  Measurements: ${L.measurements_text}
`),L.image_url&&(A+=`  Image: ${L.image_url}
`),A+=`
`})),A+=`View all responses: https://designer.advertomedia.co.uk/responses

`,A+=`---
This email was sent automatically by Online Designer
`,A+="designer.advertomedia.co.uk | designer@advertomedia.co.uk",A},Se=async C=>{C&&(C.preventDefault(),C.stopPropagation());const $=n[m];if(!$)return;console.log(" [FORM] Navigation triggered:",{currentStep:m+1,totalSteps:n.length,stepType:$.question_type,isLastStep:m===n.length-1});const A=D[m];if($.is_required){if($.question_type==="frames_plan"){const U=(A==null?void 0:A.frames_count)||1,X=(A==null?void 0:A.frames)||[],ie=[];for(let F=0;F<U;F++){const W=X[F]||{},ke=[];($.frames_require_image??!0)&&!W.image_url&&ke.push("Image"),($.frames_require_location??!0)&&!(W.location_text||"").trim()&&ke.push("Location"),ke.length>0&&ie.push(`Frame ${F+1}: ${ke.join(", ")} required`)}if(ie.length>0){alert(`Please complete the required fields before continuing:

${ie.map(F=>` ${F}`).join(`
`)}`);return}}else if($.question_type==="dimensions"){const U=A,X=[];if((!(U!=null&&U.width)||U.width==="")&&X.push("Width"),(!(U!=null&&U.height)||U.height==="")&&X.push("Height"),(U==null?void 0:U.dimension_type)==="3d"&&(!(U!=null&&U.depth)||U.depth==="")&&X.push("Depth"),X.length>0){alert(`Please provide the following required measurements:

${X.map(ie=>` ${ie}`).join(`
`)}`);return}}else if(!A||!A.option_id&&!A.answer_text&&!A.file&&!A.contact_name&&!A.contact_email){alert("Please answer this step before continuing");return}}if(m===n.length-1){console.log(" [FORM] Final step reached - starting form submission process..."),console.log(" [FORM] Form data:",{formId:r,formName:i,clientId:u==null?void 0:u.client_id}),console.log(" [FORM] Responses to submit:",D);let U={};const X=D[m];X&&(U={contact_name:X.contact_name||null,contact_email:X.contact_email||null,contact_phone:X.contact_phone||null,contact_postcode:X.contact_postcode||null,preferred_contact:X.preferred_contact||null,project_details:X.project_details||null}),console.log(" [FORM] Contact data extracted:",U),console.log(" [FORM] Creating response record in database...");let ie={form_id:r,...U};console.log(" [FORM] Inserting response data:",ie);let{data:F,error:W}=await z.from("responses").insert([ie]).select().single();if(console.log(" [FORM] Insert result:",{inserted:F,error:W}),W&&W.message.includes("preferred_contact")){console.log(" [FORM] preferred_contact column missing, retrying with basic fields only"),ie={form_id:r,contact_name:U.contact_name,contact_email:U.contact_email,contact_phone:U.contact_phone,contact_postcode:U.contact_postcode};const ge=await z.from("responses").insert([ie]).select().single();F=ge.data,W=ge.error}if(W||!F){console.error(" [FORM] Error creating response:",W),alert("Submission failed");return}if(W||!F){console.error(" [FORM] Error creating response:",W),alert("Submission failed");return}console.log(" [FORM] Response record created:",{responseId:F.id,submitted_at:F.submitted_at});const ke=F.id,_e=[],M=[];for(const[ge,se]of Object.entries(D)){const Me=Number(ge),Te=n[Me];if(!Te)continue;let j=null,T=null,I=null;if(se.file)try{const Y=`responses/${ke}/${Te.id}/${Date.now()}-${se.file.name}`,{error:de}=await z.storage.from("form-assets").upload(Y,se.file);if(de)console.error("File upload error:",de),alert("File upload failed, but form will be submitted without the file");else{const{data:Ce}=z.storage.from("form-assets").getPublicUrl(Y);j=Ce.publicUrl,T=se.file.name,I=se.file.size}}catch(Y){console.error("File upload error:",Y),alert("File upload failed, but form will be submitted without the file")}if(_e.push({response_id:ke,step_id:Te.id,answer_text:se.answer_text??null,selected_option_id:se.option_id??null,file_url:j,file_name:T,file_size:I,width:se.width?parseFloat(se.width):null,height:se.height?parseFloat(se.height):null,depth:se.depth?parseFloat(se.depth):null,units:se.units??null,scale_rating:se.scale_rating??null,frames_count:Te.question_type==="frames_plan"?(se==null?void 0:se.frames_count)??null:null}),Te.question_type==="frames_plan"){const Y=(se==null?void 0:se.frames)||[];console.log(" [FRAMES] Collecting frames for step:",Te.title,"frames array:",Y),Y.forEach((de,Ce)=>{de&&(de.image_url||de.location_text||de.measurements_text)&&(console.log(" [FRAMES] Adding frame data for frame",Ce+1,":",de),M.push({response_id:ke,step_id:Te.id,frame_number:de.frame_number??Ce+1,image_url:de.image_url??null,location_text:de.location_text??null,measurements_text:de.measurements_text??null}))})}}if(_e.length>0){const{error:ge}=await z.from("response_answers").insert(_e);ge&&console.error("Error inserting answers",ge)}if(M.length>0){console.log(" [FRAMES] Inserting frames data:",M);const{error:ge}=await z.from("response_frames").insert(M);ge?console.error(" [FRAMES] Error inserting response_frames:",ge):console.log(" [FRAMES] Frames data inserted successfully")}else console.log(" [FRAMES] No frames data to insert");console.log(" [WEBHOOK] Waiting briefly for data persistence..."),await new Promise(ge=>setTimeout(ge,1e3)),console.log(" [WEBHOOK] Sending webhook after data persistence delay...");try{await V(ke,_e,U),console.log(" [WEBHOOK] Webhook sent successfully")}catch(ge){console.error(" [WEBHOOK] Webhook failed:",ge)}console.log(" [EMAIL] Starting client email notification process...");try{await pe(F),console.log(" [EMAIL] Client email notification completed")}catch(ge){console.error(" [EMAIL] Email notification failed:",ge)}console.log(" [FORM] Form submission completed successfully!"),console.log(" [FORM] Response ID:",ke),console.log(" [FORM] View responses at: https://designer.advertomedia.co.uk/responses"),v(m+1);return}w(U=>[...U,m]);const L=n[m],J=n[m+1];(L==null?void 0:L.question_type)==="image_selection"&&(J==null?void 0:J.question_type)==="image_selection"?(N(m),O("forward"),S(!0),setTimeout(()=>{v(m+1),setTimeout(()=>S(!1),300)},150)):v(m+1)},be=C=>{if(C&&(C.preventDefault(),C.stopPropagation()),b.length>1){const $=[...b];$.pop();const A=$[$.length-1];w($);const L=n[m],J=n[A];(L==null?void 0:L.question_type)==="image_selection"&&(J==null?void 0:J.question_type)==="image_selection"?(N(m),O("backward"),S(!0),setTimeout(()=>{v(A),setTimeout(()=>S(!1),300)},150)):v(A)}else v(Math.max(0,m-1));setTimeout(()=>{e.current&&e.current.focus({preventScroll:!0})},100)},K=Ih[he]||Ih.generic;if(y)return o.jsx("div",{className:`${K.styles.background} flex items-center justify-center`,children:o.jsxs("div",{className:`${K.styles.card} w-full text-center`,children:[o.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),o.jsx("h2",{className:"text-xl font-semibold",children:"Loading form..."}),o.jsx("p",{className:K.styles.text.body,children:"Please wait while we load your form."})]})});if(g)return o.jsx("div",{className:`${K.styles.background} flex items-center justify-center`,children:o.jsxs("div",{className:`${K.styles.card} w-full text-center`,children:[o.jsx("div",{className:"text-red-500 text-4xl mb-4",children:""}),o.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"Error Loading Form"}),o.jsx("p",{className:`${K.styles.text.body} mb-4`,children:g}),o.jsx("button",{onClick:()=>r&&fe(r),style:{backgroundColor:h.primaryButtonColor,color:h.primaryButtonTextColor},className:`${K.styles.button.primary} hover:opacity-90 transition-all duration-200`,children:"Try Again"})]})});if(!n||n.length===0)return o.jsx("div",{className:`${K.styles.background} flex items-center justify-center`,children:o.jsxs("div",{className:`${K.styles.card} w-full text-center`,children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Form not available"}),o.jsx("p",{className:K.styles.text.body,children:"This form isn't published or contains no steps."})]})});if(m>=n.length)return o.jsx("div",{className:`${K.styles.background} flex items-center justify-center`,children:o.jsxs("div",{className:`${K.styles.card} w-full text-center`,children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Thank you"}),o.jsx("p",{className:K.styles.text.body,children:"Your submission has been received."})]})});const q=n[m],De=Math.round(m/n.length*100);return o.jsxs("div",{ref:e,className:`${K.styles.background}`,style:{position:"relative",height:"auto",minHeight:"fit-content",paddingBottom:"0"},children:[he==="soft-ui"&&o.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",style:{height:"fit-content",paddingBottom:"0"},children:[o.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-blue-400/20 to-purple-600/20 rounded-full blur-3xl"}),o.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-tr from-indigo-400/20 to-pink-600/20 rounded-full blur-3xl"})]}),o.jsx("div",{className:K.styles.container,style:{position:"relative",zIndex:10,paddingBottom:"0",width:"100%",maxWidth:"100%"},children:o.jsxs("div",{className:K.styles.card,style:{marginBottom:"0",background:"none"},children:[(u==null?void 0:u.clients)&&o.jsxs("div",{className:"text-center mb-6 pb-4 border-b border-gray-200",children:[(me=u==null?void 0:u.clients)!=null&&me.logo_url?o.jsx("div",{className:"flex justify-center mb-3",children:o.jsx("img",{src:(Ve=u==null?void 0:u.clients)==null?void 0:Ve.logo_url,alt:`${((Le=u==null?void 0:u.clients)==null?void 0:Le.name)??""} logo`,className:"h-12 w-auto object-contain"})}):o.jsx("div",{className:"flex justify-center mb-3",children:o.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded flex items-center justify-center",children:o.jsx("svg",{className:"w-7 h-7 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),o.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:(Ct=u==null?void 0:u.clients)==null?void 0:Ct.name}),l&&o.jsx("p",{className:"text-sm text-gray-600",children:l})]}),o.jsx("h1",{className:K.styles.text.heading,children:i}),o.jsx("p",{className:K.styles.text.body,children:q.title}),q.description&&o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2 mb-4",children:q.description}),o.jsx("div",{className:K.styles.progress,children:o.jsx("div",{className:"progress-bar h-full rounded-full transition-all duration-500",style:{width:`${De}%`,background:he==="soft-ui"?"linear-gradient(90deg, #6366f1 0%, #8b5cf6 50%, #a855f7 100%)":h.primaryButtonColor}})}),o.jsxs("div",{className:"text-sm text-slate-500 text-right mt-1",children:[De,"%"]}),q.question_type==="contact_fields"?o.jsx("div",{className:"mt-6",children:o.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[o.jsxs("div",{className:"text-center mb-6",children:[o.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Get Your Free Quote"}),o.jsx("p",{className:"text-gray-600",children:"Tell us about your project and we'll provide a personalised quote"}),o.jsxs("div",{className:"text-blue-600 text-sm mt-2",children:["Your Selection: ",q.title]})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"firstName",className:K.styles.text.label,children:["First Name ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{id:"firstName",type:"text",value:((Q=(it=D[m])==null?void 0:it.contact_name)==null?void 0:Q.split(" ")[0])||"",onChange:C=>{var J;const $=D[m]||{},A=((J=$.contact_name)==null?void 0:J.split(" ").slice(1).join(" "))||"",L=C.target.value+(A?" "+A:"");P(U=>({...U,[m]:{...$,contact_name:L}}))},placeholder:"Enter your first name",className:K.styles.input,required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"lastName",className:K.styles.text.label,children:["Last Name ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{id:"lastName",type:"text",value:((ze=(ee=D[m])==null?void 0:ee.contact_name)==null?void 0:ze.split(" ").slice(1).join(" "))||"",onChange:C=>{var J;const $=D[m]||{},L=(((J=$.contact_name)==null?void 0:J.split(" ")[0])||"")+(C.target.value?" "+C.target.value:"");P(U=>({...U,[m]:{...$,contact_name:L}}))},placeholder:"Enter your last name",className:K.styles.input,required:!0})]})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"email",className:K.styles.text.label,children:["Email Address ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{id:"email",type:"email",value:((lt=D[m])==null?void 0:lt.contact_email)||"",onChange:C=>P($=>({...$,[m]:{...$[m]||{},contact_email:C.target.value}})),placeholder:"Enter your email address",className:K.styles.input,required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"phone",className:K.styles.text.label,children:["Phone Number ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{id:"phone",type:"tel",value:((Et=D[m])==null?void 0:Et.contact_phone)||"",onChange:C=>P($=>({...$,[m]:{...$[m]||{},contact_phone:C.target.value}})),placeholder:"Enter your phone number",className:K.styles.input,required:!0})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"address",className:K.styles.text.label,children:["Property Address ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("textarea",{id:"address",value:((dt=D[m])==null?void 0:dt.contact_postcode)||"",onChange:C=>P($=>({...$,[m]:{...$[m]||{},contact_postcode:C.target.value}})),placeholder:"Enter your full address",rows:3,className:`${K.styles.input} resize-none`,required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"projectDetails",className:K.styles.text.label,children:"Project Details"}),o.jsx("textarea",{id:"projectDetails",value:((ar=D[m])==null?void 0:ar.project_details)||"",onChange:C=>P($=>({...$,[m]:{...$[m]||{},project_details:C.target.value,answer_text:C.target.value}})),placeholder:"Tell us more about your project, preferred timeline, budget range, etc.",rows:4,className:`${K.styles.input} resize-none`})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"preferredContact",className:K.styles.text.label,children:["Preferred Contact Method ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("select",{id:"preferredContact",value:((Ie=D[m])==null?void 0:Ie.preferred_contact)||"",onChange:C=>P($=>({...$,[m]:{...$[m]||{},preferred_contact:C.target.value}})),className:K.styles.input,required:!0,children:[o.jsx("option",{value:"",children:"Select preferred contact method"}),o.jsx("option",{value:"Phone Call",children:"Phone Call"}),o.jsx("option",{value:"Email",children:"Email"}),o.jsx("option",{value:"Both",children:"Both"})]})]}),o.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-gray-400 transition-colors",onClick:()=>{const C=document.createElement("input");C.type="file",C.accept="image/*,application/pdf",C.multiple=!0,C.onchange=$=>{const A=Array.from($.target.files||[]);A.length>0&&ae(A[0])},C.click()},children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("svg",{className:"w-12 h-12 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),o.jsx("p",{className:"text-lg font-medium text-gray-600 mb-1",children:"Upload Plans or Reference Images (Optional)"}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Click to upload or drag and drop",o.jsx("br",{}),"PNG, JPG, PDF up to 10MB each"]})]})}),((lr=D[m])==null?void 0:lr.file)&&o.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("svg",{className:"w-5 h-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),o.jsx("span",{className:"text-sm font-medium text-green-800",children:(zt=(Nr=D[m])==null?void 0:Nr.file)==null?void 0:zt.name})]}),o.jsx("button",{onClick:()=>P(C=>({...C,[m]:{...C[m]||{},file:void 0}})),className:"text-green-600 hover:text-green-800 text-sm",children:"Remove"})]})}),o.jsxs("div",{className:"flex items-start space-x-2 pt-4",children:[o.jsx("input",{type:"checkbox",id:"consent",required:!0,className:"mt-1 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),o.jsxs("label",{htmlFor:"consent",className:"text-sm text-gray-600 flex-1",children:[o.jsx("span",{className:"text-orange-500",children:""})," I agree to be contacted by ",((cr=u==null?void 0:u.clients)==null?void 0:cr.name)||"the company"," regarding my enquiry ",o.jsx("span",{className:"text-red-500",children:"*"})]})]})]})]})}):q.question_type==="file_upload"?o.jsxs("div",{className:"mt-6",children:[o.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors cursor-pointer",onClick:()=>{var $;const C=document.createElement("input");C.type="file",C.accept=(($=q.allowed_file_types)==null?void 0:$.join(","))||"*",C.onchange=A=>{var J;const L=(J=A.target.files)==null?void 0:J[0];L&&ae(L)},C.click()},onDragOver:C=>{C.preventDefault(),C.stopPropagation(),C.currentTarget.classList.add("border-blue-500","bg-blue-50")},onDragLeave:C=>{C.preventDefault(),C.stopPropagation(),C.currentTarget.classList.remove("border-blue-500","bg-blue-50")},onDrop:C=>{C.preventDefault(),C.stopPropagation(),C.currentTarget.classList.remove("border-blue-500","bg-blue-50");const $=Array.from(C.dataTransfer.files);$.length>0&&ae($[0])},children:o.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:o.jsx("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"text-lg font-medium text-gray-900 mb-2",children:(Qt=D[m])!=null&&Qt.file?"Change file":"Drop files here or click to browse"}),o.jsxs("p",{className:"text-sm text-gray-500",children:["Maximum file size: ",q.max_file_size||5,"MB each"]}),q.allowed_file_types&&q.allowed_file_types.length>0&&o.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Allowed types: ",q.allowed_file_types.map(C=>{var $;return C==="image/*"?"Images":C==="application/pdf"?"PDF":C.includes("word")?"Word docs":C==="text/*"?"Text files":(($=C.split("/")[1])==null?void 0:$.toUpperCase())||C}).join(", ")]})]})]})}),((ur=D[m])==null?void 0:ur.file)&&o.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded flex items-center justify-center",children:o.jsx("svg",{className:"w-4 h-4 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-medium text-gray-900",children:(ns=(zr=D[m])==null?void 0:zr.file)==null?void 0:ns.name}),o.jsxs("p",{className:"text-sm text-gray-500",children:[Math.round((((Qr=(Zt=D[m])==null?void 0:Zt.file)==null?void 0:Qr.size)||0)/1024)," KB"]})]})]}),o.jsx("button",{onClick:()=>P(C=>({...C,[m]:{...C[m]||{},file:void 0,answer_text:void 0}})),className:"text-red-500 hover:text-red-700 text-sm",children:"Remove"})]})})]}):q.question_type==="text_input"?o.jsx("div",{className:"mt-6",children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:"text-sm text-slate-600 mb-4",children:"Enter your response"}),o.jsx("textarea",{value:((Ds=D[m])==null?void 0:Ds.answer_text)||"",onChange:C=>P($=>({...$,[m]:{...$[m]||{},answer_text:C.target.value}})),placeholder:"Enter your answer here...",rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 resize-none text-gray-900 placeholder-gray-500",required:q.is_required}),q.is_required&&o.jsx("p",{className:"text-xs text-gray-500",children:"* This field is required"})]})}):q.question_type==="dimensions"?o.jsx("div",{className:"mt-6",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"text-sm text-slate-600 mb-4",children:["Enter measurements ",q.dimension_type==="3d"?"(Width  Height  Depth)":"(Width  Height)"," in ",q.dimension_units||"mm"]}),o.jsxs("div",{className:`grid gap-4 ${q.dimension_type==="3d"?"grid-cols-1 md:grid-cols-3":"grid-cols-1 md:grid-cols-2"}`,children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Width (",q.dimension_units||"mm",")"]}),o.jsx("input",{type:"number",min:"0",step:"0.01",value:((ss=D[m])==null?void 0:ss.width)||"",onChange:C=>P($=>({...$,[m]:{...$[m]||{},width:C.target.value,units:q.dimension_units||"mm",dimension_type:q.dimension_type||"2d"}})),placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:q.is_required})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Height (",q.dimension_units||"mm",")"]}),o.jsx("input",{type:"number",min:"0",step:"0.01",value:((vn=D[m])==null?void 0:vn.height)||"",onChange:C=>P($=>({...$,[m]:{...$[m]||{},height:C.target.value,units:q.dimension_units||"mm",dimension_type:q.dimension_type||"2d"}})),placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:q.is_required})]}),q.dimension_type==="3d"&&o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Depth (",q.dimension_units||"mm",")"]}),o.jsx("input",{type:"number",min:"0",step:"0.01",value:((is=D[m])==null?void 0:is.depth)||"",onChange:C=>P($=>({...$,[m]:{...$[m]||{},depth:C.target.value,units:q.dimension_units||"mm",dimension_type:q.dimension_type||"2d"}})),placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:q.is_required})]})]}),q.is_required&&o.jsx("p",{className:"text-xs text-gray-500",children:"* These fields are required"})]})}):q.question_type==="opinion_scale"?o.jsx("div",{className:"mt-6",children:o.jsx("div",{className:"space-y-4",children:o.jsxs("div",{className:"text-center",children:[q.scale_type==="star"?o.jsx("div",{className:"flex justify-center gap-2",children:[1,2,3,4,5].map(C=>{var $,A;return o.jsx("button",{type:"button",onClick:()=>P(L=>({...L,[m]:{scale_rating:C}})),className:`text-4xl transition-colors ${(($=D[m])==null?void 0:$.scale_rating)===C?"":"text-gray-300 hover:text-gray-400"}`,style:((A=D[m])==null?void 0:A.scale_rating)===C?{color:h.primaryButtonColor}:{},children:""},C)})}):o.jsx("div",{className:"w-full overflow-x-auto",children:o.jsx("div",{className:"flex justify-center gap-1 sm:gap-2 min-w-max px-4",children:Array.from({length:(q.scale_max||10)-(q.scale_min||1)+1},(C,$)=>(q.scale_min||1)+$).map(C=>{var $,A;return o.jsx("button",{type:"button",onClick:()=>P(L=>({...L,[m]:{scale_rating:C}})),className:`w-10 h-10 sm:w-12 sm:h-12 rounded-lg border-2 font-semibold text-sm sm:text-base transition-all flex-shrink-0 ${(($=D[m])==null?void 0:$.scale_rating)===C?"border-2":"bg-white text-gray-700 border-gray-300 hover:border-gray-400"}`,style:((A=D[m])==null?void 0:A.scale_rating)===C?{backgroundColor:h.primaryButtonColor,color:h.primaryButtonTextColor,borderColor:h.primaryButtonColor}:{},children:C},C)})})}),((wn=D[m])==null?void 0:wn.scale_rating)&&o.jsxs("p",{className:"mt-4 text-gray-600",children:["You rated: ",(Ae=D[m])==null?void 0:Ae.scale_rating,q.scale_type==="star"?" stars":""]})]})})}):q.question_type==="frames_plan"?o.jsx("div",{className:"mt-6",children:o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"How many frames do you want?"}),o.jsx("select",{value:((Ms=D[m])==null?void 0:Ms.frames_count)||1,onChange:C=>{const $=parseInt(C.target.value);P(A=>({...A,[m]:{...A[m]||{},frames_count:$,frames:Array($).fill(null).map((L,J)=>{var U,X;return((X=(U=A[m])==null?void 0:U.frames)==null?void 0:X[J])||{frame_number:J+1,image_url:"",location_text:"",measurements_text:""}})}}))},className:"w-32 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:q.is_required,children:Array.from({length:q.frames_max_count||10},(C,$)=>$+1).map(C=>o.jsxs("option",{value:C,children:[C," ",C===1?"frame":"frames"]},C))})]}),Array.from({length:((Os=D[m])==null?void 0:Os.frames_count)||1},(C,$)=>{var L,J;const A=((J=(L=D[m])==null?void 0:L.frames)==null?void 0:J[$])||{};return o.jsxs("div",{className:"border rounded-lg p-6 bg-gray-50",children:[o.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:["Frame ",$+1]}),o.jsxs("div",{className:"space-y-4",children:[(q.frames_require_image??!0)&&o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Image",q.frames_require_image?" *":""]}),o.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:async U=>{var ie;const X=(ie=U.target.files)==null?void 0:ie[0];if(X&&q.id)try{const F=`frames/${q.id}/${Date.now()}-${X.name}`,{error:W}=await z.storage.from("form-assets").upload(F,X);if(W)throw W;const{data:ke}=z.storage.from("form-assets").getPublicUrl(F);P(_e=>{const M=_e[m]||{},ge=[...(M==null?void 0:M.frames)||[]];return ge[$]={...ge[$],frame_number:$+1,image_url:ke.publicUrl},{..._e,[m]:{...M,frames:ge}}})}catch(F){console.error("Error uploading frame image:",F)}},className:"hidden",id:`frame-image-${$}`}),o.jsx("label",{htmlFor:`frame-image-${$}`,className:"cursor-pointer flex flex-col items-center space-y-2",onDragOver:U=>{var X;U.preventDefault(),U.stopPropagation(),(X=U.currentTarget.closest(".border-2"))==null||X.classList.add("border-blue-500","bg-blue-50")},onDragLeave:U=>{var X;U.preventDefault(),U.stopPropagation(),(X=U.currentTarget.closest(".border-2"))==null||X.classList.remove("border-blue-500","bg-blue-50")},onDrop:async U=>{var F;U.preventDefault(),U.stopPropagation(),(F=U.currentTarget.closest(".border-2"))==null||F.classList.remove("border-blue-500","bg-blue-50");const ie=Array.from(U.dataTransfer.files).find(W=>W.type.startsWith("image/"));if(ie&&q.id)try{const W=`frames/${q.id}/${Date.now()}-${ie.name}`,{error:ke}=await z.storage.from("form-assets").upload(W,ie);if(ke)throw ke;const{data:_e}=z.storage.from("form-assets").getPublicUrl(W);P(M=>{const ge=M[m]||{},se=[...(ge==null?void 0:ge.frames)||[]];return se[$]={...se[$],frame_number:$+1,image_url:_e.publicUrl},{...M,[m]:{...ge,frames:se}}})}catch(W){console.error("Error uploading frame image:",W)}},children:A.image_url?o.jsxs("div",{className:"space-y-2",children:[o.jsx("img",{src:A.image_url,alt:`Frame ${$+1}`,className:"w-32 h-32 object-cover rounded"}),o.jsx("p",{className:"text-sm text-gray-600",children:"Click to change"})]}):o.jsxs(o.Fragment,{children:[o.jsx(Ts,{className:"h-12 w-12 text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-lg font-medium text-gray-600",children:"Choose file"}),o.jsx("p",{className:"text-sm text-gray-500",children:"PNG, JPG up to 10MB (drag & drop or click)"})]})]})})]})]}),(q.frames_require_location??!0)&&o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Room Location (e.g., bedroom)",q.frames_require_location?" *":""]}),o.jsx("input",{type:"text",value:A.location_text||"",onChange:U=>{P(X=>{const ie=X[m]||{},F=[...(ie==null?void 0:ie.frames)||[]];return F[$]={...F[$],frame_number:$+1,location_text:U.target.value},{...X,[m]:{...ie,frames:F}}})},placeholder:"e.g., bedroom",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:q.frames_require_location&&q.is_required})]}),(q.frames_require_measurements??!1)&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Measurements (optional) - width  height in mm"}),o.jsx("input",{type:"text",value:A.measurements_text||"",onChange:U=>{P(X=>{const ie=X[m]||{},F=[...(ie==null?void 0:ie.frames)||[]];return F[$]={...F[$],frame_number:$+1,measurements_text:U.target.value},{...X,[m]:{...ie,frames:F}}})},placeholder:"e.g., 1200  800",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!1})]})]})]},$)}),q.is_required&&o.jsx("p",{className:"text-xs text-gray-500",children:"* indicates required fields"})]})}):o.jsx("div",{className:`grid gap-4 mt-6 grid-auto-rows-fr ${q.crop_images_to_square?"":"items-start"} ${q.images_per_row===1?"grid-cols-1":q.images_per_row===2?"grid-cols-1 sm:grid-cols-2":q.images_per_row===3?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":q.images_per_row===4?"grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4":"grid-cols-1 sm:grid-cols-2"}`,children:q.options.map((C,$)=>{var A;return o.jsx(t,{option:C,isSelected:((A=D[m])==null?void 0:A.option_id)===C.id,onClick:()=>re(C),isAnimating:k,animationDirection:E,index:$,cropImagesToSquare:q.crop_images_to_square??!0},C.id)})}),o.jsxs("div",{className:"flex justify-between items-center gap-2 mt-6",children:[o.jsx("button",{onClick:be,disabled:m===0,className:`${K.styles.button.secondary} ${m===0?"opacity-50 cursor-not-allowed":""}`,style:{backgroundColor:h.secondaryButtonColor,color:h.secondaryButtonTextColor},children:"Previous"}),o.jsx("div",{className:"flex items-center gap-2",children:o.jsx("button",{onClick:C=>Se(C),className:K.styles.button.primary,style:{backgroundColor:h.primaryButtonColor,color:h.primaryButtonTextColor,backgroundImage:"none"},children:m===n.length-1?q.question_type==="contact_fields"?"Get My Free Quote":"Submit":"Next"})})]})]})})]})}const wA=()=>(p.useEffect(()=>{(()=>{const r=new URLSearchParams(window.location.search).get("api_key");if(!r||!r.startsWith("dk_live_")){const s={error:"Invalid API key",message:"API key must start with dk_live_"};document.body.innerHTML=`
          <pre style="font-family: monospace; white-space: pre-wrap;">
${JSON.stringify(s,null,2)}
          </pre>
        `;return}const n={success:!0,forms:[{id:"demo-form-123",name:"Demo Contact Form",created_at:new Date().toISOString(),total_responses:5,last_response_at:new Date().toISOString()},{id:"demo-form-456",name:"Demo Feedback Form",created_at:new Date().toISOString(),total_responses:3,last_response_at:new Date().toISOString()}]};document.body.innerHTML=`
        <pre style="font-family: monospace; white-space: pre-wrap;">
${JSON.stringify(n,null,2)}
        </pre>
      `})()},[]),o.jsx("div",{children:o.jsx("p",{children:"Loading API response..."})}));async function _A(e,t){try{const{data:r,error:n}=await z.from("forms").select("id, user_id").eq("id",e).eq("user_id",t).single();if(n||!r)return{data:null,error:n||new Error("Form not found or unauthorized")};const{data:s,error:i}=await z.from("responses").select(`
        id,
        form_id,
        contact_name,
        contact_email,
        contact_phone,
        contact_postcode,
        preferred_contact,
        project_details,
        submitted_at,
        response_answers (
          id,
          answer_text,
          selected_option_id,
          file_url,
          file_name,
          file_size,
          width,
          height,
          depth,
          units,
          scale_rating,
          frames_count,
          step_id,
          form_steps!step_id (
            id,
            title,
            question_type,
            step_order
          )
        )
      `).eq("form_id",e).order("submitted_at",{ascending:!1});if(i)throw i;if(!s||s.length===0)return{data:[],error:null};const{data:a,error:l}=await z.from("forms").select(`
        id,
        name,
        clients (
          id,
          name
        )
      `).eq("id",e).single();if(l)throw l;const c=s.map(u=>({...u,forms:a?[{id:a.id,name:a.name,clients:a.clients}]:null}));return console.log("getFormResponses - enriched responses:",{count:c.length,sample:c[0]}),{data:c,error:null}}catch(r){return console.error("Error fetching form responses:",r),{data:null,error:r}}}async function jA(e,t){try{const{data:r,error:n}=await z.from("responses").select(`
        id,
        form_id
      `).eq("id",e).single();if(n||!r)return{error:n||new Error("Response not found")};const{data:s,error:i}=await z.from("forms").select("user_id").eq("id",r.form_id).single();if(i||!s)return{error:i||new Error("Form not found")};if(s.user_id!==t)return{error:new Error("Unauthorized")};const{error:a}=await z.from("responses").delete().eq("id",e);if(a)throw a;return{error:null}}catch(r){return console.error("Error deleting response:",r),{error:r}}}async function kA(e,t){try{const{data:r,error:n}=await z.from("forms").select("id, user_id").eq("id",e).eq("user_id",t).single();if(n||!r)return{data:null,error:n||new Error("Form not found or unauthorized")};const{data:s,error:i}=await z.from("responses").select("id, submitted_at, contact_name, contact_email").eq("form_id",e).order("submitted_at",{ascending:!1});if(i)throw i;const a=new Date,l=new Date(a.getFullYear(),a.getMonth(),a.getDate()),c=new Date(a);c.setDate(a.getDate()-7);const u=new Date(a);return u.setDate(a.getDate()-30),{data:{total:(s==null?void 0:s.length)||0,today:(s==null?void 0:s.filter(h=>new Date(h.submitted_at)>=l).length)||0,thisWeek:(s==null?void 0:s.filter(h=>new Date(h.submitted_at)>=c).length)||0,thisMonth:(s==null?void 0:s.filter(h=>new Date(h.submitted_at)>=u).length)||0,latest:(s==null?void 0:s[0])||void 0},error:null}}catch(r){return console.error("Error fetching response stats:",r),{data:null,error:r}}}function NA(e,t){if(!e||e.length===0)throw new Error("No responses to export");const r=new Set;e.forEach(u=>{var d;(d=u.response_answers)==null||d.forEach(h=>{var m;const f=(m=h.form_steps)==null?void 0:m[0];f!=null&&f.title&&r.add(f.title)})});const n=["Submitted At","Contact Name","Contact Email","Contact Phone","Contact Postcode","Preferred Contact","Project Details",...Array.from(r)],s=e.map(u=>{const d=[new Date(u.submitted_at).toLocaleString(),u.contact_name||"",u.contact_email||"",u.contact_phone||"",u.contact_postcode||"",u.preferred_contact||"",u.project_details||""];return r.forEach(h=>{var m;const f=(m=u.response_answers)==null?void 0:m.find(v=>{var b,w;return((w=(b=v.form_steps)==null?void 0:b[0])==null?void 0:w.title)===h});f?f.answer_text?d.push(f.answer_text):f.file_url?d.push(`${f.file_name||"File"} (${f.file_url})`):f.width||f.height||f.depth?d.push(`${f.width||""}x${f.height||""}x${f.depth||""} ${f.units||""}`):f.scale_rating!==null?d.push(String(f.scale_rating)):f.frames_count!==null?d.push(String(f.frames_count)):d.push(""):d.push("")}),d}),i=[n.map(u=>`"${u}"`).join(","),...s.map(u=>u.map(d=>`"${String(d).replace(/"/g,'""')}"`).join(","))].join(`
`),a=new Blob([i],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),c=URL.createObjectURL(a);l.setAttribute("href",c),l.setAttribute("download",`${t}-responses-${new Date().toISOString().split("T")[0]}.csv`),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l)}function SA(e,t){if(!t.trim())return e;const r=t.toLowerCase();return e.filter(n=>{var s,i,a,l,c,u;return(s=n.contact_name)!=null&&s.toLowerCase().includes(r)||(i=n.contact_email)!=null&&i.toLowerCase().includes(r)||(a=n.contact_phone)!=null&&a.toLowerCase().includes(r)||(l=n.contact_postcode)!=null&&l.toLowerCase().includes(r)||(c=n.project_details)!=null&&c.toLowerCase().includes(r)?!0:((u=n.response_answers)==null?void 0:u.some(d=>{var h,f,m,v,b;return!!((h=d.answer_text)!=null&&h.toLowerCase().includes(r)||(f=d.file_name)!=null&&f.toLowerCase().includes(r)||(b=(v=(m=d.form_steps)==null?void 0:m[0])==null?void 0:v.title)!=null&&b.toLowerCase().includes(r))}))||!1})}function CA(e,t,r){return e.filter(n=>{const s=new Date(n.submitted_at);return!(t&&s<t||r&&s>r)})}function EA({stats:e,loading:t=!1}){const{theme:r}=Ue(),n=[{title:"Total Responses",value:e.total,icon:sr,color:"blue",gradient:"from-blue-500 to-blue-600"},{title:"Today",value:e.today,icon:dh,color:"green",gradient:"from-green-500 to-green-600"},{title:"This Week",value:e.thisWeek,icon:TC,color:"purple",gradient:"from-purple-500 to-purple-600"},{title:"This Month",value:e.thisMonth,icon:On,color:"orange",gradient:"from-orange-500 to-orange-600"}];return t?o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((s,i)=>o.jsxs("div",{className:`rounded-2xl border p-6 animate-pulse ${r==="light"?"bg-white/50 border-gray-200":"bg-white/10 border-white/20"}`,children:[o.jsx("div",{className:`h-4 rounded w-24 mb-4 ${r==="light"?"bg-gray-200":"bg-white/20"}`}),o.jsx("div",{className:`h-8 rounded w-16 ${r==="light"?"bg-gray-200":"bg-white/20"}`})]},i))}):o.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:n.map((s,i)=>{const a=s.icon;return o.jsxs("div",{className:`backdrop-blur-xl rounded-2xl border p-6 hover:scale-105 transition-all duration-300 animate-fade-in ${r==="light"?"bg-white/50 border-gray-200 hover:shadow-lg":"bg-white/10 border-white/20 hover:shadow-2xl hover:shadow-"+s.color+"-500/10"}`,style:{animationDelay:`${i*.1}s`},children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsx("p",{className:`text-sm font-medium ${r==="light"?"text-gray-600":"text-white/70"}`,children:s.title}),o.jsx("div",{className:`p-2 rounded-lg bg-gradient-to-r ${s.gradient} bg-opacity-10`,children:o.jsx(a,{className:"w-5 h-5 text-white"})})]}),o.jsx("p",{className:`text-3xl font-bold ${r==="light"?"text-gray-900":"text-white"}`,children:s.value.toLocaleString()})]},s.title)})})}function TA({searchQuery:e,onSearchChange:t,startDate:r,endDate:n,onStartDateChange:s,onEndDateChange:i,onClearFilters:a}){const{theme:l}=Ue(),c=e||r||n;return o.jsxs("div",{className:`rounded-2xl border p-6 mb-6 backdrop-blur-xl ${l==="light"?"bg-white/50 border-gray-200":"bg-white/10 border-white/20"}`,children:[o.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"relative",children:[o.jsx(Jo,{className:`absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 ${l==="light"?"text-gray-400":"text-white/40"}`}),o.jsx("input",{type:"text",placeholder:"Search by name, email, or answer...",value:e,onChange:u=>t(u.target.value),className:`w-full pl-12 pr-4 py-3 rounded-xl border transition-all ${l==="light"?"bg-white border-gray-300 text-gray-900 placeholder-gray-400 focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20":"bg-white/5 border-white/20 text-white placeholder-white/40 focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20"} focus:outline-none`})]})}),o.jsxs("div",{className:"flex items-center space-x-3",children:[o.jsxs("div",{className:"relative",children:[o.jsx(On,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${l==="light"?"text-gray-400":"text-white/40"}`}),o.jsx("input",{type:"date",value:r,onChange:u=>s(u.target.value),className:`pl-10 pr-4 py-3 rounded-xl border transition-all ${l==="light"?"bg-white border-gray-300 text-gray-900 focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20":"bg-white/5 border-white/20 text-white focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20"} focus:outline-none`,placeholder:"Start date"})]}),o.jsx("span",{className:l==="light"?"text-gray-500":"text-white/60",children:"to"}),o.jsxs("div",{className:"relative",children:[o.jsx(On,{className:`absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 ${l==="light"?"text-gray-400":"text-white/40"}`}),o.jsx("input",{type:"date",value:n,onChange:u=>i(u.target.value),className:`pl-10 pr-4 py-3 rounded-xl border transition-all ${l==="light"?"bg-white border-gray-300 text-gray-900 focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20":"bg-white/5 border-white/20 text-white focus:border-orange-400 focus:ring-2 focus:ring-orange-400/20"} focus:outline-none`,placeholder:"End date"})]})]}),c&&o.jsxs("button",{onClick:a,className:`flex items-center space-x-2 px-4 py-3 rounded-xl font-medium transition-all hover:scale-105 ${l==="light"?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-white/10 text-white hover:bg-white/20"}`,children:[o.jsx(st,{className:"w-4 h-4"}),o.jsx("span",{children:"Clear"})]})]}),c&&o.jsxs("div",{className:`mt-4 text-sm ${l==="light"?"text-gray-600":"text-white/60"}`,children:[e&&o.jsxs("span",{children:['Searching for "',e,'" ']}),(r||n)&&o.jsxs("span",{children:[r&&`from ${new Date(r).toLocaleDateString()}`,r&&n&&" ",n&&`to ${new Date(n).toLocaleDateString()}`]})]})]})}function PA({responses:e,onViewDetails:t,loading:r=!1}){const{theme:n}=Ue(),[s,i]=p.useState("submitted_at"),[a,l]=p.useState("desc"),[c,u]=p.useState(1),[d,h]=p.useState(10),f=[...e].sort((g,_)=>{if(s==="submitted_at"){const k=new Date(g.submitted_at).getTime(),S=new Date(_.submitted_at).getTime();return a==="asc"?k-S:S-k}else{const k=g.contact_name||"",S=_.contact_name||"";return a==="asc"?k.localeCompare(S):S.localeCompare(k)}}),m=Math.ceil(f.length/d),v=(c-1)*d,b=v+d,w=f.slice(v,b),y=g=>{s===g?l(a==="asc"?"desc":"asc"):(i(g),l("desc"))},x=({field:g})=>s!==g?null:a==="asc"?o.jsx(gv,{className:"w-4 h-4"}):o.jsx(Zf,{className:"w-4 h-4"});return r?o.jsx("div",{className:`rounded-2xl border overflow-hidden backdrop-blur-xl ${n==="light"?"bg-white/50 border-gray-200":"bg-white/10 border-white/20"}`,children:o.jsx("div",{className:"p-8 space-y-4",children:[...Array(5)].map((g,_)=>o.jsx("div",{className:`h-16 rounded-lg animate-pulse ${n==="light"?"bg-gray-200":"bg-white/10"}`},_))})}):e.length===0?o.jsxs("div",{className:`rounded-2xl border p-12 text-center backdrop-blur-xl ${n==="light"?"bg-white/50 border-gray-200":"bg-white/10 border-white/20"}`,children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500/20 to-purple-600/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:o.jsx(pn,{className:`w-8 h-8 ${n==="light"?"text-blue-600":"text-blue-300"}`})}),o.jsx("h3",{className:`text-xl font-bold mb-2 ${n==="light"?"text-gray-900":"text-white"}`,children:"No responses yet"}),o.jsx("p",{className:n==="light"?"text-gray-600":"text-white/70",children:"Responses will appear here once someone submits this form"})]}):o.jsxs("div",{className:"space-y-4",children:[o.jsx("div",{className:`rounded-2xl border overflow-hidden backdrop-blur-xl ${n==="light"?"bg-white/50 border-gray-200":"bg-white/10 border-white/20"}`,children:o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full",children:[o.jsx("thead",{className:n==="light"?"bg-gray-50":"bg-white/5",children:o.jsxs("tr",{children:[o.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold cursor-pointer hover:bg-black/5 transition-colors ${n==="light"?"text-gray-700":"text-white/90"}`,onClick:()=>y("submitted_at"),children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{children:"Submitted"}),o.jsx(x,{field:"submitted_at"})]})}),o.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold cursor-pointer hover:bg-black/5 transition-colors ${n==="light"?"text-gray-700":"text-white/90"}`,onClick:()=>y("name"),children:o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{children:"Contact Name"}),o.jsx(x,{field:"name"})]})}),o.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${n==="light"?"text-gray-700":"text-white/90"}`,children:"Email"}),o.jsx("th",{className:`px-6 py-4 text-left text-sm font-semibold ${n==="light"?"text-gray-700":"text-white/90"}`,children:"Phone"}),o.jsx("th",{className:`px-6 py-4 text-right text-sm font-semibold ${n==="light"?"text-gray-700":"text-white/90"}`,children:"Actions"})]})}),o.jsx("tbody",{children:w.map(g=>o.jsxs("tr",{className:`border-t cursor-pointer transition-colors ${n==="light"?"border-gray-200 hover:bg-gray-50":"border-white/10 hover:bg-white/5"}`,onClick:()=>t(g),children:[o.jsxs("td",{className:`px-6 py-4 ${n==="light"?"text-gray-900":"text-white"}`,children:[o.jsx("div",{className:"font-medium",children:new Date(g.submitted_at).toLocaleDateString()}),o.jsx("div",{className:`text-sm ${n==="light"?"text-gray-500":"text-white/60"}`,children:new Date(g.submitted_at).toLocaleTimeString()})]}),o.jsx("td",{className:`px-6 py-4 ${n==="light"?"text-gray-900":"text-white"}`,children:g.contact_name||"-"}),o.jsx("td",{className:`px-6 py-4 ${n==="light"?"text-gray-600":"text-white/80"}`,children:g.contact_email||"-"}),o.jsx("td",{className:`px-6 py-4 ${n==="light"?"text-gray-600":"text-white/80"}`,children:g.contact_phone||"-"}),o.jsx("td",{className:"px-6 py-4 text-right",children:o.jsxs("button",{onClick:_=>{_.stopPropagation(),t(g)},className:`inline-flex items-center space-x-2 px-3 py-1.5 rounded-lg font-medium transition-all hover:scale-105 ${n==="light"?"bg-blue-100 text-blue-700 hover:bg-blue-200":"bg-blue-500/20 text-blue-300 hover:bg-blue-500/30"}`,children:[o.jsx(pn,{className:"w-4 h-4"}),o.jsx("span",{children:"View"})]})})]},g.id))})]})})}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("span",{className:`text-sm ${n==="light"?"text-gray-600":"text-white/70"}`,children:"Show"}),o.jsxs("select",{value:d,onChange:g=>{h(Number(g.target.value)),u(1)},className:`px-3 py-1.5 rounded-lg border transition-all ${n==="light"?"bg-white border-gray-300 text-gray-900":"bg-white/10 border-white/20 text-white"} focus:outline-none focus:ring-2 focus:ring-orange-500/20`,children:[o.jsx("option",{value:"10",children:"10"}),o.jsx("option",{value:"25",children:"25"}),o.jsx("option",{value:"50",children:"50"}),o.jsx("option",{value:"100",children:"100"})]}),o.jsxs("span",{className:`text-sm ${n==="light"?"text-gray-600":"text-white/70"}`,children:["of ",e.length," responses"]})]}),o.jsxs("div",{className:"flex items-center space-x-2",children:[o.jsx("button",{onClick:()=>u(g=>Math.max(1,g-1)),disabled:c===1,className:`px-4 py-2 rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed ${n==="light"?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-white/10 text-white hover:bg-white/20"}`,children:"Previous"}),o.jsxs("span",{className:`px-4 text-sm ${n==="light"?"text-gray-600":"text-white/70"}`,children:["Page ",c," of ",m]}),o.jsx("button",{onClick:()=>u(g=>Math.min(m,g+1)),disabled:c===m,className:`px-4 py-2 rounded-lg font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed ${n==="light"?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-white/10 text-white hover:bg-white/20"}`,children:"Next"})]})]})]})}function $A({isOpen:e,response:t,onClose:r,onDelete:n}){var d;const{theme:s}=Ue();if(!e||!t)return null;console.log("ResponseDetailsModal - response data:",{response:t,hasContactInfo:!!(t.contact_name||t.contact_email),hasAnswers:((d=t.response_answers)==null?void 0:d.length)||0});const i=()=>{confirm("Are you sure you want to delete this response? This action cannot be undone.")&&(n==null||n(t.id),r())},a=async(h,f)=>{try{const v=await(await fetch(h)).blob(),b=window.URL.createObjectURL(v),w=document.createElement("a");w.href=b,w.download=f,document.body.appendChild(w),w.click(),document.body.removeChild(w),window.URL.revokeObjectURL(b)}catch(m){console.error("Error downloading image:",m)}},l=h=>h.answer_text?o.jsx("span",{children:h.answer_text}):h.file_url?o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsxs("a",{href:h.file_url,target:"_blank",rel:"noopener noreferrer",className:`hover:underline ${s==="light"?"text-blue-600":"text-blue-400"}`,children:[h.file_name||"Download File"," "]}),o.jsx("button",{onClick:()=>a(h.file_url,h.file_name||"attachment"),className:`p-1.5 rounded-lg transition-colors ${s==="light"?"hover:bg-blue-100 text-blue-600":"hover:bg-blue-500/20 text-blue-400"}`,title:"Download file",children:o.jsx(Ln,{className:"w-4 h-4"})})]}),h.file_size&&o.jsxs("span",{className:`text-sm ${s==="light"?"text-gray-500":"text-white/60"}`,children:["(",(h.file_size/1024).toFixed(1)," KB)"]})]}):h.width||h.height||h.depth?o.jsxs("span",{children:[h.width||"","  ",h.height||"","  ",h.depth||""," ",h.units||""]}):h.scale_rating!==null?o.jsxs("span",{children:["Rating: ",h.scale_rating]}):h.frames_count!==null?o.jsxs("span",{children:["Requested: ",h.frames_count," frame",h.frames_count>1?"s":""]}):o.jsx("span",{className:s==="light"?"text-gray-400":"text-white/40",children:"-"}),c=h=>{const f=(t.response_frames||[]).filter(m=>m.step_id===h.step_id);return f.length===0?null:o.jsxs("div",{className:"mt-3 space-y-2",children:[o.jsxs("p",{className:`text-sm ${s==="light"?"text-gray-600":"text-white/70"}`,children:[f.length," frame",f.length>1?"s":""," captured"]}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:f.map(m=>o.jsxs("div",{className:`rounded-lg p-2 border ${s==="light"?"bg-white border-gray-200":"bg-white/5 border-white/10"}`,children:[m.image_url?o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:m.image_url,alt:`Frame ${m.frame_number}`,className:"w-full h-32 object-cover rounded mb-2"}),o.jsx("button",{onClick:()=>a(m.image_url,`frame-${m.frame_number}.jpg`),className:`absolute top-2 right-2 p-1.5 rounded-lg transition-all opacity-0 group-hover:opacity-100 ${s==="light"?"bg-white/90 hover:bg-white text-gray-700":"bg-black/60 hover:bg-black/80 text-white"}`,title:"Download image",children:o.jsx(Ln,{className:"w-4 h-4"})})]}):o.jsx("div",{className:`w-full h-32 flex items-center justify-center rounded mb-2 ${s==="light"?"bg-gray-100":"bg-white/5"}`,children:o.jsx("span",{className:`text-xs ${s==="light"?"text-gray-400":"text-white/40"}`,children:"No image"})}),o.jsxs("div",{className:`text-xs ${s==="light"?"text-gray-600":"text-white/70"}`,children:[o.jsxs("p",{className:"font-medium",children:["Frame ",m.frame_number]}),m.location_text&&o.jsx("p",{className:s==="light"?"text-gray-500":"text-white/50",children:m.location_text}),m.measurements_text&&o.jsx("p",{className:s==="light"?"text-gray-500":"text-white/50",children:m.measurements_text})]})]},m.id))})]})},u=o.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4 animate-fade-in overflow-y-auto",children:o.jsxs("div",{className:`w-full max-w-3xl rounded-2xl border shadow-2xl my-8 animate-scale-in ${s==="light"?"bg-white border-gray-200":"bg-gray-900 border-white/20"}`,children:[o.jsxs("div",{className:`flex items-center justify-between p-6 border-b ${s==="light"?"border-gray-200":"border-white/10"}`,children:[o.jsx("h2",{className:`text-2xl font-bold ${s==="light"?"text-gray-900":"text-white"}`,children:"Response Details"}),o.jsxs("div",{className:"flex items-center space-x-2",children:[n&&o.jsx("button",{onClick:i,className:`p-2 rounded-lg transition-colors ${s==="light"?"hover:bg-red-100 text-red-600":"hover:bg-red-500/20 text-red-400"}`,title:"Delete response",children:o.jsx(Oi,{className:"w-5 h-5"})}),o.jsx("button",{onClick:r,className:`p-2 rounded-lg transition-colors ${s==="light"?"hover:bg-gray-100 text-gray-500":"hover:bg-white/10 text-white/60"}`,children:o.jsx(st,{className:"w-5 h-5"})})]})]}),o.jsxs("div",{className:"p-6 space-y-6 max-h-[calc(100vh-16rem)] overflow-y-auto",children:[o.jsxs("div",{className:`rounded-xl border p-4 ${s==="light"?"bg-blue-50 border-blue-200":"bg-blue-500/10 border-blue-400/30"}`,children:[o.jsx("h4",{className:`text-sm font-semibold mb-3 ${s==="light"?"text-blue-900":"text-blue-200"}`,children:"Contact Information"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(On,{className:`w-5 h-5 mt-0.5 ${s==="light"?"text-blue-600":"text-blue-300"}`}),o.jsxs("div",{children:[o.jsx("p",{className:`text-xs ${s==="light"?"text-blue-600":"text-blue-300"}`,children:"Submitted"}),o.jsx("p",{className:`text-sm font-medium ${s==="light"?"text-gray-900":"text-white"}`,children:new Date(t.submitted_at).toLocaleString()})]})]}),t.contact_name&&o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Li,{className:`w-5 h-5 mt-0.5 ${s==="light"?"text-blue-600":"text-blue-300"}`}),o.jsxs("div",{children:[o.jsx("p",{className:`text-xs ${s==="light"?"text-blue-600":"text-blue-300"}`,children:"Name"}),o.jsx("p",{className:`text-sm font-medium ${s==="light"?"text-gray-900":"text-white"}`,children:t.contact_name})]})]}),t.contact_email&&o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Xl,{className:`w-5 h-5 mt-0.5 ${s==="light"?"text-blue-600":"text-blue-300"}`}),o.jsxs("div",{children:[o.jsx("p",{className:`text-xs ${s==="light"?"text-blue-600":"text-blue-300"}`,children:"Email"}),o.jsx("p",{className:`text-sm font-medium ${s==="light"?"text-gray-900":"text-white"}`,children:t.contact_email})]})]}),t.contact_phone&&o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(kv,{className:`w-5 h-5 mt-0.5 ${s==="light"?"text-blue-600":"text-blue-300"}`}),o.jsxs("div",{children:[o.jsx("p",{className:`text-xs ${s==="light"?"text-blue-600":"text-blue-300"}`,children:"Phone"}),o.jsx("p",{className:`text-sm font-medium ${s==="light"?"text-gray-900":"text-white"}`,children:t.contact_phone})]})]}),t.contact_postcode&&o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(_v,{className:`w-5 h-5 mt-0.5 ${s==="light"?"text-blue-600":"text-blue-300"}`}),o.jsxs("div",{children:[o.jsx("p",{className:`text-xs ${s==="light"?"text-blue-600":"text-blue-300"}`,children:"Postcode"}),o.jsx("p",{className:`text-sm font-medium ${s==="light"?"text-gray-900":"text-white"}`,children:t.contact_postcode})]})]}),t.preferred_contact&&o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(Xl,{className:`w-5 h-5 mt-0.5 ${s==="light"?"text-blue-600":"text-blue-300"}`}),o.jsxs("div",{children:[o.jsx("p",{className:`text-xs ${s==="light"?"text-blue-600":"text-blue-300"}`,children:"Preferred Contact"}),o.jsx("p",{className:`text-sm font-medium ${s==="light"?"text-gray-900":"text-white"}`,children:t.preferred_contact})]})]})]}),t.project_details&&o.jsx("div",{className:"mt-4 pt-4 border-t border-blue-200/30",children:o.jsxs("div",{className:"flex items-start space-x-3",children:[o.jsx(sr,{className:`w-5 h-5 mt-0.5 ${s==="light"?"text-blue-600":"text-blue-300"}`}),o.jsxs("div",{className:"flex-1",children:[o.jsx("p",{className:`text-xs mb-1 ${s==="light"?"text-blue-600":"text-blue-300"}`,children:"Project Details"}),o.jsx("p",{className:`text-sm ${s==="light"?"text-gray-900":"text-white"}`,children:t.project_details})]})]})})]}),t.response_answers&&t.response_answers.length>0&&o.jsxs("div",{children:[o.jsx("h3",{className:`text-lg font-semibold mb-4 ${s==="light"?"text-gray-900":"text-white"}`,children:"Form Answers"}),o.jsx("div",{className:"space-y-4",children:t.response_answers.sort((h,f)=>{var m,v,b,w;return(((v=(m=h.form_steps)==null?void 0:m[0])==null?void 0:v.step_order)||0)-(((w=(b=f.form_steps)==null?void 0:b[0])==null?void 0:w.step_order)||0)}).map(h=>{var f,m,v,b;return o.jsxs("div",{className:`rounded-xl border p-4 ${s==="light"?"bg-gray-50 border-gray-200":"bg-white/5 border-white/10"}`,children:[o.jsx("p",{className:`text-sm font-medium mb-2 ${s==="light"?"text-gray-700":"text-white/80"}`,children:((m=(f=h.form_steps)==null?void 0:f[0])==null?void 0:m.title)||"Question"}),o.jsx("div",{className:`text-base ${s==="light"?"text-gray-900":"text-white"}`,children:l(h)}),((b=(v=h.form_steps)==null?void 0:v[0])==null?void 0:b.question_type)==="frames_plan"&&c(h)]},h.id)})})]}),(!t.response_answers||t.response_answers.length===0)&&o.jsx("div",{className:`text-center py-8 ${s==="light"?"text-gray-500":"text-white/60"}`,children:"No form answers available"})]})]})});return Hr.createPortal(u,document.body)}function AA({responses:e,formName:t,disabled:r=!1}){const{theme:n}=Ue(),s=()=>{try{NA(e,t)}catch(i){console.error("Export failed:",i),alert("Failed to export responses. Please try again.")}};return o.jsxs("button",{onClick:s,disabled:r||e.length===0,className:"flex items-center space-x-2 px-4 py-2 rounded-xl font-medium transition-all hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white",title:e.length===0?"No responses to export":"Export responses to CSV",children:[o.jsx(Ln,{className:"w-4 h-4"}),o.jsx("span",{children:"Export CSV"})]})}function RA(){const{formId:e}=Pc(),{user:t}=kr(),{theme:r}=Ue(),{push:n}=ts(),s=Zn(),[i,a]=p.useState(""),[l,c]=p.useState([]),[u,d]=p.useState([]),[h,f]=p.useState({total:0,today:0,thisWeek:0,thisMonth:0}),[m,v]=p.useState(!0),[b,w]=p.useState(null),[y,x]=p.useState(!1),[g,_]=p.useState(""),[k,S]=p.useState(""),[N,E]=p.useState("");p.useEffect(()=>{e&&t&&(O(),D(),P())},[e,t]),p.useEffect(()=>{let Z=l;if(g&&(Z=SA(Z,g)),k||N){const ne=k?new Date(k):void 0,fe=N?new Date(N):void 0;Z=CA(Z,ne,fe)}d(Z)},[l,g,k,N]);const O=async()=>{if(!(!e||!t))try{const{data:Z,error:ne}=await z.from("forms").select("name, user_id").eq("id",e).eq("user_id",t.id).single();if(ne)throw ne;if(!Z){n({type:"error",message:"Form not found or access denied"}),s("/forms");return}a(Z.name)}catch(Z){console.error("Error fetching form:",Z),n({type:"error",message:"Failed to load form"}),s("/forms")}},D=async()=>{if(!(!e||!t)){v(!0);try{const{data:Z,error:ne}=await _A(e,t.id);if(ne)throw ne;c(Z||[])}catch(Z){console.error("Error fetching responses:",Z),n({type:"error",message:"Failed to load responses"})}finally{v(!1)}}},P=async()=>{if(!(!e||!t))try{const{data:Z,error:ne}=await kA(e,t.id);if(ne)throw ne;Z&&f(Z)}catch(Z){console.error("Error fetching stats:",Z)}},te=async Z=>{if(t)try{const{error:ne}=await jA(Z,t.id);if(ne)throw ne;n({type:"success",message:"Response deleted successfully"}),D(),P()}catch(ne){console.error("Error deleting response:",ne),n({type:"error",message:"Failed to delete response"})}},B=Z=>{console.log("Opening response details:",Z),w(Z),x(!0)},he=()=>{_(""),S(""),E("")};return m&&l.length===0?o.jsx("div",{className:"min-h-screen flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx(wv,{className:`w-12 h-12 animate-spin mx-auto mb-4 ${r==="light"?"text-orange-500":"text-orange-400"}`}),o.jsx("p",{className:r==="light"?"text-gray-600":"text-white/70",children:"Loading responses..."})]})}):o.jsxs(o.Fragment,{children:[o.jsx($A,{isOpen:y,response:b,onClose:()=>{x(!1),w(null)},onDelete:te}),o.jsxs("div",{className:"p-8 animate-fade-in",children:[o.jsxs("div",{className:"mb-8",children:[o.jsxs("button",{onClick:()=>s("/forms"),className:`flex items-center space-x-2 mb-4 px-4 py-2 rounded-lg transition-colors ${r==="light"?"text-gray-600 hover:bg-gray-100":"text-white/70 hover:bg-white/10"}`,children:[o.jsx(Qf,{className:"w-5 h-5"}),o.jsx("span",{children:"Back to Forms"})]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"animate-slide-up",children:[o.jsx("h1",{className:`text-4xl font-bold bg-gradient-to-r bg-clip-text text-transparent ${r==="light"?"from-gray-800 via-orange-600 to-red-600":"from-white via-orange-100 to-red-200"}`,children:i}),o.jsx("p",{className:`mt-2 text-lg ${r==="light"?"text-gray-600":"text-white/70"}`,children:"Form Responses"})]}),o.jsx(AA,{responses:u,formName:i})]})]}),o.jsx(EA,{stats:h,loading:m}),o.jsx(TA,{searchQuery:g,onSearchChange:_,startDate:k,endDate:N,onStartDateChange:S,onEndDateChange:E,onClearFilters:he}),o.jsx(PA,{responses:u,onViewDetails:B,loading:m})]})]})}function DA(){var m,v,b;const{responseId:e}=Pc(),t=Zn(),{push:r}=ts(),{theme:n}=Ue(),[s,i]=p.useState(null),[a,l]=p.useState(!0);p.useEffect(()=>{e&&c()},[e]);const c=async()=>{try{const{data:w,error:y}=await z.from("responses").select(`
          id,
          form_id,
          contact_name,
          contact_email,
          contact_phone,
          contact_postcode,
          preferred_contact,
          project_details,
          submitted_at,
          response_answers (
            id,
            answer_text,
            selected_option_id,
            file_url,
            file_name,
            file_size,
            width,
            height,
            depth,
            units,
            scale_rating,
            frames_count,
            step_id,
            form_steps!step_id (
              id,
              title,
              question_type,
              step_order
            )
          )
        `).eq("id",e).single();if(y)throw y;const{data:x,error:g}=await z.from("forms").select(`
          id,
          name,
          clients (
            id,
            name
          )
        `).eq("id",w.form_id).single();if(g)throw g;const _={...w,form:x};if(_.response_answers){const N=_.response_answers.map(O=>O.selected_option_id).filter(Boolean);let E=new Map;if(N.length>0){const{data:O,error:D}=await z.from("form_options").select("id, label, image_url").in("id",N);if(D)throw D;O==null||O.forEach(P=>{E.set(P.id,P)})}_.response_answers=_.response_answers.map(O=>({...O,form_option:O.selected_option_id?E.get(O.selected_option_id):null})),_.response_answers.sort((O,D)=>{var B,he;const P=((B=O.form_steps)==null?void 0:B.step_order)||0,te=((he=D.form_steps)==null?void 0:he.step_order)||0;return P-te})}const{data:k,error:S}=await z.from("response_frames").select(`
          id,
          response_id,
          step_id,
          frame_number,
          image_url,
          location_text,
          measurements_text
        `).eq("response_id",e).order("step_id").order("frame_number",{ascending:!0});S?console.error("Error fetching frames:",S):(console.log("Frames data fetched:",k),console.log("Frame URLs:",k==null?void 0:k.map(N=>({id:N.id,url:N.image_url}))),_.response_frames=k||[]),console.log("Response detail loaded:",_),console.log("Response frames:",_.response_frames),console.log("Response answers:",_.response_answers),i(_)}catch(w){console.error("Error fetching response details:",w),r({type:"error",message:"Failed to load response details"})}finally{l(!1)}},u=async(w,y)=>{try{const g=await(await fetch(w)).blob(),_=window.URL.createObjectURL(g),k=document.createElement("a");k.href=_,k.download=y,document.body.appendChild(k),k.click(),document.body.removeChild(k),window.URL.revokeObjectURL(_),r({type:"success",message:"Downloaded successfully"})}catch(x){console.error("Error downloading file:",x),r({type:"error",message:"Failed to download file"})}},d=async()=>{try{let w=0;if(s.response_answers)for(const y of s.response_answers)y.file_url&&y.file_name&&(await u(y.file_url,y.file_name),w++,await new Promise(x=>setTimeout(x,300)));if(s.response_frames){for(const y of s.response_frames)if(y.image_url){const x=`frame-${y.frame_number}-step-${y.step_id}.jpg`;await u(y.image_url,x),w++,await new Promise(g=>setTimeout(g,300))}}w>0?r({type:"success",message:`Downloaded ${w} file${w>1?"s":""}`}):r({type:"info",message:"No attachments to download"})}catch(w){console.error("Error downloading all attachments:",w),r({type:"error",message:"Failed to download some files"})}},h=w=>{var x;const y=(x=w.form_steps)==null?void 0:x.question_type;return(y==="file_upload"||y==="contact_fields")&&w.file_url?o.jsxs("div",{className:"flex items-center gap-3 bg-blue-50 dark:bg-blue-500/10 rounded-lg p-4 border border-blue-200 dark:border-blue-400/30",children:[o.jsx(sr,{className:"w-6 h-6 text-blue-600 dark:text-blue-400 flex-shrink-0"}),o.jsxs("div",{className:"flex-1 min-w-0",children:[o.jsx("a",{href:w.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline font-medium block truncate",children:w.file_name||"Download File"}),w.file_size&&o.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(w.file_size/1024).toFixed(1)," KB"]})]}),o.jsx("button",{onClick:()=>u(w.file_url,w.file_name||"file"),className:"p-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex-shrink-0",title:"Download file",children:o.jsx(Ln,{className:"w-5 h-5"})})]}):w.width||w.height||w.depth?o.jsxs("span",{className:"text-gray-900 dark:text-white",children:[w.width||"","  ",w.height||"","  ",w.depth||""," ",w.units||""]}):w.scale_rating!==null?o.jsxs("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(g=>o.jsx("span",{className:g<=w.scale_rating?"text-yellow-400 text-xl":"text-gray-300 dark:text-gray-600 text-xl",children:""},g)),o.jsxs("span",{className:"text-gray-700 dark:text-gray-300 ml-2",children:["(",w.scale_rating,"/5)"]})]}):w.form_option?o.jsxs("div",{className:"space-y-2",children:[o.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:w.form_option.label}),w.form_option.image_url&&o.jsxs("div",{className:"relative group inline-block",children:[o.jsx("img",{src:w.form_option.image_url,alt:w.form_option.label,className:"w-32 h-32 object-cover rounded-lg border-2 border-gray-200 dark:border-gray-700"}),o.jsx("button",{onClick:()=>u(w.form_option.image_url,"image.jpg"),className:"absolute top-2 right-2 p-1.5 bg-black/60 hover:bg-black/80 text-white rounded-lg opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(Ln,{className:"w-4 h-4"})})]})]}):o.jsx("span",{className:"text-gray-900 dark:text-white",children:w.answer_text||"No response"})},f=w=>{var x;const y=((x=s.response_frames)==null?void 0:x.filter(g=>g.step_id===w))||[];return y.length===0?null:o.jsxs("div",{className:"mt-4 space-y-3",children:[o.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:[y.length," frame",y.length>1?"s":""," captured"]}),o.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:y.map(g=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[g.image_url?o.jsxs("div",{className:"relative group",children:[o.jsx("img",{src:g.image_url,alt:`Frame ${g.frame_number}`,className:"w-full h-40 object-cover rounded-lg mb-2"}),o.jsx("button",{onClick:()=>u(g.image_url,`frame-${g.frame_number}.jpg`),className:"absolute top-2 right-2 p-2 bg-black/60 hover:bg-black/80 text-white rounded-lg opacity-0 group-hover:opacity-100 transition-opacity",children:o.jsx(Ln,{className:"w-4 h-4"})})]}):o.jsx("div",{className:"w-full h-40 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center mb-2",children:o.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"No image"})}),o.jsxs("div",{className:"space-y-1 text-sm",children:[o.jsxs("p",{className:"font-medium text-gray-900 dark:text-white",children:["Frame ",g.frame_number]}),g.location_text&&o.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:g.location_text}),g.measurements_text&&o.jsx("p",{className:"text-gray-500 dark:text-gray-500 text-xs",children:g.measurements_text})]})]},g.id))})]})};return a?o.jsx("div",{className:"flex items-center justify-center min-h-screen",children:o.jsx(wv,{className:"w-8 h-8 animate-spin text-blue-600"})}):s?o.jsx("div",{className:`min-h-screen ${n==="light"?"bg-gray-50":"bg-gray-900"} py-8`,children:o.jsxs("div",{className:"max-w-5xl mx-auto px-4",children:[o.jsxs("div",{className:"mb-6",children:[o.jsxs("button",{onClick:()=>t(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white mb-4 transition-colors",children:[o.jsx(Qf,{className:"w-5 h-5"}),"Back"]}),o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Response Details"}),o.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:["Submitted ",new Date(s.submitted_at).toLocaleString()]})]}),o.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-xl transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[o.jsx(Ln,{className:"w-5 h-5"}),"Download All Attachments"]})]})]}),o.jsxs("div",{className:`${n==="light"?"bg-white":"bg-gray-800"} rounded-xl shadow-lg p-6 mb-6`,children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Contact Information"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.contact_name&&o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Li,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Name"}),o.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:s.contact_name})]})]}),s.contact_email&&o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(Xl,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),o.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:s.contact_email})]})]}),s.contact_phone&&o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(kv,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Phone"}),o.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:s.contact_phone})]})]}),s.contact_postcode&&o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx(_v,{className:"w-5 h-5 text-gray-500 dark:text-gray-400"}),o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Postcode"}),o.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:s.contact_postcode})]})]})]}),s.project_details&&o.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:"Project Details"}),o.jsx("p",{className:"text-gray-900 dark:text-white",children:s.project_details})]})]}),o.jsxs("div",{className:`${n==="light"?"bg-white":"bg-gray-800"} rounded-xl shadow-lg p-6 mb-6`,children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"Form Details"}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Form Name"}),o.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:(m=s.form)==null?void 0:m.name})]}),((v=s.form)==null?void 0:v.clients)&&o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Client"}),o.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:s.form.clients.name})]})]})]}),o.jsxs("div",{className:`${n==="light"?"bg-white":"bg-gray-800"} rounded-xl shadow-lg p-6`,children:[o.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6",children:"Response Answers"}),o.jsx("div",{className:"space-y-6",children:(b=s.response_answers)==null?void 0:b.map((w,y)=>{var x,g,_,k;return o.jsxs("div",{className:`pb-6 ${y<s.response_answers.length-1?"border-b border-gray-200 dark:border-gray-700":""}`,children:[o.jsxs("div",{className:"flex items-start justify-between mb-3",children:[o.jsx("h3",{className:"font-medium text-gray-900 dark:text-white",children:((x=w.form_steps)==null?void 0:x.title)||"Question"}),o.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400",children:(_=(g=w.form_steps)==null?void 0:g.question_type)==null?void 0:_.replace("_"," ")})]}),o.jsxs("div",{children:[h(w),((k=w.form_steps)==null?void 0:k.question_type)==="frames_plan"&&o.jsxs(o.Fragment,{children:[w.frames_count&&o.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:["Requested: ",w.frames_count," frame",w.frames_count>1?"s":""]}),f(w.step_id)]})]})]},w.id)})})]})]})}):o.jsx("div",{className:"p-8",children:o.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Response not found"}),o.jsx("button",{onClick:()=>t(-1),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400",children:" Go back"})]})})}function Nn({children:e,adminOnly:t=!1}){const{user:r,userType:n,loading:s}=kr(),{theme:i}=Ue();return s?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#111111]",children:o.jsxs("div",{className:"text-center animate-fade-in",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-orange-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 animate-pulse",children:o.jsx("div",{className:`animate-spin rounded-full h-8 w-8 border-b-2 ${i==="light"?"border-gray-600":"border-white"}`})}),o.jsx("p",{className:i==="light"?"text-gray-600":"text-white/70",children:"Loading..."})]})}):r?t&&n==="client"?o.jsx(Kl,{to:"/responses",replace:!0}):o.jsx(o.Fragment,{children:e}):o.jsx(Kl,{to:"/login",replace:!0})}function MA(){const{user:e,userType:t,loading:r}=kr(),{theme:n}=Ue();console.log("AppRoutes: Simple state check",{user:e==null?void 0:e.email,userType:t,loading:r});const s=window.location.pathname,a=window.location.hostname!=="noahung.github.io"?"":"/online-designer-beta",l=a?s.replace(a,""):s;return l.startsWith("/api/")?(console.log("AppRoutes: API endpoint route detected",{currentPath:s,pathWithoutBasename:l}),o.jsx(wu,{children:o.jsx(Ut,{path:"api/forms",element:o.jsx(wA,{})})})):l.startsWith("/form/")?(console.log("AppRoutes: Public form embed route detected",{currentPath:s,pathWithoutBasename:l}),o.jsx(wu,{children:o.jsx(Ut,{path:"form/:id",element:o.jsx(vA,{})})})):r?(console.log("AppRoutes: Still loading"),o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#111111]",children:o.jsxs("div",{className:"text-center animate-fade-in",children:[o.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-orange-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4 animate-pulse",children:o.jsx("div",{className:`animate-spin rounded-full h-8 w-8 border-b-2 ${n==="light"?"border-gray-600":"border-white"}`})}),o.jsx("p",{className:n==="light"?"text-gray-600":"text-white/70",children:"Loading..."})]})})):e?(console.log("AppRoutes: User authenticated, showing routes"),o.jsxs(wu,{children:[o.jsx(Ut,{path:"/login",element:o.jsx(Kl,{to:"/",replace:!0})}),o.jsxs(Ut,{path:"/",element:o.jsx(ZP,{}),children:[o.jsx(Ut,{index:!0,element:t==="client"?o.jsx(Kl,{to:"/responses",replace:!0}):o.jsx(o3,{})}),o.jsx(Ut,{path:"clients",element:o.jsx(Nn,{adminOnly:!0,children:o.jsx(l3,{})})}),o.jsx(Ut,{path:"forms",element:o.jsx(Nn,{adminOnly:!0,children:o.jsx(j3,{})})}),o.jsx(Ut,{path:"forms/new",element:o.jsx(Nn,{adminOnly:!0,children:o.jsx(px,{})})}),o.jsx(Ut,{path:"forms/edit/:id",element:o.jsx(Nn,{adminOnly:!0,children:o.jsx(px,{})})}),o.jsx(Ut,{path:"forms/:formId/responses",element:o.jsx(Nn,{adminOnly:!0,children:o.jsx(RA,{})})}),o.jsx(Ut,{path:"responses",element:o.jsx(Nn,{children:o.jsx(k3,{})})}),o.jsx(Ut,{path:"response/:responseId",element:o.jsx(Nn,{children:o.jsx(DA,{})})}),o.jsx(Ut,{path:"settings",element:o.jsx(Nn,{adminOnly:!0,children:o.jsx(N3,{})})})]})]})):(console.log("AppRoutes: No user, showing login"),o.jsx(s3,{}))}function OA(){const{theme:e}=Ue(),r=window.location.hostname!=="noahung.github.io"?"":"/online-designer-beta";return o.jsx("div",{className:"min-h-screen bg-[#111111]",children:o.jsx("div",{className:`min-h-screen backdrop-blur-sm ${e==="light"?"bg-white/30":"bg-black/20"}`,children:o.jsx(rC,{children:o.jsx(sC,{children:o.jsx(Pk,{basename:r,children:o.jsx(MA,{})})})})})})}function LA(){return p.useEffect(()=>{iC()},[]),o.jsx(oC,{children:o.jsx(OA,{})})}Eb(document.getElementById("root")).render(o.jsx(p.StrictMode,{children:o.jsx(nC,{children:o.jsx(LA,{})})}));
